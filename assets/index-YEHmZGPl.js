var _p=Object.defineProperty;var Fc=t=>{throw TypeError(t)};var kp=(t,e,n)=>e in t?_p(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Q=(t,e,n)=>kp(t,typeof e!="symbol"?e+"":e,n),Hi=(t,e,n)=>e.has(t)||Fc("Cannot "+n);var F=(t,e,n)=>(Hi(t,e,"read from private field"),n?n.call(t):e.get(t)),pe=(t,e,n)=>e.has(t)?Fc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ae=(t,e,n,s)=>(Hi(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),ze=(t,e,n)=>(Hi(t,e,"access private method"),n);var or=(t,e,n,s)=>({set _(a){ae(t,e,a,n)},get _(){return F(t,e,s)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();var Cp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hd={exports:{}},xi={},gd={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var er=Symbol.for("react.element"),Tp=Symbol.for("react.portal"),Ep=Symbol.for("react.fragment"),Dp=Symbol.for("react.strict_mode"),Ap=Symbol.for("react.profiler"),Mp=Symbol.for("react.provider"),Bp=Symbol.for("react.context"),$p=Symbol.for("react.forward_ref"),Fp=Symbol.for("react.suspense"),Ip=Symbol.for("react.memo"),Vp=Symbol.for("react.lazy"),Ic=Symbol.iterator;function Lp(t){return t===null||typeof t!="object"?null:(t=Ic&&t[Ic]||t["@@iterator"],typeof t=="function"?t:null)}var yd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xd=Object.assign,vd={};function sa(t,e,n){this.props=t,this.context=e,this.refs=vd,this.updater=n||yd}sa.prototype.isReactComponent={};sa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Sd(){}Sd.prototype=sa.prototype;function Tl(t,e,n){this.props=t,this.context=e,this.refs=vd,this.updater=n||yd}var El=Tl.prototype=new Sd;El.constructor=Tl;xd(El,sa.prototype);El.isPureReactComponent=!0;var Vc=Array.isArray,wd=Object.prototype.hasOwnProperty,Dl={current:null},Nd={key:!0,ref:!0,__self:!0,__source:!0};function jd(t,e,n){var s,a={},r=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)wd.call(e,s)&&!Nd.hasOwnProperty(s)&&(a[s]=e[s]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(s in l=t.defaultProps,l)a[s]===void 0&&(a[s]=l[s]);return{$$typeof:er,type:t,key:r,ref:o,props:a,_owner:Dl.current}}function Op(t,e){return{$$typeof:er,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Al(t){return typeof t=="object"&&t!==null&&t.$$typeof===er}function zp(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Lc=/\/+/g;function Ui(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zp(""+t.key):e.toString(36)}function Tr(t,e,n,s,a){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case er:case Tp:o=!0}}if(o)return o=t,a=a(o),t=s===""?"."+Ui(o,0):s,Vc(a)?(n="",t!=null&&(n=t.replace(Lc,"$&/")+"/"),Tr(a,e,n,"",function(u){return u})):a!=null&&(Al(a)&&(a=Op(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Lc,"$&/")+"/")+t)),e.push(a)),1;if(o=0,s=s===""?".":s+":",Vc(t))for(var l=0;l<t.length;l++){r=t[l];var c=s+Ui(r,l);o+=Tr(r,e,n,c,a)}else if(c=Lp(t),typeof c=="function")for(t=c.call(t),l=0;!(r=t.next()).done;)r=r.value,c=s+Ui(r,l++),o+=Tr(r,e,n,c,a);else if(r==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function lr(t,e,n){if(t==null)return t;var s=[],a=0;return Tr(t,s,"","",function(r){return e.call(n,r,a++)}),s}function Wp(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xe={current:null},Er={transition:null},qp={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:Er,ReactCurrentOwner:Dl};function bd(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:lr,forEach:function(t,e,n){lr(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return lr(t,function(){e++}),e},toArray:function(t){return lr(t,function(e){return e})||[]},only:function(t){if(!Al(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=sa;ue.Fragment=Ep;ue.Profiler=Ap;ue.PureComponent=Tl;ue.StrictMode=Dp;ue.Suspense=Fp;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qp;ue.act=bd;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=xd({},t.props),a=t.key,r=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=Dl.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)wd.call(e,c)&&!Nd.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:er,type:t.type,key:a,ref:r,props:s,_owner:o}};ue.createContext=function(t){return t={$$typeof:Bp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Mp,_context:t},t.Consumer=t};ue.createElement=jd;ue.createFactory=function(t){var e=jd.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:$p,render:t}};ue.isValidElement=Al;ue.lazy=function(t){return{$$typeof:Vp,_payload:{_status:-1,_result:t},_init:Wp}};ue.memo=function(t,e){return{$$typeof:Ip,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=Er.transition;Er.transition={};try{t()}finally{Er.transition=e}};ue.unstable_act=bd;ue.useCallback=function(t,e){return Xe.current.useCallback(t,e)};ue.useContext=function(t){return Xe.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Xe.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Xe.current.useEffect(t,e)};ue.useId=function(){return Xe.current.useId()};ue.useImperativeHandle=function(t,e,n){return Xe.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Xe.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Xe.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Xe.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return Xe.current.useReducer(t,e,n)};ue.useRef=function(t){return Xe.current.useRef(t)};ue.useState=function(t){return Xe.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Xe.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Xe.current.useTransition()};ue.version="18.3.1";gd.exports=ue;var D=gd.exports;const vi=Cl(D);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hp=D,Up=Symbol.for("react.element"),Qp=Symbol.for("react.fragment"),Gp=Object.prototype.hasOwnProperty,Kp=Hp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yp={key:!0,ref:!0,__self:!0,__source:!0};function Pd(t,e,n){var s,a={},r=null,o=null;n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)Gp.call(e,s)&&!Yp.hasOwnProperty(s)&&(a[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)a[s]===void 0&&(a[s]=e[s]);return{$$typeof:Up,type:t,key:r,ref:o,props:a,_owner:Kp.current}}xi.Fragment=Qp;xi.jsx=Pd;xi.jsxs=Pd;hd.exports=xi;var i=hd.exports,jo={},Rd={exports:{}},mt={},_d={exports:{}},kd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,A){var O=I.length;I.push(A);e:for(;0<O;){var V=O-1>>>1,R=I[V];if(0<a(R,A))I[V]=A,I[O]=R,O=V;else break e}}function n(I){return I.length===0?null:I[0]}function s(I){if(I.length===0)return null;var A=I[0],O=I.pop();if(O!==A){I[0]=O;e:for(var V=0,R=I.length,b=R>>>1;V<b;){var $=2*(V+1)-1,L=I[$],q=$+1,Y=I[q];if(0>a(L,O))q<R&&0>a(Y,L)?(I[V]=Y,I[q]=O,V=q):(I[V]=L,I[$]=O,V=$);else if(q<R&&0>a(Y,O))I[V]=Y,I[q]=O,V=q;else break e}}return A}function a(I,A){var O=I.sortIndex-A.sortIndex;return O!==0?O:I.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,m=null,f=3,h=!1,p=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(I){for(var A=n(u);A!==null;){if(A.callback===null)s(u);else if(A.startTime<=I)s(u),A.sortIndex=A.expirationTime,e(c,A);else break;A=n(u)}}function x(I){if(v=!1,g(I),!p)if(n(c)!==null)p=!0,J(N);else{var A=n(u);A!==null&&U(x,A.startTime-I)}}function N(I,A){p=!1,v&&(v=!1,S(j),j=-1),h=!0;var O=f;try{for(g(A),m=n(c);m!==null&&(!(m.expirationTime>A)||I&&!E());){var V=m.callback;if(typeof V=="function"){m.callback=null,f=m.priorityLevel;var R=V(m.expirationTime<=A);A=t.unstable_now(),typeof R=="function"?m.callback=R:m===n(c)&&s(c),g(A)}else s(c);m=n(c)}if(m!==null)var b=!0;else{var $=n(u);$!==null&&U(x,$.startTime-A),b=!1}return b}finally{m=null,f=O,h=!1}}var k=!1,T=null,j=-1,_=5,C=-1;function E(){return!(t.unstable_now()-C<_)}function M(){if(T!==null){var I=t.unstable_now();C=I;var A=!0;try{A=T(!0,I)}finally{A?W():(k=!1,T=null)}}else k=!1}var W;if(typeof y=="function")W=function(){y(M)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,H=B.port2;B.port1.onmessage=M,W=function(){H.postMessage(null)}}else W=function(){w(M,0)};function J(I){T=I,k||(k=!0,W())}function U(I,A){j=w(function(){I(t.unstable_now())},A)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,J(N))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(I){switch(f){case 1:case 2:case 3:var A=3;break;default:A=f}var O=f;f=A;try{return I()}finally{f=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,A){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var O=f;f=I;try{return A()}finally{f=O}},t.unstable_scheduleCallback=function(I,A,O){var V=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?V+O:V):O=V,I){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=O+R,I={id:d++,callback:A,priorityLevel:I,startTime:O,expirationTime:R,sortIndex:-1},O>V?(I.sortIndex=O,e(u,I),n(c)===null&&I===n(u)&&(v?(S(j),j=-1):v=!0,U(x,O-V))):(I.sortIndex=R,e(c,I),p||h||(p=!0,J(N))),I},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(I){var A=f;return function(){var O=f;f=A;try{return I.apply(this,arguments)}finally{f=O}}}})(kd);_d.exports=kd;var Jp=_d.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp=D,dt=Jp;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cd=new Set,Ea={};function hs(t,e){Ks(t,e),Ks(t+"Capture",e)}function Ks(t,e){for(Ea[t]=e,t=0;t<e.length;t++)Cd.add(e[t])}var an=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bo=Object.prototype.hasOwnProperty,Xp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Oc={},zc={};function eh(t){return bo.call(zc,t)?!0:bo.call(Oc,t)?!1:Xp.test(t)?zc[t]=!0:(Oc[t]=!0,!1)}function th(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nh(t,e,n,s){if(e===null||typeof e>"u"||th(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function et(t,e,n,s,a,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var Le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Le[t]=new et(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Le[e]=new et(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Le[t]=new et(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Le[t]=new et(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Le[t]=new et(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Le[t]=new et(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Le[t]=new et(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Le[t]=new et(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Le[t]=new et(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ml=/[\-:]([a-z])/g;function Bl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ml,Bl);Le[e]=new et(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ml,Bl);Le[e]=new et(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ml,Bl);Le[e]=new et(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Le[t]=new et(t,1,!1,t.toLowerCase(),null,!1,!1)});Le.xlinkHref=new et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Le[t]=new et(t,1,!1,t.toLowerCase(),null,!0,!0)});function $l(t,e,n,s){var a=Le.hasOwnProperty(e)?Le[e]:null;(a!==null?a.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nh(e,n,a,s)&&(n=null),s||a===null?eh(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(e=a.attributeName,s=a.attributeNamespace,n===null?t.removeAttribute(e):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var mn=Zp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cr=Symbol.for("react.element"),ws=Symbol.for("react.portal"),Ns=Symbol.for("react.fragment"),Fl=Symbol.for("react.strict_mode"),Po=Symbol.for("react.profiler"),Td=Symbol.for("react.provider"),Ed=Symbol.for("react.context"),Il=Symbol.for("react.forward_ref"),Ro=Symbol.for("react.suspense"),_o=Symbol.for("react.suspense_list"),Vl=Symbol.for("react.memo"),hn=Symbol.for("react.lazy"),Dd=Symbol.for("react.offscreen"),Wc=Symbol.iterator;function la(t){return t===null||typeof t!="object"?null:(t=Wc&&t[Wc]||t["@@iterator"],typeof t=="function"?t:null)}var be=Object.assign,Qi;function ya(t){if(Qi===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Qi=e&&e[1]||""}return`
`+Qi+t}var Gi=!1;function Ki(t,e){if(!t||Gi)return"";Gi=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){s=u}t.call(e.prototype)}else{try{throw Error()}catch(u){s=u}t()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),r=s.stack.split(`
`),o=a.length-1,l=r.length-1;1<=o&&0<=l&&a[o]!==r[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==r[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==r[l]){var c=`
`+a[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Gi=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ya(t):""}function sh(t){switch(t.tag){case 5:return ya(t.type);case 16:return ya("Lazy");case 13:return ya("Suspense");case 19:return ya("SuspenseList");case 0:case 2:case 15:return t=Ki(t.type,!1),t;case 11:return t=Ki(t.type.render,!1),t;case 1:return t=Ki(t.type,!0),t;default:return""}}function ko(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ns:return"Fragment";case ws:return"Portal";case Po:return"Profiler";case Fl:return"StrictMode";case Ro:return"Suspense";case _o:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ed:return(t.displayName||"Context")+".Consumer";case Td:return(t._context.displayName||"Context")+".Provider";case Il:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vl:return e=t.displayName||null,e!==null?e:ko(t.type)||"Memo";case hn:e=t._payload,t=t._init;try{return ko(t(e))}catch{}}return null}function ah(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ko(e);case 8:return e===Fl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ad(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rh(t){var e=Ad(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=""+o,r.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ur(t){t._valueTracker||(t._valueTracker=rh(t))}function Md(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=Ad(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Wr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Co(t,e){var n=e.checked;return be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qc(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=Fn(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Bd(t,e){e=e.checked,e!=null&&$l(t,"checked",e,!1)}function To(t,e){Bd(t,e);var n=Fn(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Eo(t,e.type,n):e.hasOwnProperty("defaultValue")&&Eo(t,e.type,Fn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Hc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Eo(t,e,n){(e!=="number"||Wr(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xa=Array.isArray;function As(t,e,n,s){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Fn(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,s&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function Do(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Uc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(xa(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fn(n)}}function $d(t,e){var n=Fn(e.value),s=Fn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function Qc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Fd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ao(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Fd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dr,Id=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,a){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(dr=dr||document.createElement("div"),dr.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Da(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ih=["Webkit","ms","Moz","O"];Object.keys(wa).forEach(function(t){ih.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wa[e]=wa[t]})});function Vd(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wa.hasOwnProperty(t)&&wa[t]?(""+e).trim():e+"px"}function Ld(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,a=Vd(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,a):t[n]=a}}var oh=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mo(t,e){if(e){if(oh[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Bo(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $o=null;function Ll(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fo=null,Ms=null,Bs=null;function Gc(t){if(t=sr(t)){if(typeof Fo!="function")throw Error(z(280));var e=t.stateNode;e&&(e=bi(e),Fo(t.stateNode,t.type,e))}}function Od(t){Ms?Bs?Bs.push(t):Bs=[t]:Ms=t}function zd(){if(Ms){var t=Ms,e=Bs;if(Bs=Ms=null,Gc(t),e)for(t=0;t<e.length;t++)Gc(e[t])}}function Wd(t,e){return t(e)}function qd(){}var Yi=!1;function Hd(t,e,n){if(Yi)return t(e,n);Yi=!0;try{return Wd(t,e,n)}finally{Yi=!1,(Ms!==null||Bs!==null)&&(qd(),zd())}}function Aa(t,e){var n=t.stateNode;if(n===null)return null;var s=bi(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Io=!1;if(an)try{var ca={};Object.defineProperty(ca,"passive",{get:function(){Io=!0}}),window.addEventListener("test",ca,ca),window.removeEventListener("test",ca,ca)}catch{Io=!1}function lh(t,e,n,s,a,r,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Na=!1,qr=null,Hr=!1,Vo=null,ch={onError:function(t){Na=!0,qr=t}};function uh(t,e,n,s,a,r,o,l,c){Na=!1,qr=null,lh.apply(ch,arguments)}function dh(t,e,n,s,a,r,o,l,c){if(uh.apply(this,arguments),Na){if(Na){var u=qr;Na=!1,qr=null}else throw Error(z(198));Hr||(Hr=!0,Vo=u)}}function gs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ud(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Kc(t){if(gs(t)!==t)throw Error(z(188))}function mh(t){var e=t.alternate;if(!e){if(e=gs(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,s=e;;){var a=n.return;if(a===null)break;var r=a.alternate;if(r===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===r.child){for(r=a.child;r;){if(r===n)return Kc(a),t;if(r===s)return Kc(a),e;r=r.sibling}throw Error(z(188))}if(n.return!==s.return)n=a,s=r;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,s=r;break}if(l===s){o=!0,s=a,n=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===n){o=!0,n=r,s=a;break}if(l===s){o=!0,s=r,n=a;break}l=l.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==s)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Qd(t){return t=mh(t),t!==null?Gd(t):null}function Gd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Gd(t);if(e!==null)return e;t=t.sibling}return null}var Kd=dt.unstable_scheduleCallback,Yc=dt.unstable_cancelCallback,fh=dt.unstable_shouldYield,ph=dt.unstable_requestPaint,_e=dt.unstable_now,hh=dt.unstable_getCurrentPriorityLevel,Ol=dt.unstable_ImmediatePriority,Yd=dt.unstable_UserBlockingPriority,Ur=dt.unstable_NormalPriority,gh=dt.unstable_LowPriority,Jd=dt.unstable_IdlePriority,Si=null,Ht=null;function yh(t){if(Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(Si,t,void 0,(t.current.flags&128)===128)}catch{}}var Dt=Math.clz32?Math.clz32:Sh,xh=Math.log,vh=Math.LN2;function Sh(t){return t>>>=0,t===0?32:31-(xh(t)/vh|0)|0}var mr=64,fr=4194304;function va(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qr(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,a=t.suspendedLanes,r=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?s=va(l):(r&=o,r!==0&&(s=va(r)))}else o=n&~a,o!==0?s=va(o):r!==0&&(s=va(r));if(s===0)return 0;if(e!==0&&e!==s&&!(e&a)&&(a=s&-s,r=e&-e,a>=r||a===16&&(r&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Dt(e),a=1<<n,s|=t[n],e&=~a;return s}function wh(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nh(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,a=t.expirationTimes,r=t.pendingLanes;0<r;){var o=31-Dt(r),l=1<<o,c=a[o];c===-1?(!(l&n)||l&s)&&(a[o]=wh(l,e)):c<=e&&(t.expiredLanes|=l),r&=~l}}function Lo(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Zd(){var t=mr;return mr<<=1,!(mr&4194240)&&(mr=64),t}function Ji(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tr(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Dt(e),t[e]=n}function jh(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-Dt(n),r=1<<a;e[a]=0,s[a]=-1,t[a]=-1,n&=~r}}function zl(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Dt(n),a=1<<s;a&e|t[s]&e&&(t[s]|=e),n&=~a}}var he=0;function Xd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var em,Wl,tm,nm,sm,Oo=!1,pr=[],Cn=null,Tn=null,En=null,Ma=new Map,Ba=new Map,yn=[],bh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jc(t,e){switch(t){case"focusin":case"focusout":Cn=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":En=null;break;case"pointerover":case"pointerout":Ma.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ba.delete(e.pointerId)}}function ua(t,e,n,s,a,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:r,targetContainers:[a]},e!==null&&(e=sr(e),e!==null&&Wl(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function Ph(t,e,n,s,a){switch(e){case"focusin":return Cn=ua(Cn,t,e,n,s,a),!0;case"dragenter":return Tn=ua(Tn,t,e,n,s,a),!0;case"mouseover":return En=ua(En,t,e,n,s,a),!0;case"pointerover":var r=a.pointerId;return Ma.set(r,ua(Ma.get(r)||null,t,e,n,s,a)),!0;case"gotpointercapture":return r=a.pointerId,Ba.set(r,ua(Ba.get(r)||null,t,e,n,s,a)),!0}return!1}function am(t){var e=Xn(t.target);if(e!==null){var n=gs(e);if(n!==null){if(e=n.tag,e===13){if(e=Ud(n),e!==null){t.blockedOn=e,sm(t.priority,function(){tm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Dr(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=zo(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);$o=s,n.target.dispatchEvent(s),$o=null}else return e=sr(n),e!==null&&Wl(e),t.blockedOn=n,!1;e.shift()}return!0}function Zc(t,e,n){Dr(t)&&n.delete(e)}function Rh(){Oo=!1,Cn!==null&&Dr(Cn)&&(Cn=null),Tn!==null&&Dr(Tn)&&(Tn=null),En!==null&&Dr(En)&&(En=null),Ma.forEach(Zc),Ba.forEach(Zc)}function da(t,e){t.blockedOn===e&&(t.blockedOn=null,Oo||(Oo=!0,dt.unstable_scheduleCallback(dt.unstable_NormalPriority,Rh)))}function $a(t){function e(a){return da(a,t)}if(0<pr.length){da(pr[0],t);for(var n=1;n<pr.length;n++){var s=pr[n];s.blockedOn===t&&(s.blockedOn=null)}}for(Cn!==null&&da(Cn,t),Tn!==null&&da(Tn,t),En!==null&&da(En,t),Ma.forEach(e),Ba.forEach(e),n=0;n<yn.length;n++)s=yn[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<yn.length&&(n=yn[0],n.blockedOn===null);)am(n),n.blockedOn===null&&yn.shift()}var $s=mn.ReactCurrentBatchConfig,Gr=!0;function _h(t,e,n,s){var a=he,r=$s.transition;$s.transition=null;try{he=1,ql(t,e,n,s)}finally{he=a,$s.transition=r}}function kh(t,e,n,s){var a=he,r=$s.transition;$s.transition=null;try{he=4,ql(t,e,n,s)}finally{he=a,$s.transition=r}}function ql(t,e,n,s){if(Gr){var a=zo(t,e,n,s);if(a===null)oo(t,e,s,Kr,n),Jc(t,s);else if(Ph(a,t,e,n,s))s.stopPropagation();else if(Jc(t,s),e&4&&-1<bh.indexOf(t)){for(;a!==null;){var r=sr(a);if(r!==null&&em(r),r=zo(t,e,n,s),r===null&&oo(t,e,s,Kr,n),r===a)break;a=r}a!==null&&s.stopPropagation()}else oo(t,e,s,null,n)}}var Kr=null;function zo(t,e,n,s){if(Kr=null,t=Ll(s),t=Xn(t),t!==null)if(e=gs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ud(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Kr=t,null}function rm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hh()){case Ol:return 1;case Yd:return 4;case Ur:case gh:return 16;case Jd:return 536870912;default:return 16}default:return 16}}var Rn=null,Hl=null,Ar=null;function im(){if(Ar)return Ar;var t,e=Hl,n=e.length,s,a="value"in Rn?Rn.value:Rn.textContent,r=a.length;for(t=0;t<n&&e[t]===a[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===a[r-s];s++);return Ar=a.slice(t,1<s?1-s:void 0)}function Mr(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hr(){return!0}function Xc(){return!1}function ft(t){function e(n,s,a,r,o){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?hr:Xc,this.isPropagationStopped=Xc,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hr)},persist:function(){},isPersistent:hr}),e}var aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ul=ft(aa),nr=be({},aa,{view:0,detail:0}),Ch=ft(nr),Zi,Xi,ma,wi=be({},nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ql,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ma&&(ma&&t.type==="mousemove"?(Zi=t.screenX-ma.screenX,Xi=t.screenY-ma.screenY):Xi=Zi=0,ma=t),Zi)},movementY:function(t){return"movementY"in t?t.movementY:Xi}}),eu=ft(wi),Th=be({},wi,{dataTransfer:0}),Eh=ft(Th),Dh=be({},nr,{relatedTarget:0}),eo=ft(Dh),Ah=be({},aa,{animationName:0,elapsedTime:0,pseudoElement:0}),Mh=ft(Ah),Bh=be({},aa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$h=ft(Bh),Fh=be({},aa,{data:0}),tu=ft(Fh),Ih={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oh(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Lh[t])?!!e[t]:!1}function Ql(){return Oh}var zh=be({},nr,{key:function(t){if(t.key){var e=Ih[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Mr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vh[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ql,charCode:function(t){return t.type==="keypress"?Mr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Wh=ft(zh),qh=be({},wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nu=ft(qh),Hh=be({},nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ql}),Uh=ft(Hh),Qh=be({},aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gh=ft(Qh),Kh=be({},wi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Yh=ft(Kh),Jh=[9,13,27,32],Gl=an&&"CompositionEvent"in window,ja=null;an&&"documentMode"in document&&(ja=document.documentMode);var Zh=an&&"TextEvent"in window&&!ja,om=an&&(!Gl||ja&&8<ja&&11>=ja),su=" ",au=!1;function lm(t,e){switch(t){case"keyup":return Jh.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var js=!1;function Xh(t,e){switch(t){case"compositionend":return cm(e);case"keypress":return e.which!==32?null:(au=!0,su);case"textInput":return t=e.data,t===su&&au?null:t;default:return null}}function e0(t,e){if(js)return t==="compositionend"||!Gl&&lm(t,e)?(t=im(),Ar=Hl=Rn=null,js=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return om&&e.locale!=="ko"?null:e.data;default:return null}}var t0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ru(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!t0[t.type]:e==="textarea"}function um(t,e,n,s){Od(s),e=Yr(e,"onChange"),0<e.length&&(n=new Ul("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var ba=null,Fa=null;function n0(t){wm(t,0)}function Ni(t){var e=Rs(t);if(Md(e))return t}function s0(t,e){if(t==="change")return e}var dm=!1;if(an){var to;if(an){var no="oninput"in document;if(!no){var iu=document.createElement("div");iu.setAttribute("oninput","return;"),no=typeof iu.oninput=="function"}to=no}else to=!1;dm=to&&(!document.documentMode||9<document.documentMode)}function ou(){ba&&(ba.detachEvent("onpropertychange",mm),Fa=ba=null)}function mm(t){if(t.propertyName==="value"&&Ni(Fa)){var e=[];um(e,Fa,t,Ll(t)),Hd(n0,e)}}function a0(t,e,n){t==="focusin"?(ou(),ba=e,Fa=n,ba.attachEvent("onpropertychange",mm)):t==="focusout"&&ou()}function r0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ni(Fa)}function i0(t,e){if(t==="click")return Ni(e)}function o0(t,e){if(t==="input"||t==="change")return Ni(e)}function l0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mt=typeof Object.is=="function"?Object.is:l0;function Ia(t,e){if(Mt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!bo.call(e,a)||!Mt(t[a],e[a]))return!1}return!0}function lu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cu(t,e){var n=lu(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lu(n)}}function fm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pm(){for(var t=window,e=Wr();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wr(t.document)}return e}function Kl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function c0(t){var e=pm(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fm(n.ownerDocument.documentElement,n)){if(s!==null&&Kl(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,r=Math.min(s.start,a);s=s.end===void 0?r:Math.min(s.end,a),!t.extend&&r>s&&(a=s,s=r,r=a),a=cu(n,r);var o=cu(n,s);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),r>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var u0=an&&"documentMode"in document&&11>=document.documentMode,bs=null,Wo=null,Pa=null,qo=!1;function uu(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qo||bs==null||bs!==Wr(s)||(s=bs,"selectionStart"in s&&Kl(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Pa&&Ia(Pa,s)||(Pa=s,s=Yr(Wo,"onSelect"),0<s.length&&(e=new Ul("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=bs)))}function gr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ps={animationend:gr("Animation","AnimationEnd"),animationiteration:gr("Animation","AnimationIteration"),animationstart:gr("Animation","AnimationStart"),transitionend:gr("Transition","TransitionEnd")},so={},hm={};an&&(hm=document.createElement("div").style,"AnimationEvent"in window||(delete Ps.animationend.animation,delete Ps.animationiteration.animation,delete Ps.animationstart.animation),"TransitionEvent"in window||delete Ps.transitionend.transition);function ji(t){if(so[t])return so[t];if(!Ps[t])return t;var e=Ps[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hm)return so[t]=e[n];return t}var gm=ji("animationend"),ym=ji("animationiteration"),xm=ji("animationstart"),vm=ji("transitionend"),Sm=new Map,du="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function On(t,e){Sm.set(t,e),hs(e,[t])}for(var ao=0;ao<du.length;ao++){var ro=du[ao],d0=ro.toLowerCase(),m0=ro[0].toUpperCase()+ro.slice(1);On(d0,"on"+m0)}On(gm,"onAnimationEnd");On(ym,"onAnimationIteration");On(xm,"onAnimationStart");On("dblclick","onDoubleClick");On("focusin","onFocus");On("focusout","onBlur");On(vm,"onTransitionEnd");Ks("onMouseEnter",["mouseout","mouseover"]);Ks("onMouseLeave",["mouseout","mouseover"]);Ks("onPointerEnter",["pointerout","pointerover"]);Ks("onPointerLeave",["pointerout","pointerover"]);hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sa));function mu(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,dh(s,e,void 0,t),t.currentTarget=null}function wm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],a=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==r&&a.isPropagationStopped())break e;mu(a,l,u),r=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==r&&a.isPropagationStopped())break e;mu(a,l,u),r=c}}}if(Hr)throw t=Vo,Hr=!1,Vo=null,t}function xe(t,e){var n=e[Ko];n===void 0&&(n=e[Ko]=new Set);var s=t+"__bubble";n.has(s)||(Nm(e,t,2,!1),n.add(s))}function io(t,e,n){var s=0;e&&(s|=4),Nm(n,t,s,e)}var yr="_reactListening"+Math.random().toString(36).slice(2);function Va(t){if(!t[yr]){t[yr]=!0,Cd.forEach(function(n){n!=="selectionchange"&&(f0.has(n)||io(n,!1,t),io(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yr]||(e[yr]=!0,io("selectionchange",!1,e))}}function Nm(t,e,n,s){switch(rm(e)){case 1:var a=_h;break;case 4:a=kh;break;default:a=ql}n=a.bind(null,e,n,t),a=void 0,!Io||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),s?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function oo(t,e,n,s,a){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Xn(l),o===null)return;if(c=o.tag,c===5||c===6){s=r=o;continue e}l=l.parentNode}}s=s.return}Hd(function(){var u=r,d=Ll(n),m=[];e:{var f=Sm.get(t);if(f!==void 0){var h=Ul,p=t;switch(t){case"keypress":if(Mr(n)===0)break e;case"keydown":case"keyup":h=Wh;break;case"focusin":p="focus",h=eo;break;case"focusout":p="blur",h=eo;break;case"beforeblur":case"afterblur":h=eo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=eu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Eh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Uh;break;case gm:case ym:case xm:h=Mh;break;case vm:h=Gh;break;case"scroll":h=Ch;break;case"wheel":h=Yh;break;case"copy":case"cut":case"paste":h=$h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=nu}var v=(e&4)!==0,w=!v&&t==="scroll",S=v?f!==null?f+"Capture":null:f;v=[];for(var y=u,g;y!==null;){g=y;var x=g.stateNode;if(g.tag===5&&x!==null&&(g=x,S!==null&&(x=Aa(y,S),x!=null&&v.push(La(y,x,g)))),w)break;y=y.return}0<v.length&&(f=new h(f,p,null,n,d),m.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==$o&&(p=n.relatedTarget||n.fromElement)&&(Xn(p)||p[rn]))break e;if((h||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?Xn(p):null,p!==null&&(w=gs(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(v=eu,x="onMouseLeave",S="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=nu,x="onPointerLeave",S="onPointerEnter",y="pointer"),w=h==null?f:Rs(h),g=p==null?f:Rs(p),f=new v(x,y+"leave",h,n,d),f.target=w,f.relatedTarget=g,x=null,Xn(d)===u&&(v=new v(S,y+"enter",p,n,d),v.target=g,v.relatedTarget=w,x=v),w=x,h&&p)t:{for(v=h,S=p,y=0,g=v;g;g=Ss(g))y++;for(g=0,x=S;x;x=Ss(x))g++;for(;0<y-g;)v=Ss(v),y--;for(;0<g-y;)S=Ss(S),g--;for(;y--;){if(v===S||S!==null&&v===S.alternate)break t;v=Ss(v),S=Ss(S)}v=null}else v=null;h!==null&&fu(m,f,h,v,!1),p!==null&&w!==null&&fu(m,w,p,v,!0)}}e:{if(f=u?Rs(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var N=s0;else if(ru(f))if(dm)N=o0;else{N=r0;var k=a0}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=i0);if(N&&(N=N(t,u))){um(m,N,n,d);break e}k&&k(t,f,u),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Eo(f,"number",f.value)}switch(k=u?Rs(u):window,t){case"focusin":(ru(k)||k.contentEditable==="true")&&(bs=k,Wo=u,Pa=null);break;case"focusout":Pa=Wo=bs=null;break;case"mousedown":qo=!0;break;case"contextmenu":case"mouseup":case"dragend":qo=!1,uu(m,n,d);break;case"selectionchange":if(u0)break;case"keydown":case"keyup":uu(m,n,d)}var T;if(Gl)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else js?lm(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(om&&n.locale!=="ko"&&(js||j!=="onCompositionStart"?j==="onCompositionEnd"&&js&&(T=im()):(Rn=d,Hl="value"in Rn?Rn.value:Rn.textContent,js=!0)),k=Yr(u,j),0<k.length&&(j=new tu(j,t,null,n,d),m.push({event:j,listeners:k}),T?j.data=T:(T=cm(n),T!==null&&(j.data=T)))),(T=Zh?Xh(t,n):e0(t,n))&&(u=Yr(u,"onBeforeInput"),0<u.length&&(d=new tu("onBeforeInput","beforeinput",null,n,d),m.push({event:d,listeners:u}),d.data=T))}wm(m,e)})}function La(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yr(t,e){for(var n=e+"Capture",s=[];t!==null;){var a=t,r=a.stateNode;a.tag===5&&r!==null&&(a=r,r=Aa(t,n),r!=null&&s.unshift(La(t,r,a)),r=Aa(t,e),r!=null&&s.push(La(t,r,a))),t=t.return}return s}function Ss(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fu(t,e,n,s,a){for(var r=e._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,a?(c=Aa(n,r),c!=null&&o.unshift(La(n,c,l))):a||(c=Aa(n,r),c!=null&&o.push(La(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var p0=/\r\n?/g,h0=/\u0000|\uFFFD/g;function pu(t){return(typeof t=="string"?t:""+t).replace(p0,`
`).replace(h0,"")}function xr(t,e,n){if(e=pu(e),pu(t)!==e&&n)throw Error(z(425))}function Jr(){}var Ho=null,Uo=null;function Qo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Go=typeof setTimeout=="function"?setTimeout:void 0,g0=typeof clearTimeout=="function"?clearTimeout:void 0,hu=typeof Promise=="function"?Promise:void 0,y0=typeof queueMicrotask=="function"?queueMicrotask:typeof hu<"u"?function(t){return hu.resolve(null).then(t).catch(x0)}:Go;function x0(t){setTimeout(function(){throw t})}function lo(t,e){var n=e,s=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){t.removeChild(a),$a(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);$a(e)}function Dn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ra=Math.random().toString(36).slice(2),Wt="__reactFiber$"+ra,Oa="__reactProps$"+ra,rn="__reactContainer$"+ra,Ko="__reactEvents$"+ra,v0="__reactListeners$"+ra,S0="__reactHandles$"+ra;function Xn(t){var e=t[Wt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rn]||n[Wt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=gu(t);t!==null;){if(n=t[Wt])return n;t=gu(t)}return e}t=n,n=t.parentNode}return null}function sr(t){return t=t[Wt]||t[rn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function bi(t){return t[Oa]||null}var Yo=[],_s=-1;function zn(t){return{current:t}}function ve(t){0>_s||(t.current=Yo[_s],Yo[_s]=null,_s--)}function ye(t,e){_s++,Yo[_s]=t.current,t.current=e}var In={},Ue=zn(In),at=zn(!1),cs=In;function Ys(t,e){var n=t.type.contextTypes;if(!n)return In;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var a={},r;for(r in n)a[r]=e[r];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function rt(t){return t=t.childContextTypes,t!=null}function Zr(){ve(at),ve(Ue)}function yu(t,e,n){if(Ue.current!==In)throw Error(z(168));ye(Ue,e),ye(at,n)}function jm(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var a in s)if(!(a in e))throw Error(z(108,ah(t)||"Unknown",a));return be({},n,s)}function Xr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||In,cs=Ue.current,ye(Ue,t),ye(at,at.current),!0}function xu(t,e,n){var s=t.stateNode;if(!s)throw Error(z(169));n?(t=jm(t,e,cs),s.__reactInternalMemoizedMergedChildContext=t,ve(at),ve(Ue),ye(Ue,t)):ve(at),ye(at,n)}var Xt=null,Pi=!1,co=!1;function bm(t){Xt===null?Xt=[t]:Xt.push(t)}function w0(t){Pi=!0,bm(t)}function Wn(){if(!co&&Xt!==null){co=!0;var t=0,e=he;try{var n=Xt;for(he=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}Xt=null,Pi=!1}catch(a){throw Xt!==null&&(Xt=Xt.slice(t+1)),Kd(Ol,Wn),a}finally{he=e,co=!1}}return null}var ks=[],Cs=0,ei=null,ti=0,vt=[],St=0,us=null,tn=1,nn="";function Hn(t,e){ks[Cs++]=ti,ks[Cs++]=ei,ei=t,ti=e}function Pm(t,e,n){vt[St++]=tn,vt[St++]=nn,vt[St++]=us,us=t;var s=tn;t=nn;var a=32-Dt(s)-1;s&=~(1<<a),n+=1;var r=32-Dt(e)+a;if(30<r){var o=a-a%5;r=(s&(1<<o)-1).toString(32),s>>=o,a-=o,tn=1<<32-Dt(e)+a|n<<a|s,nn=r+t}else tn=1<<r|n<<a|s,nn=t}function Yl(t){t.return!==null&&(Hn(t,1),Pm(t,1,0))}function Jl(t){for(;t===ei;)ei=ks[--Cs],ks[Cs]=null,ti=ks[--Cs],ks[Cs]=null;for(;t===us;)us=vt[--St],vt[St]=null,nn=vt[--St],vt[St]=null,tn=vt[--St],vt[St]=null}var ut=null,ct=null,we=!1,Et=null;function Rm(t,e){var n=wt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vu(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ut=t,ct=Dn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ut=t,ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=us!==null?{id:tn,overflow:nn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=wt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ut=t,ct=null,!0):!1;default:return!1}}function Jo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zo(t){if(we){var e=ct;if(e){var n=e;if(!vu(t,e)){if(Jo(t))throw Error(z(418));e=Dn(n.nextSibling);var s=ut;e&&vu(t,e)?Rm(s,n):(t.flags=t.flags&-4097|2,we=!1,ut=t)}}else{if(Jo(t))throw Error(z(418));t.flags=t.flags&-4097|2,we=!1,ut=t}}}function Su(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ut=t}function vr(t){if(t!==ut)return!1;if(!we)return Su(t),we=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qo(t.type,t.memoizedProps)),e&&(e=ct)){if(Jo(t))throw _m(),Error(z(418));for(;e;)Rm(t,e),e=Dn(e.nextSibling)}if(Su(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ct=Dn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ct=null}}else ct=ut?Dn(t.stateNode.nextSibling):null;return!0}function _m(){for(var t=ct;t;)t=Dn(t.nextSibling)}function Js(){ct=ut=null,we=!1}function Zl(t){Et===null?Et=[t]:Et.push(t)}var N0=mn.ReactCurrentBatchConfig;function fa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var s=n.stateNode}if(!s)throw Error(z(147,t));var a=s,r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var l=a.refs;o===null?delete l[r]:l[r]=o},e._stringRef=r,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Sr(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wu(t){var e=t._init;return e(t._payload)}function km(t){function e(S,y){if(t){var g=S.deletions;g===null?(S.deletions=[y],S.flags|=16):g.push(y)}}function n(S,y){if(!t)return null;for(;y!==null;)e(S,y),y=y.sibling;return null}function s(S,y){for(S=new Map;y!==null;)y.key!==null?S.set(y.key,y):S.set(y.index,y),y=y.sibling;return S}function a(S,y){return S=$n(S,y),S.index=0,S.sibling=null,S}function r(S,y,g){return S.index=g,t?(g=S.alternate,g!==null?(g=g.index,g<y?(S.flags|=2,y):g):(S.flags|=2,y)):(S.flags|=1048576,y)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,y,g,x){return y===null||y.tag!==6?(y=yo(g,S.mode,x),y.return=S,y):(y=a(y,g),y.return=S,y)}function c(S,y,g,x){var N=g.type;return N===Ns?d(S,y,g.props.children,x,g.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===hn&&wu(N)===y.type)?(x=a(y,g.props),x.ref=fa(S,y,g),x.return=S,x):(x=Or(g.type,g.key,g.props,null,S.mode,x),x.ref=fa(S,y,g),x.return=S,x)}function u(S,y,g,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==g.containerInfo||y.stateNode.implementation!==g.implementation?(y=xo(g,S.mode,x),y.return=S,y):(y=a(y,g.children||[]),y.return=S,y)}function d(S,y,g,x,N){return y===null||y.tag!==7?(y=ls(g,S.mode,x,N),y.return=S,y):(y=a(y,g),y.return=S,y)}function m(S,y,g){if(typeof y=="string"&&y!==""||typeof y=="number")return y=yo(""+y,S.mode,g),y.return=S,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case cr:return g=Or(y.type,y.key,y.props,null,S.mode,g),g.ref=fa(S,null,y),g.return=S,g;case ws:return y=xo(y,S.mode,g),y.return=S,y;case hn:var x=y._init;return m(S,x(y._payload),g)}if(xa(y)||la(y))return y=ls(y,S.mode,g,null),y.return=S,y;Sr(S,y)}return null}function f(S,y,g,x){var N=y!==null?y.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return N!==null?null:l(S,y,""+g,x);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case cr:return g.key===N?c(S,y,g,x):null;case ws:return g.key===N?u(S,y,g,x):null;case hn:return N=g._init,f(S,y,N(g._payload),x)}if(xa(g)||la(g))return N!==null?null:d(S,y,g,x,null);Sr(S,g)}return null}function h(S,y,g,x,N){if(typeof x=="string"&&x!==""||typeof x=="number")return S=S.get(g)||null,l(y,S,""+x,N);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case cr:return S=S.get(x.key===null?g:x.key)||null,c(y,S,x,N);case ws:return S=S.get(x.key===null?g:x.key)||null,u(y,S,x,N);case hn:var k=x._init;return h(S,y,g,k(x._payload),N)}if(xa(x)||la(x))return S=S.get(g)||null,d(y,S,x,N,null);Sr(y,x)}return null}function p(S,y,g,x){for(var N=null,k=null,T=y,j=y=0,_=null;T!==null&&j<g.length;j++){T.index>j?(_=T,T=null):_=T.sibling;var C=f(S,T,g[j],x);if(C===null){T===null&&(T=_);break}t&&T&&C.alternate===null&&e(S,T),y=r(C,y,j),k===null?N=C:k.sibling=C,k=C,T=_}if(j===g.length)return n(S,T),we&&Hn(S,j),N;if(T===null){for(;j<g.length;j++)T=m(S,g[j],x),T!==null&&(y=r(T,y,j),k===null?N=T:k.sibling=T,k=T);return we&&Hn(S,j),N}for(T=s(S,T);j<g.length;j++)_=h(T,S,j,g[j],x),_!==null&&(t&&_.alternate!==null&&T.delete(_.key===null?j:_.key),y=r(_,y,j),k===null?N=_:k.sibling=_,k=_);return t&&T.forEach(function(E){return e(S,E)}),we&&Hn(S,j),N}function v(S,y,g,x){var N=la(g);if(typeof N!="function")throw Error(z(150));if(g=N.call(g),g==null)throw Error(z(151));for(var k=N=null,T=y,j=y=0,_=null,C=g.next();T!==null&&!C.done;j++,C=g.next()){T.index>j?(_=T,T=null):_=T.sibling;var E=f(S,T,C.value,x);if(E===null){T===null&&(T=_);break}t&&T&&E.alternate===null&&e(S,T),y=r(E,y,j),k===null?N=E:k.sibling=E,k=E,T=_}if(C.done)return n(S,T),we&&Hn(S,j),N;if(T===null){for(;!C.done;j++,C=g.next())C=m(S,C.value,x),C!==null&&(y=r(C,y,j),k===null?N=C:k.sibling=C,k=C);return we&&Hn(S,j),N}for(T=s(S,T);!C.done;j++,C=g.next())C=h(T,S,j,C.value,x),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?j:C.key),y=r(C,y,j),k===null?N=C:k.sibling=C,k=C);return t&&T.forEach(function(M){return e(S,M)}),we&&Hn(S,j),N}function w(S,y,g,x){if(typeof g=="object"&&g!==null&&g.type===Ns&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case cr:e:{for(var N=g.key,k=y;k!==null;){if(k.key===N){if(N=g.type,N===Ns){if(k.tag===7){n(S,k.sibling),y=a(k,g.props.children),y.return=S,S=y;break e}}else if(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===hn&&wu(N)===k.type){n(S,k.sibling),y=a(k,g.props),y.ref=fa(S,k,g),y.return=S,S=y;break e}n(S,k);break}else e(S,k);k=k.sibling}g.type===Ns?(y=ls(g.props.children,S.mode,x,g.key),y.return=S,S=y):(x=Or(g.type,g.key,g.props,null,S.mode,x),x.ref=fa(S,y,g),x.return=S,S=x)}return o(S);case ws:e:{for(k=g.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===g.containerInfo&&y.stateNode.implementation===g.implementation){n(S,y.sibling),y=a(y,g.children||[]),y.return=S,S=y;break e}else{n(S,y);break}else e(S,y);y=y.sibling}y=xo(g,S.mode,x),y.return=S,S=y}return o(S);case hn:return k=g._init,w(S,y,k(g._payload),x)}if(xa(g))return p(S,y,g,x);if(la(g))return v(S,y,g,x);Sr(S,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,y!==null&&y.tag===6?(n(S,y.sibling),y=a(y,g),y.return=S,S=y):(n(S,y),y=yo(g,S.mode,x),y.return=S,S=y),o(S)):n(S,y)}return w}var Zs=km(!0),Cm=km(!1),ni=zn(null),si=null,Ts=null,Xl=null;function ec(){Xl=Ts=si=null}function tc(t){var e=ni.current;ve(ni),t._currentValue=e}function Xo(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Fs(t,e){si=t,Xl=Ts=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(st=!0),t.firstContext=null)}function jt(t){var e=t._currentValue;if(Xl!==t)if(t={context:t,memoizedValue:e,next:null},Ts===null){if(si===null)throw Error(z(308));Ts=t,si.dependencies={lanes:0,firstContext:t}}else Ts=Ts.next=t;return e}var es=null;function nc(t){es===null?es=[t]:es.push(t)}function Tm(t,e,n,s){var a=e.interleaved;return a===null?(n.next=n,nc(e)):(n.next=a.next,a.next=n),e.interleaved=n,on(t,s)}function on(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var gn=!1;function sc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Em(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function An(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,fe&2){var a=s.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),s.pending=e,on(t,n)}return a=s.interleaved,a===null?(e.next=e,nc(s)):(e.next=a.next,a.next=e),s.interleaved=e,on(t,n)}function Br(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,zl(t,n)}}function Nu(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?a=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?a=r=e:r=r.next=e}else a=r=e;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:r,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ai(t,e,n,s){var a=t.updateQueue;gn=!1;var r=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?r=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(r!==null){var m=a.baseState;o=0,d=u=c=null,l=r;do{var f=l.lane,h=l.eventTime;if((s&f)===f){d!==null&&(d=d.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,v=l;switch(f=e,h=n,v.tag){case 1:if(p=v.payload,typeof p=="function"){m=p.call(h,m,f);break e}m=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,f=typeof p=="function"?p.call(h,m,f):p,f==null)break e;m=be({},m,f);break e;case 2:gn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=a.effects,f===null?a.effects=[l]:f.push(l))}else h={eventTime:h,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=h,c=m):d=d.next=h,o|=f;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;f=l,l=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(d===null&&(c=m),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else r===null&&(a.shared.lanes=0);ms|=o,t.lanes=o,t.memoizedState=m}}function ju(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],a=s.callback;if(a!==null){if(s.callback=null,s=n,typeof a!="function")throw Error(z(191,a));a.call(s)}}}var ar={},Ut=zn(ar),za=zn(ar),Wa=zn(ar);function ts(t){if(t===ar)throw Error(z(174));return t}function ac(t,e){switch(ye(Wa,e),ye(za,t),ye(Ut,ar),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ao(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ao(e,t)}ve(Ut),ye(Ut,e)}function Xs(){ve(Ut),ve(za),ve(Wa)}function Dm(t){ts(Wa.current);var e=ts(Ut.current),n=Ao(e,t.type);e!==n&&(ye(za,t),ye(Ut,n))}function rc(t){za.current===t&&(ve(Ut),ve(za))}var Ne=zn(0);function ri(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var uo=[];function ic(){for(var t=0;t<uo.length;t++)uo[t]._workInProgressVersionPrimary=null;uo.length=0}var $r=mn.ReactCurrentDispatcher,mo=mn.ReactCurrentBatchConfig,ds=0,je=null,Ee=null,$e=null,ii=!1,Ra=!1,qa=0,j0=0;function We(){throw Error(z(321))}function oc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Mt(t[n],e[n]))return!1;return!0}function lc(t,e,n,s,a,r){if(ds=r,je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$r.current=t===null||t.memoizedState===null?_0:k0,t=n(s,a),Ra){r=0;do{if(Ra=!1,qa=0,25<=r)throw Error(z(301));r+=1,$e=Ee=null,e.updateQueue=null,$r.current=C0,t=n(s,a)}while(Ra)}if($r.current=oi,e=Ee!==null&&Ee.next!==null,ds=0,$e=Ee=je=null,ii=!1,e)throw Error(z(300));return t}function cc(){var t=qa!==0;return qa=0,t}function Vt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?je.memoizedState=$e=t:$e=$e.next=t,$e}function bt(){if(Ee===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=Ee.next;var e=$e===null?je.memoizedState:$e.next;if(e!==null)$e=e,Ee=t;else{if(t===null)throw Error(z(310));Ee=t,t={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},$e===null?je.memoizedState=$e=t:$e=$e.next=t}return $e}function Ha(t,e){return typeof e=="function"?e(t):e}function fo(t){var e=bt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var s=Ee,a=s.baseQueue,r=n.pending;if(r!==null){if(a!==null){var o=a.next;a.next=r.next,r.next=o}s.baseQueue=a=r,n.pending=null}if(a!==null){r=a.next,s=s.baseState;var l=o=null,c=null,u=r;do{var d=u.lane;if((ds&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:t(s,u.action);else{var m={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=m,o=s):c=c.next=m,je.lanes|=d,ms|=d}u=u.next}while(u!==null&&u!==r);c===null?o=s:c.next=l,Mt(s,e.memoizedState)||(st=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,n.lastRenderedState=s}if(t=n.interleaved,t!==null){a=t;do r=a.lane,je.lanes|=r,ms|=r,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function po(t){var e=bt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var s=n.dispatch,a=n.pending,r=e.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do r=t(r,o.action),o=o.next;while(o!==a);Mt(r,e.memoizedState)||(st=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,s]}function Am(){}function Mm(t,e){var n=je,s=bt(),a=e(),r=!Mt(s.memoizedState,a);if(r&&(s.memoizedState=a,st=!0),s=s.queue,uc(Fm.bind(null,n,s,t),[t]),s.getSnapshot!==e||r||$e!==null&&$e.memoizedState.tag&1){if(n.flags|=2048,Ua(9,$m.bind(null,n,s,a,e),void 0,null),Fe===null)throw Error(z(349));ds&30||Bm(n,e,a)}return a}function Bm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $m(t,e,n,s){e.value=n,e.getSnapshot=s,Im(e)&&Vm(t)}function Fm(t,e,n){return n(function(){Im(e)&&Vm(t)})}function Im(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Mt(t,n)}catch{return!0}}function Vm(t){var e=on(t,1);e!==null&&At(e,t,1,-1)}function bu(t){var e=Vt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:t},e.queue=t,t=t.dispatch=R0.bind(null,je,t),[e.memoizedState,t]}function Ua(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function Lm(){return bt().memoizedState}function Fr(t,e,n,s){var a=Vt();je.flags|=t,a.memoizedState=Ua(1|e,n,void 0,s===void 0?null:s)}function Ri(t,e,n,s){var a=bt();s=s===void 0?null:s;var r=void 0;if(Ee!==null){var o=Ee.memoizedState;if(r=o.destroy,s!==null&&oc(s,o.deps)){a.memoizedState=Ua(e,n,r,s);return}}je.flags|=t,a.memoizedState=Ua(1|e,n,r,s)}function Pu(t,e){return Fr(8390656,8,t,e)}function uc(t,e){return Ri(2048,8,t,e)}function Om(t,e){return Ri(4,2,t,e)}function zm(t,e){return Ri(4,4,t,e)}function Wm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qm(t,e,n){return n=n!=null?n.concat([t]):null,Ri(4,4,Wm.bind(null,e,t),n)}function dc(){}function Hm(t,e){var n=bt();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&oc(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function Um(t,e){var n=bt();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&oc(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function Qm(t,e,n){return ds&21?(Mt(n,e)||(n=Zd(),je.lanes|=n,ms|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,st=!0),t.memoizedState=n)}function b0(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var s=mo.transition;mo.transition={};try{t(!1),e()}finally{he=n,mo.transition=s}}function Gm(){return bt().memoizedState}function P0(t,e,n){var s=Bn(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Km(t))Ym(e,n);else if(n=Tm(t,e,n,s),n!==null){var a=Ze();At(n,t,s,a),Jm(n,e,s)}}function R0(t,e,n){var s=Bn(t),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Km(t))Ym(e,a);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,l=r(o,n);if(a.hasEagerState=!0,a.eagerState=l,Mt(l,o)){var c=e.interleaved;c===null?(a.next=a,nc(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}n=Tm(t,e,a,s),n!==null&&(a=Ze(),At(n,t,s,a),Jm(n,e,s))}}function Km(t){var e=t.alternate;return t===je||e!==null&&e===je}function Ym(t,e){Ra=ii=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Jm(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,zl(t,n)}}var oi={readContext:jt,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useInsertionEffect:We,useLayoutEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useMutableSource:We,useSyncExternalStore:We,useId:We,unstable_isNewReconciler:!1},_0={readContext:jt,useCallback:function(t,e){return Vt().memoizedState=[t,e===void 0?null:e],t},useContext:jt,useEffect:Pu,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fr(4194308,4,Wm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fr(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fr(4,2,t,e)},useMemo:function(t,e){var n=Vt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=Vt();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=P0.bind(null,je,t),[s.memoizedState,t]},useRef:function(t){var e=Vt();return t={current:t},e.memoizedState=t},useState:bu,useDebugValue:dc,useDeferredValue:function(t){return Vt().memoizedState=t},useTransition:function(){var t=bu(!1),e=t[0];return t=b0.bind(null,t[1]),Vt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=je,a=Vt();if(we){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Fe===null)throw Error(z(349));ds&30||Bm(s,e,n)}a.memoizedState=n;var r={value:n,getSnapshot:e};return a.queue=r,Pu(Fm.bind(null,s,r,t),[t]),s.flags|=2048,Ua(9,$m.bind(null,s,r,n,e),void 0,null),n},useId:function(){var t=Vt(),e=Fe.identifierPrefix;if(we){var n=nn,s=tn;n=(s&~(1<<32-Dt(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=qa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=j0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},k0={readContext:jt,useCallback:Hm,useContext:jt,useEffect:uc,useImperativeHandle:qm,useInsertionEffect:Om,useLayoutEffect:zm,useMemo:Um,useReducer:fo,useRef:Lm,useState:function(){return fo(Ha)},useDebugValue:dc,useDeferredValue:function(t){var e=bt();return Qm(e,Ee.memoizedState,t)},useTransition:function(){var t=fo(Ha)[0],e=bt().memoizedState;return[t,e]},useMutableSource:Am,useSyncExternalStore:Mm,useId:Gm,unstable_isNewReconciler:!1},C0={readContext:jt,useCallback:Hm,useContext:jt,useEffect:uc,useImperativeHandle:qm,useInsertionEffect:Om,useLayoutEffect:zm,useMemo:Um,useReducer:po,useRef:Lm,useState:function(){return po(Ha)},useDebugValue:dc,useDeferredValue:function(t){var e=bt();return Ee===null?e.memoizedState=t:Qm(e,Ee.memoizedState,t)},useTransition:function(){var t=po(Ha)[0],e=bt().memoizedState;return[t,e]},useMutableSource:Am,useSyncExternalStore:Mm,useId:Gm,unstable_isNewReconciler:!1};function Rt(t,e){if(t&&t.defaultProps){e=be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function el(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _i={isMounted:function(t){return(t=t._reactInternals)?gs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Ze(),a=Bn(t),r=sn(s,a);r.payload=e,n!=null&&(r.callback=n),e=An(t,r,a),e!==null&&(At(e,t,a,s),Br(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Ze(),a=Bn(t),r=sn(s,a);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=An(t,r,a),e!==null&&(At(e,t,a,s),Br(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ze(),s=Bn(t),a=sn(n,s);a.tag=2,e!=null&&(a.callback=e),e=An(t,a,s),e!==null&&(At(e,t,s,n),Br(e,t,s))}};function Ru(t,e,n,s,a,r,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,r,o):e.prototype&&e.prototype.isPureReactComponent?!Ia(n,s)||!Ia(a,r):!0}function Zm(t,e,n){var s=!1,a=In,r=e.contextType;return typeof r=="object"&&r!==null?r=jt(r):(a=rt(e)?cs:Ue.current,s=e.contextTypes,r=(s=s!=null)?Ys(t,a):In),e=new e(n,r),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_i,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=r),e}function _u(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&_i.enqueueReplaceState(e,e.state,null)}function tl(t,e,n,s){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs={},sc(t);var r=e.contextType;typeof r=="object"&&r!==null?a.context=jt(r):(r=rt(e)?cs:Ue.current,a.context=Ys(t,r)),a.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(el(t,e,r,n),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&_i.enqueueReplaceState(a,a.state,null),ai(t,n,a,s),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function ea(t,e){try{var n="",s=e;do n+=sh(s),s=s.return;while(s);var a=n}catch(r){a=`
Error generating stack: `+r.message+`
`+r.stack}return{value:t,source:e,stack:a,digest:null}}function ho(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function nl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var T0=typeof WeakMap=="function"?WeakMap:Map;function Xm(t,e,n){n=sn(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){ci||(ci=!0,ml=s),nl(t,e)},n}function ef(t,e,n){n=sn(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var a=e.value;n.payload=function(){return s(a)},n.callback=function(){nl(t,e)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){nl(t,e),typeof s!="function"&&(Mn===null?Mn=new Set([this]):Mn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ku(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new T0;var a=new Set;s.set(e,a)}else a=s.get(e),a===void 0&&(a=new Set,s.set(e,a));a.has(n)||(a.add(n),t=q0.bind(null,t,e,n),e.then(t,t))}function Cu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Tu(t,e,n,s,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=sn(-1,1),e.tag=2,An(n,e,1))),n.lanes|=1),t)}var E0=mn.ReactCurrentOwner,st=!1;function Ye(t,e,n,s){e.child=t===null?Cm(e,null,n,s):Zs(e,t.child,n,s)}function Eu(t,e,n,s,a){n=n.render;var r=e.ref;return Fs(e,a),s=lc(t,e,n,s,r,a),n=cc(),t!==null&&!st?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,ln(t,e,a)):(we&&n&&Yl(e),e.flags|=1,Ye(t,e,s,a),e.child)}function Du(t,e,n,s,a){if(t===null){var r=n.type;return typeof r=="function"&&!vc(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=r,tf(t,e,r,s,a)):(t=Or(n.type,null,s,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!(t.lanes&a)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:Ia,n(o,s)&&t.ref===e.ref)return ln(t,e,a)}return e.flags|=1,t=$n(r,s),t.ref=e.ref,t.return=e,e.child=t}function tf(t,e,n,s,a){if(t!==null){var r=t.memoizedProps;if(Ia(r,s)&&t.ref===e.ref)if(st=!1,e.pendingProps=s=r,(t.lanes&a)!==0)t.flags&131072&&(st=!0);else return e.lanes=t.lanes,ln(t,e,a)}return sl(t,e,n,s,a)}function nf(t,e,n){var s=e.pendingProps,a=s.children,r=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(Ds,lt),lt|=n;else{if(!(n&1073741824))return t=r!==null?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(Ds,lt),lt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=r!==null?r.baseLanes:n,ye(Ds,lt),lt|=s}else r!==null?(s=r.baseLanes|n,e.memoizedState=null):s=n,ye(Ds,lt),lt|=s;return Ye(t,e,a,n),e.child}function sf(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function sl(t,e,n,s,a){var r=rt(n)?cs:Ue.current;return r=Ys(e,r),Fs(e,a),n=lc(t,e,n,s,r,a),s=cc(),t!==null&&!st?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,ln(t,e,a)):(we&&s&&Yl(e),e.flags|=1,Ye(t,e,n,a),e.child)}function Au(t,e,n,s,a){if(rt(n)){var r=!0;Xr(e)}else r=!1;if(Fs(e,a),e.stateNode===null)Ir(t,e),Zm(e,n,s),tl(e,n,s,a),s=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=jt(u):(u=rt(n)?cs:Ue.current,u=Ys(e,u));var d=n.getDerivedStateFromProps,m=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==u)&&_u(e,o,s,u),gn=!1;var f=e.memoizedState;o.state=f,ai(e,s,o,a),c=e.memoizedState,l!==s||f!==c||at.current||gn?(typeof d=="function"&&(el(e,n,d,s),c=e.memoizedState),(l=gn||Ru(e,n,l,s,f,c,u))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=u,s=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,Em(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Rt(e.type,l),o.props=u,m=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=jt(c):(c=rt(n)?cs:Ue.current,c=Ys(e,c));var h=n.getDerivedStateFromProps;(d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||f!==c)&&_u(e,o,s,c),gn=!1,f=e.memoizedState,o.state=f,ai(e,s,o,a);var p=e.memoizedState;l!==m||f!==p||at.current||gn?(typeof h=="function"&&(el(e,n,h,s),p=e.memoizedState),(u=gn||Ru(e,n,u,s,f,p,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=p),o.props=s,o.state=p,o.context=c,s=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),s=!1)}return al(t,e,n,s,r,a)}function al(t,e,n,s,a,r){sf(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return a&&xu(e,n,!1),ln(t,e,r);s=e.stateNode,E0.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Zs(e,t.child,null,r),e.child=Zs(e,null,l,r)):Ye(t,e,l,r),e.memoizedState=s.state,a&&xu(e,n,!0),e.child}function af(t){var e=t.stateNode;e.pendingContext?yu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yu(t,e.context,!1),ac(t,e.containerInfo)}function Mu(t,e,n,s,a){return Js(),Zl(a),e.flags|=256,Ye(t,e,n,s),e.child}var rl={dehydrated:null,treeContext:null,retryLane:0};function il(t){return{baseLanes:t,cachePool:null,transitions:null}}function rf(t,e,n){var s=e.pendingProps,a=Ne.current,r=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(r=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),ye(Ne,a&1),t===null)return Zo(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,r?(s=e.mode,r=e.child,o={mode:"hidden",children:o},!(s&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Ti(o,s,0,null),t=ls(t,s,n,null),r.return=e,t.return=e,r.sibling=t,e.child=r,e.child.memoizedState=il(n),e.memoizedState=rl,t):mc(e,o));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return D0(t,e,o,s,l,a,n);if(r){r=s.fallback,o=e.mode,a=t.child,l=a.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==a?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=$n(a,c),s.subtreeFlags=a.subtreeFlags&14680064),l!==null?r=$n(l,r):(r=ls(r,o,n,null),r.flags|=2),r.return=e,s.return=e,s.sibling=r,e.child=s,s=r,r=e.child,o=t.child.memoizedState,o=o===null?il(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=t.childLanes&~n,e.memoizedState=rl,s}return r=t.child,t=r.sibling,s=$n(r,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function mc(t,e){return e=Ti({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wr(t,e,n,s){return s!==null&&Zl(s),Zs(e,t.child,null,n),t=mc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function D0(t,e,n,s,a,r,o){if(n)return e.flags&256?(e.flags&=-257,s=ho(Error(z(422))),wr(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(r=s.fallback,a=e.mode,s=Ti({mode:"visible",children:s.children},a,0,null),r=ls(r,a,o,null),r.flags|=2,s.return=e,r.return=e,s.sibling=r,e.child=s,e.mode&1&&Zs(e,t.child,null,o),e.child.memoizedState=il(o),e.memoizedState=rl,r);if(!(e.mode&1))return wr(t,e,o,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var l=s.dgst;return s=l,r=Error(z(419)),s=ho(r,s,void 0),wr(t,e,o,s)}if(l=(o&t.childLanes)!==0,st||l){if(s=Fe,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==r.retryLane&&(r.retryLane=a,on(t,a),At(s,t,a,-1))}return xc(),s=ho(Error(z(421))),wr(t,e,o,s)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=H0.bind(null,t),a._reactRetry=e,null):(t=r.treeContext,ct=Dn(a.nextSibling),ut=e,we=!0,Et=null,t!==null&&(vt[St++]=tn,vt[St++]=nn,vt[St++]=us,tn=t.id,nn=t.overflow,us=e),e=mc(e,s.children),e.flags|=4096,e)}function Bu(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Xo(t.return,e,n)}function go(t,e,n,s,a){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=n,r.tailMode=a)}function of(t,e,n){var s=e.pendingProps,a=s.revealOrder,r=s.tail;if(Ye(t,e,s.children,n),s=Ne.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bu(t,n,e);else if(t.tag===19)Bu(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(ye(Ne,s),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&ri(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),go(e,!1,a,n,r);break;case"backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&ri(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}go(e,!0,n,null,r);break;case"together":go(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ir(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ln(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ms|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=$n(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$n(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function A0(t,e,n){switch(e.tag){case 3:af(e),Js();break;case 5:Dm(e);break;case 1:rt(e.type)&&Xr(e);break;case 4:ac(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,a=e.memoizedProps.value;ye(ni,s._currentValue),s._currentValue=a;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(ye(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?rf(t,e,n):(ye(Ne,Ne.current&1),t=ln(t,e,n),t!==null?t.sibling:null);ye(Ne,Ne.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return of(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ye(Ne,Ne.current),s)break;return null;case 22:case 23:return e.lanes=0,nf(t,e,n)}return ln(t,e,n)}var lf,ol,cf,uf;lf=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ol=function(){};cf=function(t,e,n,s){var a=t.memoizedProps;if(a!==s){t=e.stateNode,ts(Ut.current);var r=null;switch(n){case"input":a=Co(t,a),s=Co(t,s),r=[];break;case"select":a=be({},a,{value:void 0}),s=be({},s,{value:void 0}),r=[];break;case"textarea":a=Do(t,a),s=Do(t,s),r=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Jr)}Mo(n,s);var o;n=null;for(u in a)if(!s.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ea.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in s){var c=s[u];if(l=a!=null?a[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(r||(r=[]),r.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ea.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&xe("scroll",t),r||l===c||(r=[])):(r=r||[]).push(u,c))}n&&(r=r||[]).push("style",n);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};uf=function(t,e,n,s){n!==s&&(e.flags|=4)};function pa(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function qe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function M0(t,e,n){var s=e.pendingProps;switch(Jl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(e),null;case 1:return rt(e.type)&&Zr(),qe(e),null;case 3:return s=e.stateNode,Xs(),ve(at),ve(Ue),ic(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(vr(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Et!==null&&(hl(Et),Et=null))),ol(t,e),qe(e),null;case 5:rc(e);var a=ts(Wa.current);if(n=e.type,t!==null&&e.stateNode!=null)cf(t,e,n,s,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(z(166));return qe(e),null}if(t=ts(Ut.current),vr(e)){s=e.stateNode,n=e.type;var r=e.memoizedProps;switch(s[Wt]=e,s[Oa]=r,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",s),xe("close",s);break;case"iframe":case"object":case"embed":xe("load",s);break;case"video":case"audio":for(a=0;a<Sa.length;a++)xe(Sa[a],s);break;case"source":xe("error",s);break;case"img":case"image":case"link":xe("error",s),xe("load",s);break;case"details":xe("toggle",s);break;case"input":qc(s,r),xe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},xe("invalid",s);break;case"textarea":Uc(s,r),xe("invalid",s)}Mo(n,r),a=null;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];o==="children"?typeof l=="string"?s.textContent!==l&&(r.suppressHydrationWarning!==!0&&xr(s.textContent,l,t),a=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(r.suppressHydrationWarning!==!0&&xr(s.textContent,l,t),a=["children",""+l]):Ea.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&xe("scroll",s)}switch(n){case"input":ur(s),Hc(s,r,!0);break;case"textarea":ur(s),Qc(s);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(s.onclick=Jr)}s=a,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Fd(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[Wt]=e,t[Oa]=s,lf(t,e,!1,!1),e.stateNode=t;e:{switch(o=Bo(n,s),n){case"dialog":xe("cancel",t),xe("close",t),a=s;break;case"iframe":case"object":case"embed":xe("load",t),a=s;break;case"video":case"audio":for(a=0;a<Sa.length;a++)xe(Sa[a],t);a=s;break;case"source":xe("error",t),a=s;break;case"img":case"image":case"link":xe("error",t),xe("load",t),a=s;break;case"details":xe("toggle",t),a=s;break;case"input":qc(t,s),a=Co(t,s),xe("invalid",t);break;case"option":a=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},a=be({},s,{value:void 0}),xe("invalid",t);break;case"textarea":Uc(t,s),a=Do(t,s),xe("invalid",t);break;default:a=s}Mo(n,a),l=a;for(r in l)if(l.hasOwnProperty(r)){var c=l[r];r==="style"?Ld(t,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Id(t,c)):r==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Da(t,c):typeof c=="number"&&Da(t,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Ea.hasOwnProperty(r)?c!=null&&r==="onScroll"&&xe("scroll",t):c!=null&&$l(t,r,c,o))}switch(n){case"input":ur(t),Hc(t,s,!1);break;case"textarea":ur(t),Qc(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Fn(s.value));break;case"select":t.multiple=!!s.multiple,r=s.value,r!=null?As(t,!!s.multiple,r,!1):s.defaultValue!=null&&As(t,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qe(e),null;case 6:if(t&&e.stateNode!=null)uf(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(z(166));if(n=ts(Wa.current),ts(Ut.current),vr(e)){if(s=e.stateNode,n=e.memoizedProps,s[Wt]=e,(r=s.nodeValue!==n)&&(t=ut,t!==null))switch(t.tag){case 3:xr(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xr(s.nodeValue,n,(t.mode&1)!==0)}r&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Wt]=e,e.stateNode=s}return qe(e),null;case 13:if(ve(Ne),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(we&&ct!==null&&e.mode&1&&!(e.flags&128))_m(),Js(),e.flags|=98560,r=!1;else if(r=vr(e),s!==null&&s.dehydrated!==null){if(t===null){if(!r)throw Error(z(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(z(317));r[Wt]=e}else Js(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qe(e),r=!1}else Et!==null&&(hl(Et),Et=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?De===0&&(De=3):xc())),e.updateQueue!==null&&(e.flags|=4),qe(e),null);case 4:return Xs(),ol(t,e),t===null&&Va(e.stateNode.containerInfo),qe(e),null;case 10:return tc(e.type._context),qe(e),null;case 17:return rt(e.type)&&Zr(),qe(e),null;case 19:if(ve(Ne),r=e.memoizedState,r===null)return qe(e),null;if(s=(e.flags&128)!==0,o=r.rendering,o===null)if(s)pa(r,!1);else{if(De!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ri(t),o!==null){for(e.flags|=128,pa(r,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)r=n,t=s,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,t=o.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(Ne,Ne.current&1|2),e.child}t=t.sibling}r.tail!==null&&_e()>ta&&(e.flags|=128,s=!0,pa(r,!1),e.lanes=4194304)}else{if(!s)if(t=ri(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pa(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!we)return qe(e),null}else 2*_e()-r.renderingStartTime>ta&&n!==1073741824&&(e.flags|=128,s=!0,pa(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(n=r.last,n!==null?n.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=_e(),e.sibling=null,n=Ne.current,ye(Ne,s?n&1|2:n&1),e):(qe(e),null);case 22:case 23:return yc(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?lt&1073741824&&(qe(e),e.subtreeFlags&6&&(e.flags|=8192)):qe(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function B0(t,e){switch(Jl(e),e.tag){case 1:return rt(e.type)&&Zr(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xs(),ve(at),ve(Ue),ic(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rc(e),null;case 13:if(ve(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Js()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ve(Ne),null;case 4:return Xs(),null;case 10:return tc(e.type._context),null;case 22:case 23:return yc(),null;case 24:return null;default:return null}}var Nr=!1,He=!1,$0=typeof WeakSet=="function"?WeakSet:Set,G=null;function Es(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Re(t,e,s)}else n.current=null}function ll(t,e,n){try{n()}catch(s){Re(t,e,s)}}var $u=!1;function F0(t,e){if(Ho=Gr,t=pm(),Kl(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,m=t,f=null;t:for(;;){for(var h;m!==n||a!==0&&m.nodeType!==3||(l=o+a),m!==r||s!==0&&m.nodeType!==3||(c=o+s),m.nodeType===3&&(o+=m.nodeValue.length),(h=m.firstChild)!==null;)f=m,m=h;for(;;){if(m===t)break t;if(f===n&&++u===a&&(l=o),f===r&&++d===s&&(c=o),(h=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=h}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Uo={focusedElem:t,selectionRange:n},Gr=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,w=p.memoizedState,S=e.stateNode,y=S.getSnapshotBeforeUpdate(e.elementType===e.type?v:Rt(e.type,v),w);S.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(x){Re(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return p=$u,$u=!1,p}function _a(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&t)===t){var r=a.destroy;a.destroy=void 0,r!==void 0&&ll(e,n,r)}a=a.next}while(a!==s)}}function ki(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function cl(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function df(t){var e=t.alternate;e!==null&&(t.alternate=null,df(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wt],delete e[Oa],delete e[Ko],delete e[v0],delete e[S0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mf(t){return t.tag===5||t.tag===3||t.tag===4}function Fu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ul(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Jr));else if(s!==4&&(t=t.child,t!==null))for(ul(t,e,n),t=t.sibling;t!==null;)ul(t,e,n),t=t.sibling}function dl(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(dl(t,e,n),t=t.sibling;t!==null;)dl(t,e,n),t=t.sibling}var Ie=null,Tt=!1;function fn(t,e,n){for(n=n.child;n!==null;)ff(t,e,n),n=n.sibling}function ff(t,e,n){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(Si,n)}catch{}switch(n.tag){case 5:He||Es(n,e);case 6:var s=Ie,a=Tt;Ie=null,fn(t,e,n),Ie=s,Tt=a,Ie!==null&&(Tt?(t=Ie,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ie.removeChild(n.stateNode));break;case 18:Ie!==null&&(Tt?(t=Ie,n=n.stateNode,t.nodeType===8?lo(t.parentNode,n):t.nodeType===1&&lo(t,n),$a(t)):lo(Ie,n.stateNode));break;case 4:s=Ie,a=Tt,Ie=n.stateNode.containerInfo,Tt=!0,fn(t,e,n),Ie=s,Tt=a;break;case 0:case 11:case 14:case 15:if(!He&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var r=a,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&ll(n,e,o),a=a.next}while(a!==s)}fn(t,e,n);break;case 1:if(!He&&(Es(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){Re(n,e,l)}fn(t,e,n);break;case 21:fn(t,e,n);break;case 22:n.mode&1?(He=(s=He)||n.memoizedState!==null,fn(t,e,n),He=s):fn(t,e,n);break;default:fn(t,e,n)}}function Iu(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $0),e.forEach(function(s){var a=U0.bind(null,t,s);n.has(s)||(n.add(s),s.then(a,a))})}}function Pt(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];try{var r=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ie=l.stateNode,Tt=!1;break e;case 3:Ie=l.stateNode.containerInfo,Tt=!0;break e;case 4:Ie=l.stateNode.containerInfo,Tt=!0;break e}l=l.return}if(Ie===null)throw Error(z(160));ff(r,o,a),Ie=null,Tt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Re(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)pf(e,t),e=e.sibling}function pf(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pt(e,t),It(t),s&4){try{_a(3,t,t.return),ki(3,t)}catch(v){Re(t,t.return,v)}try{_a(5,t,t.return)}catch(v){Re(t,t.return,v)}}break;case 1:Pt(e,t),It(t),s&512&&n!==null&&Es(n,n.return);break;case 5:if(Pt(e,t),It(t),s&512&&n!==null&&Es(n,n.return),t.flags&32){var a=t.stateNode;try{Da(a,"")}catch(v){Re(t,t.return,v)}}if(s&4&&(a=t.stateNode,a!=null)){var r=t.memoizedProps,o=n!==null?n.memoizedProps:r,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&r.type==="radio"&&r.name!=null&&Bd(a,r),Bo(l,o);var u=Bo(l,r);for(o=0;o<c.length;o+=2){var d=c[o],m=c[o+1];d==="style"?Ld(a,m):d==="dangerouslySetInnerHTML"?Id(a,m):d==="children"?Da(a,m):$l(a,d,m,u)}switch(l){case"input":To(a,r);break;case"textarea":$d(a,r);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!r.multiple;var h=r.value;h!=null?As(a,!!r.multiple,h,!1):f!==!!r.multiple&&(r.defaultValue!=null?As(a,!!r.multiple,r.defaultValue,!0):As(a,!!r.multiple,r.multiple?[]:"",!1))}a[Oa]=r}catch(v){Re(t,t.return,v)}}break;case 6:if(Pt(e,t),It(t),s&4){if(t.stateNode===null)throw Error(z(162));a=t.stateNode,r=t.memoizedProps;try{a.nodeValue=r}catch(v){Re(t,t.return,v)}}break;case 3:if(Pt(e,t),It(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{$a(e.containerInfo)}catch(v){Re(t,t.return,v)}break;case 4:Pt(e,t),It(t);break;case 13:Pt(e,t),It(t),a=t.child,a.flags&8192&&(r=a.memoizedState!==null,a.stateNode.isHidden=r,!r||a.alternate!==null&&a.alternate.memoizedState!==null||(hc=_e())),s&4&&Iu(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(He=(u=He)||d,Pt(e,t),He=u):Pt(e,t),It(t),s&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(G=t,d=t.child;d!==null;){for(m=G=d;G!==null;){switch(f=G,h=f.child,f.tag){case 0:case 11:case 14:case 15:_a(4,f,f.return);break;case 1:Es(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){s=f,n=f.return;try{e=s,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){Re(s,n,v)}}break;case 5:Es(f,f.return);break;case 22:if(f.memoizedState!==null){Lu(m);continue}}h!==null?(h.return=f,G=h):Lu(m)}d=d.sibling}e:for(d=null,m=t;;){if(m.tag===5){if(d===null){d=m;try{a=m.stateNode,u?(r=a.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Vd("display",o))}catch(v){Re(t,t.return,v)}}}else if(m.tag===6){if(d===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(v){Re(t,t.return,v)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Pt(e,t),It(t),s&4&&Iu(t);break;case 21:break;default:Pt(e,t),It(t)}}function It(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(mf(n)){var s=n;break e}n=n.return}throw Error(z(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Da(a,""),s.flags&=-33);var r=Fu(t);dl(t,r,a);break;case 3:case 4:var o=s.stateNode.containerInfo,l=Fu(t);ul(t,l,o);break;default:throw Error(z(161))}}catch(c){Re(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function I0(t,e,n){G=t,hf(t)}function hf(t,e,n){for(var s=(t.mode&1)!==0;G!==null;){var a=G,r=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||Nr;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||He;l=Nr;var u=He;if(Nr=o,(He=c)&&!u)for(G=a;G!==null;)o=G,c=o.child,o.tag===22&&o.memoizedState!==null?Ou(a):c!==null?(c.return=o,G=c):Ou(a);for(;r!==null;)G=r,hf(r),r=r.sibling;G=a,Nr=l,He=u}Vu(t)}else a.subtreeFlags&8772&&r!==null?(r.return=a,G=r):Vu(t)}}function Vu(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:He||ki(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!He)if(n===null)s.componentDidMount();else{var a=e.elementType===e.type?n.memoizedProps:Rt(e.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&ju(e,r,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ju(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var m=d.dehydrated;m!==null&&$a(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}He||e.flags&512&&cl(e)}catch(f){Re(e,e.return,f)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function Lu(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function Ou(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ki(4,e)}catch(c){Re(e,n,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var a=e.return;try{s.componentDidMount()}catch(c){Re(e,a,c)}}var r=e.return;try{cl(e)}catch(c){Re(e,r,c)}break;case 5:var o=e.return;try{cl(e)}catch(c){Re(e,o,c)}}}catch(c){Re(e,e.return,c)}if(e===t){G=null;break}var l=e.sibling;if(l!==null){l.return=e.return,G=l;break}G=e.return}}var V0=Math.ceil,li=mn.ReactCurrentDispatcher,fc=mn.ReactCurrentOwner,Nt=mn.ReactCurrentBatchConfig,fe=0,Fe=null,Ce=null,Ve=0,lt=0,Ds=zn(0),De=0,Qa=null,ms=0,Ci=0,pc=0,ka=null,nt=null,hc=0,ta=1/0,Zt=null,ci=!1,ml=null,Mn=null,jr=!1,_n=null,ui=0,Ca=0,fl=null,Vr=-1,Lr=0;function Ze(){return fe&6?_e():Vr!==-1?Vr:Vr=_e()}function Bn(t){return t.mode&1?fe&2&&Ve!==0?Ve&-Ve:N0.transition!==null?(Lr===0&&(Lr=Zd()),Lr):(t=he,t!==0||(t=window.event,t=t===void 0?16:rm(t.type)),t):1}function At(t,e,n,s){if(50<Ca)throw Ca=0,fl=null,Error(z(185));tr(t,n,s),(!(fe&2)||t!==Fe)&&(t===Fe&&(!(fe&2)&&(Ci|=n),De===4&&xn(t,Ve)),it(t,s),n===1&&fe===0&&!(e.mode&1)&&(ta=_e()+500,Pi&&Wn()))}function it(t,e){var n=t.callbackNode;Nh(t,e);var s=Qr(t,t===Fe?Ve:0);if(s===0)n!==null&&Yc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&Yc(n),e===1)t.tag===0?w0(zu.bind(null,t)):bm(zu.bind(null,t)),y0(function(){!(fe&6)&&Wn()}),n=null;else{switch(Xd(s)){case 1:n=Ol;break;case 4:n=Yd;break;case 16:n=Ur;break;case 536870912:n=Jd;break;default:n=Ur}n=jf(n,gf.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function gf(t,e){if(Vr=-1,Lr=0,fe&6)throw Error(z(327));var n=t.callbackNode;if(Is()&&t.callbackNode!==n)return null;var s=Qr(t,t===Fe?Ve:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=di(t,s);else{e=s;var a=fe;fe|=2;var r=xf();(Fe!==t||Ve!==e)&&(Zt=null,ta=_e()+500,os(t,e));do try{z0();break}catch(l){yf(t,l)}while(!0);ec(),li.current=r,fe=a,Ce!==null?e=0:(Fe=null,Ve=0,e=De)}if(e!==0){if(e===2&&(a=Lo(t),a!==0&&(s=a,e=pl(t,a))),e===1)throw n=Qa,os(t,0),xn(t,s),it(t,_e()),n;if(e===6)xn(t,s);else{if(a=t.current.alternate,!(s&30)&&!L0(a)&&(e=di(t,s),e===2&&(r=Lo(t),r!==0&&(s=r,e=pl(t,r))),e===1))throw n=Qa,os(t,0),xn(t,s),it(t,_e()),n;switch(t.finishedWork=a,t.finishedLanes=s,e){case 0:case 1:throw Error(z(345));case 2:Un(t,nt,Zt);break;case 3:if(xn(t,s),(s&130023424)===s&&(e=hc+500-_e(),10<e)){if(Qr(t,0)!==0)break;if(a=t.suspendedLanes,(a&s)!==s){Ze(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Go(Un.bind(null,t,nt,Zt),e);break}Un(t,nt,Zt);break;case 4:if(xn(t,s),(s&4194240)===s)break;for(e=t.eventTimes,a=-1;0<s;){var o=31-Dt(s);r=1<<o,o=e[o],o>a&&(a=o),s&=~r}if(s=a,s=_e()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*V0(s/1960))-s,10<s){t.timeoutHandle=Go(Un.bind(null,t,nt,Zt),s);break}Un(t,nt,Zt);break;case 5:Un(t,nt,Zt);break;default:throw Error(z(329))}}}return it(t,_e()),t.callbackNode===n?gf.bind(null,t):null}function pl(t,e){var n=ka;return t.current.memoizedState.isDehydrated&&(os(t,e).flags|=256),t=di(t,e),t!==2&&(e=nt,nt=n,e!==null&&hl(e)),t}function hl(t){nt===null?nt=t:nt.push.apply(nt,t)}function L0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var a=n[s],r=a.getSnapshot;a=a.value;try{if(!Mt(r(),a))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xn(t,e){for(e&=~pc,e&=~Ci,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Dt(e),s=1<<n;t[n]=-1,e&=~s}}function zu(t){if(fe&6)throw Error(z(327));Is();var e=Qr(t,0);if(!(e&1))return it(t,_e()),null;var n=di(t,e);if(t.tag!==0&&n===2){var s=Lo(t);s!==0&&(e=s,n=pl(t,s))}if(n===1)throw n=Qa,os(t,0),xn(t,e),it(t,_e()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Un(t,nt,Zt),it(t,_e()),null}function gc(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(ta=_e()+500,Pi&&Wn())}}function fs(t){_n!==null&&_n.tag===0&&!(fe&6)&&Is();var e=fe;fe|=1;var n=Nt.transition,s=he;try{if(Nt.transition=null,he=1,t)return t()}finally{he=s,Nt.transition=n,fe=e,!(fe&6)&&Wn()}}function yc(){lt=Ds.current,ve(Ds)}function os(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,g0(n)),Ce!==null)for(n=Ce.return;n!==null;){var s=n;switch(Jl(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Zr();break;case 3:Xs(),ve(at),ve(Ue),ic();break;case 5:rc(s);break;case 4:Xs();break;case 13:ve(Ne);break;case 19:ve(Ne);break;case 10:tc(s.type._context);break;case 22:case 23:yc()}n=n.return}if(Fe=t,Ce=t=$n(t.current,null),Ve=lt=e,De=0,Qa=null,pc=Ci=ms=0,nt=ka=null,es!==null){for(e=0;e<es.length;e++)if(n=es[e],s=n.interleaved,s!==null){n.interleaved=null;var a=s.next,r=n.pending;if(r!==null){var o=r.next;r.next=a,s.next=o}n.pending=s}es=null}return t}function yf(t,e){do{var n=Ce;try{if(ec(),$r.current=oi,ii){for(var s=je.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}ii=!1}if(ds=0,$e=Ee=je=null,Ra=!1,qa=0,fc.current=null,n===null||n.return===null){De=1,Qa=e,Ce=null;break}e:{var r=t,o=n.return,l=n,c=e;if(e=Ve,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,m=d.tag;if(!(d.mode&1)&&(m===0||m===11||m===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=Cu(o);if(h!==null){h.flags&=-257,Tu(h,o,l,r,e),h.mode&1&&ku(r,u,e),e=h,c=u;var p=e.updateQueue;if(p===null){var v=new Set;v.add(c),e.updateQueue=v}else p.add(c);break e}else{if(!(e&1)){ku(r,u,e),xc();break e}c=Error(z(426))}}else if(we&&l.mode&1){var w=Cu(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Tu(w,o,l,r,e),Zl(ea(c,l));break e}}r=c=ea(c,l),De!==4&&(De=2),ka===null?ka=[r]:ka.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var S=Xm(r,c,e);Nu(r,S);break e;case 1:l=c;var y=r.type,g=r.stateNode;if(!(r.flags&128)&&(typeof y.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Mn===null||!Mn.has(g)))){r.flags|=65536,e&=-e,r.lanes|=e;var x=ef(r,l,e);Nu(r,x);break e}}r=r.return}while(r!==null)}Sf(n)}catch(N){e=N,Ce===n&&n!==null&&(Ce=n=n.return);continue}break}while(!0)}function xf(){var t=li.current;return li.current=oi,t===null?oi:t}function xc(){(De===0||De===3||De===2)&&(De=4),Fe===null||!(ms&268435455)&&!(Ci&268435455)||xn(Fe,Ve)}function di(t,e){var n=fe;fe|=2;var s=xf();(Fe!==t||Ve!==e)&&(Zt=null,os(t,e));do try{O0();break}catch(a){yf(t,a)}while(!0);if(ec(),fe=n,li.current=s,Ce!==null)throw Error(z(261));return Fe=null,Ve=0,De}function O0(){for(;Ce!==null;)vf(Ce)}function z0(){for(;Ce!==null&&!fh();)vf(Ce)}function vf(t){var e=Nf(t.alternate,t,lt);t.memoizedProps=t.pendingProps,e===null?Sf(t):Ce=e,fc.current=null}function Sf(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=B0(n,e),n!==null){n.flags&=32767,Ce=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{De=6,Ce=null;return}}else if(n=M0(n,e,lt),n!==null){Ce=n;return}if(e=e.sibling,e!==null){Ce=e;return}Ce=e=t}while(e!==null);De===0&&(De=5)}function Un(t,e,n){var s=he,a=Nt.transition;try{Nt.transition=null,he=1,W0(t,e,n,s)}finally{Nt.transition=a,he=s}return null}function W0(t,e,n,s){do Is();while(_n!==null);if(fe&6)throw Error(z(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var r=n.lanes|n.childLanes;if(jh(t,r),t===Fe&&(Ce=Fe=null,Ve=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||jr||(jr=!0,jf(Ur,function(){return Is(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=Nt.transition,Nt.transition=null;var o=he;he=1;var l=fe;fe|=4,fc.current=null,F0(t,n),pf(n,t),c0(Uo),Gr=!!Ho,Uo=Ho=null,t.current=n,I0(n),ph(),fe=l,he=o,Nt.transition=r}else t.current=n;if(jr&&(jr=!1,_n=t,ui=a),r=t.pendingLanes,r===0&&(Mn=null),yh(n.stateNode),it(t,_e()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)a=e[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(ci)throw ci=!1,t=ml,ml=null,t;return ui&1&&t.tag!==0&&Is(),r=t.pendingLanes,r&1?t===fl?Ca++:(Ca=0,fl=t):Ca=0,Wn(),null}function Is(){if(_n!==null){var t=Xd(ui),e=Nt.transition,n=he;try{if(Nt.transition=null,he=16>t?16:t,_n===null)var s=!1;else{if(t=_n,_n=null,ui=0,fe&6)throw Error(z(331));var a=fe;for(fe|=4,G=t.current;G!==null;){var r=G,o=r.child;if(G.flags&16){var l=r.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(G=u;G!==null;){var d=G;switch(d.tag){case 0:case 11:case 15:_a(8,d,r)}var m=d.child;if(m!==null)m.return=d,G=m;else for(;G!==null;){d=G;var f=d.sibling,h=d.return;if(df(d),d===u){G=null;break}if(f!==null){f.return=h,G=f;break}G=h}}}var p=r.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}G=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,G=o;else e:for(;G!==null;){if(r=G,r.flags&2048)switch(r.tag){case 0:case 11:case 15:_a(9,r,r.return)}var S=r.sibling;if(S!==null){S.return=r.return,G=S;break e}G=r.return}}var y=t.current;for(G=y;G!==null;){o=G;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,G=g;else e:for(o=y;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ki(9,l)}}catch(N){Re(l,l.return,N)}if(l===o){G=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,G=x;break e}G=l.return}}if(fe=a,Wn(),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(Si,t)}catch{}s=!0}return s}finally{he=n,Nt.transition=e}}return!1}function Wu(t,e,n){e=ea(n,e),e=Xm(t,e,1),t=An(t,e,1),e=Ze(),t!==null&&(tr(t,1,e),it(t,e))}function Re(t,e,n){if(t.tag===3)Wu(t,t,n);else for(;e!==null;){if(e.tag===3){Wu(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Mn===null||!Mn.has(s))){t=ea(n,t),t=ef(e,t,1),e=An(e,t,1),t=Ze(),e!==null&&(tr(e,1,t),it(e,t));break}}e=e.return}}function q0(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=Ze(),t.pingedLanes|=t.suspendedLanes&n,Fe===t&&(Ve&n)===n&&(De===4||De===3&&(Ve&130023424)===Ve&&500>_e()-hc?os(t,0):pc|=n),it(t,e)}function wf(t,e){e===0&&(t.mode&1?(e=fr,fr<<=1,!(fr&130023424)&&(fr=4194304)):e=1);var n=Ze();t=on(t,e),t!==null&&(tr(t,e,n),it(t,n))}function H0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wf(t,n)}function U0(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(z(314))}s!==null&&s.delete(e),wf(t,n)}var Nf;Nf=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||at.current)st=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return st=!1,A0(t,e,n);st=!!(t.flags&131072)}else st=!1,we&&e.flags&1048576&&Pm(e,ti,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Ir(t,e),t=e.pendingProps;var a=Ys(e,Ue.current);Fs(e,n),a=lc(null,e,s,t,a,n);var r=cc();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rt(s)?(r=!0,Xr(e)):r=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,sc(e),a.updater=_i,e.stateNode=a,a._reactInternals=e,tl(e,s,t,n),e=al(null,e,s,!0,r,n)):(e.tag=0,we&&r&&Yl(e),Ye(null,e,a,n),e=e.child),e;case 16:s=e.elementType;e:{switch(Ir(t,e),t=e.pendingProps,a=s._init,s=a(s._payload),e.type=s,a=e.tag=G0(s),t=Rt(s,t),a){case 0:e=sl(null,e,s,t,n);break e;case 1:e=Au(null,e,s,t,n);break e;case 11:e=Eu(null,e,s,t,n);break e;case 14:e=Du(null,e,s,Rt(s.type,t),n);break e}throw Error(z(306,s,""))}return e;case 0:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:Rt(s,a),sl(t,e,s,a,n);case 1:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:Rt(s,a),Au(t,e,s,a,n);case 3:e:{if(af(e),t===null)throw Error(z(387));s=e.pendingProps,r=e.memoizedState,a=r.element,Em(t,e),ai(e,s,null,n);var o=e.memoizedState;if(s=o.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){a=ea(Error(z(423)),e),e=Mu(t,e,s,n,a);break e}else if(s!==a){a=ea(Error(z(424)),e),e=Mu(t,e,s,n,a);break e}else for(ct=Dn(e.stateNode.containerInfo.firstChild),ut=e,we=!0,Et=null,n=Cm(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Js(),s===a){e=ln(t,e,n);break e}Ye(t,e,s,n)}e=e.child}return e;case 5:return Dm(e),t===null&&Zo(e),s=e.type,a=e.pendingProps,r=t!==null?t.memoizedProps:null,o=a.children,Qo(s,a)?o=null:r!==null&&Qo(s,r)&&(e.flags|=32),sf(t,e),Ye(t,e,o,n),e.child;case 6:return t===null&&Zo(e),null;case 13:return rf(t,e,n);case 4:return ac(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Zs(e,null,s,n):Ye(t,e,s,n),e.child;case 11:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:Rt(s,a),Eu(t,e,s,a,n);case 7:return Ye(t,e,e.pendingProps,n),e.child;case 8:return Ye(t,e,e.pendingProps.children,n),e.child;case 12:return Ye(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,a=e.pendingProps,r=e.memoizedProps,o=a.value,ye(ni,s._currentValue),s._currentValue=o,r!==null)if(Mt(r.value,o)){if(r.children===a.children&&!at.current){e=ln(t,e,n);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var l=r.dependencies;if(l!==null){o=r.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(r.tag===1){c=sn(-1,n&-n),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}r.lanes|=n,c=r.alternate,c!==null&&(c.lanes|=n),Xo(r.return,n,e),l.lanes|=n;break}c=c.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(z(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Xo(o,n,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Ye(t,e,a.children,n),e=e.child}return e;case 9:return a=e.type,s=e.pendingProps.children,Fs(e,n),a=jt(a),s=s(a),e.flags|=1,Ye(t,e,s,n),e.child;case 14:return s=e.type,a=Rt(s,e.pendingProps),a=Rt(s.type,a),Du(t,e,s,a,n);case 15:return tf(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:Rt(s,a),Ir(t,e),e.tag=1,rt(s)?(t=!0,Xr(e)):t=!1,Fs(e,n),Zm(e,s,a),tl(e,s,a,n),al(null,e,s,!0,t,n);case 19:return of(t,e,n);case 22:return nf(t,e,n)}throw Error(z(156,e.tag))};function jf(t,e){return Kd(t,e)}function Q0(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wt(t,e,n,s){return new Q0(t,e,n,s)}function vc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function G0(t){if(typeof t=="function")return vc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Il)return 11;if(t===Vl)return 14}return 2}function $n(t,e){var n=t.alternate;return n===null?(n=wt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Or(t,e,n,s,a,r){var o=2;if(s=t,typeof t=="function")vc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ns:return ls(n.children,a,r,e);case Fl:o=8,a|=8;break;case Po:return t=wt(12,n,e,a|2),t.elementType=Po,t.lanes=r,t;case Ro:return t=wt(13,n,e,a),t.elementType=Ro,t.lanes=r,t;case _o:return t=wt(19,n,e,a),t.elementType=_o,t.lanes=r,t;case Dd:return Ti(n,a,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Td:o=10;break e;case Ed:o=9;break e;case Il:o=11;break e;case Vl:o=14;break e;case hn:o=16,s=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=wt(o,n,e,a),e.elementType=t,e.type=s,e.lanes=r,e}function ls(t,e,n,s){return t=wt(7,t,s,e),t.lanes=n,t}function Ti(t,e,n,s){return t=wt(22,t,s,e),t.elementType=Dd,t.lanes=n,t.stateNode={isHidden:!1},t}function yo(t,e,n){return t=wt(6,t,null,e),t.lanes=n,t}function xo(t,e,n){return e=wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function K0(t,e,n,s,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ji(0),this.expirationTimes=Ji(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ji(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Sc(t,e,n,s,a,r,o,l,c){return t=new K0(t,e,n,l,c),e===1?(e=1,r===!0&&(e|=8)):e=0,r=wt(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sc(r),t}function Y0(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ws,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function bf(t){if(!t)return In;t=t._reactInternals;e:{if(gs(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(rt(n))return jm(t,n,e)}return e}function Pf(t,e,n,s,a,r,o,l,c){return t=Sc(n,s,!0,t,a,r,o,l,c),t.context=bf(null),n=t.current,s=Ze(),a=Bn(n),r=sn(s,a),r.callback=e??null,An(n,r,a),t.current.lanes=a,tr(t,a,s),it(t,s),t}function Ei(t,e,n,s){var a=e.current,r=Ze(),o=Bn(a);return n=bf(n),e.context===null?e.context=n:e.pendingContext=n,e=sn(r,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=An(a,e,o),t!==null&&(At(t,a,o,r),Br(t,a,o)),o}function mi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qu(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function wc(t,e){qu(t,e),(t=t.alternate)&&qu(t,e)}function J0(){return null}var Rf=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nc(t){this._internalRoot=t}Di.prototype.render=Nc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Ei(t,e,null,null)};Di.prototype.unmount=Nc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fs(function(){Ei(null,t,null,null)}),e[rn]=null}};function Di(t){this._internalRoot=t}Di.prototype.unstable_scheduleHydration=function(t){if(t){var e=nm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yn.length&&e!==0&&e<yn[n].priority;n++);yn.splice(n,0,t),n===0&&am(t)}};function jc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ai(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hu(){}function Z0(t,e,n,s,a){if(a){if(typeof s=="function"){var r=s;s=function(){var u=mi(o);r.call(u)}}var o=Pf(e,s,t,0,null,!1,!1,"",Hu);return t._reactRootContainer=o,t[rn]=o.current,Va(t.nodeType===8?t.parentNode:t),fs(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof s=="function"){var l=s;s=function(){var u=mi(c);l.call(u)}}var c=Sc(t,0,!1,null,null,!1,!1,"",Hu);return t._reactRootContainer=c,t[rn]=c.current,Va(t.nodeType===8?t.parentNode:t),fs(function(){Ei(e,c,n,s)}),c}function Mi(t,e,n,s,a){var r=n._reactRootContainer;if(r){var o=r;if(typeof a=="function"){var l=a;a=function(){var c=mi(o);l.call(c)}}Ei(e,o,t,a)}else o=Z0(n,e,t,a,s);return mi(o)}em=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=va(e.pendingLanes);n!==0&&(zl(e,n|1),it(e,_e()),!(fe&6)&&(ta=_e()+500,Wn()))}break;case 13:fs(function(){var s=on(t,1);if(s!==null){var a=Ze();At(s,t,1,a)}}),wc(t,1)}};Wl=function(t){if(t.tag===13){var e=on(t,134217728);if(e!==null){var n=Ze();At(e,t,134217728,n)}wc(t,134217728)}};tm=function(t){if(t.tag===13){var e=Bn(t),n=on(t,e);if(n!==null){var s=Ze();At(n,t,e,s)}wc(t,e)}};nm=function(){return he};sm=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};Fo=function(t,e,n){switch(e){case"input":if(To(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var a=bi(s);if(!a)throw Error(z(90));Md(s),To(s,a)}}}break;case"textarea":$d(t,n);break;case"select":e=n.value,e!=null&&As(t,!!n.multiple,e,!1)}};Wd=gc;qd=fs;var X0={usingClientEntryPoint:!1,Events:[sr,Rs,bi,Od,zd,gc]},ha={findFiberByHostInstance:Xn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eg={bundleType:ha.bundleType,version:ha.version,rendererPackageName:ha.rendererPackageName,rendererConfig:ha.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Qd(t),t===null?null:t.stateNode},findFiberByHostInstance:ha.findFiberByHostInstance||J0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var br=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!br.isDisabled&&br.supportsFiber)try{Si=br.inject(eg),Ht=br}catch{}}mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X0;mt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jc(e))throw Error(z(200));return Y0(t,e,null,n)};mt.createRoot=function(t,e){if(!jc(t))throw Error(z(299));var n=!1,s="",a=Rf;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=Sc(t,1,!1,null,null,n,!1,s,a),t[rn]=e.current,Va(t.nodeType===8?t.parentNode:t),new Nc(e)};mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Qd(e),t=t===null?null:t.stateNode,t};mt.flushSync=function(t){return fs(t)};mt.hydrate=function(t,e,n){if(!Ai(e))throw Error(z(200));return Mi(null,t,e,!0,n)};mt.hydrateRoot=function(t,e,n){if(!jc(t))throw Error(z(405));var s=n!=null&&n.hydratedSources||null,a=!1,r="",o=Rf;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Pf(e,null,t,1,n??null,a,!1,r,o),t[rn]=e.current,Va(t),s)for(t=0;t<s.length;t++)n=s[t],a=n._getVersion,a=a(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,a]:e.mutableSourceEagerHydrationData.push(n,a);return new Di(e)};mt.render=function(t,e,n){if(!Ai(e))throw Error(z(200));return Mi(null,t,e,!1,n)};mt.unmountComponentAtNode=function(t){if(!Ai(t))throw Error(z(40));return t._reactRootContainer?(fs(function(){Mi(null,null,t,!1,function(){t._reactRootContainer=null,t[rn]=null})}),!0):!1};mt.unstable_batchedUpdates=gc;mt.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Ai(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Mi(t,e,n,!1,s)};mt.version="18.3.1-next-f1338f8080-20240426";function _f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_f)}catch(t){console.error(t)}}_f(),Rd.exports=mt;var tg=Rd.exports,Uu=tg;jo.createRoot=Uu.createRoot,jo.hydrateRoot=Uu.hydrateRoot;var Bi=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$i=typeof window>"u"||"Deno"in globalThis;function _t(){}function ng(t,e){return typeof t=="function"?t(e):t}function sg(t){return typeof t=="number"&&t>=0&&t!==1/0}function ag(t,e){return Math.max(t+(e||0)-Date.now(),0)}function gl(t,e){return typeof t=="function"?t(e):t}function rg(t,e){return typeof t=="function"?t(e):t}function Qu(t,e){const{type:n="all",exact:s,fetchStatus:a,predicate:r,queryKey:o,stale:l}=t;if(o){if(s){if(e.queryHash!==bc(o,e.options))return!1}else if(!Ka(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||a&&a!==e.state.fetchStatus||r&&!r(e))}function Gu(t,e){const{exact:n,status:s,predicate:a,mutationKey:r}=t;if(r){if(!e.options.mutationKey)return!1;if(n){if(Ga(e.options.mutationKey)!==Ga(r))return!1}else if(!Ka(e.options.mutationKey,r))return!1}return!(s&&e.state.status!==s||a&&!a(e))}function bc(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ga)(t)}function Ga(t){return JSON.stringify(t,(e,n)=>yl(n)?Object.keys(n).sort().reduce((s,a)=>(s[a]=n[a],s),{}):n)}function Ka(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Ka(t[n],e[n])):!1}function kf(t,e){if(t===e)return t;const n=Ku(t)&&Ku(e);if(n||yl(t)&&yl(e)){const s=n?t:Object.keys(t),a=s.length,r=n?e:Object.keys(e),o=r.length,l=n?[]:{},c=new Set(s);let u=0;for(let d=0;d<o;d++){const m=n?d:r[d];(!n&&c.has(m)||n)&&t[m]===void 0&&e[m]===void 0?(l[m]=void 0,u++):(l[m]=kf(t[m],e[m]),l[m]===t[m]&&t[m]!==void 0&&u++)}return a===o&&u===a?t:l}return e}function Ku(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function yl(t){if(!Yu(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Yu(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Yu(t){return Object.prototype.toString.call(t)==="[object Object]"}function ig(t){return new Promise(e=>{setTimeout(e,t)})}function og(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?kf(t,e):e}function lg(t,e,n=0){const s=[...t,e];return n&&s.length>n?s.slice(1):s}function cg(t,e,n=0){const s=[e,...t];return n&&s.length>n?s.slice(0,-1):s}var Pc=Symbol();function Cf(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Pc?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var ns,wn,Ls,od,ug=(od=class extends Bi{constructor(){super();pe(this,ns);pe(this,wn);pe(this,Ls);ae(this,Ls,e=>{if(!$i&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){F(this,wn)||this.setEventListener(F(this,Ls))}onUnsubscribe(){var e;this.hasListeners()||((e=F(this,wn))==null||e.call(this),ae(this,wn,void 0))}setEventListener(e){var n;ae(this,Ls,e),(n=F(this,wn))==null||n.call(this),ae(this,wn,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){F(this,ns)!==e&&(ae(this,ns,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof F(this,ns)=="boolean"?F(this,ns):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ns=new WeakMap,wn=new WeakMap,Ls=new WeakMap,od),Tf=new ug,Os,Nn,zs,ld,dg=(ld=class extends Bi{constructor(){super();pe(this,Os,!0);pe(this,Nn);pe(this,zs);ae(this,zs,e=>{if(!$i&&window.addEventListener){const n=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){F(this,Nn)||this.setEventListener(F(this,zs))}onUnsubscribe(){var e;this.hasListeners()||((e=F(this,Nn))==null||e.call(this),ae(this,Nn,void 0))}setEventListener(e){var n;ae(this,zs,e),(n=F(this,Nn))==null||n.call(this),ae(this,Nn,e(this.setOnline.bind(this)))}setOnline(e){F(this,Os)!==e&&(ae(this,Os,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return F(this,Os)}},Os=new WeakMap,Nn=new WeakMap,zs=new WeakMap,ld),fi=new dg;function mg(){let t,e;const n=new Promise((a,r)=>{t=a,e=r});n.status="pending",n.catch(()=>{});function s(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{s({status:"fulfilled",value:a}),t(a)},n.reject=a=>{s({status:"rejected",reason:a}),e(a)},n}function fg(t){return Math.min(1e3*2**t,3e4)}function Ef(t){return(t??"online")==="online"?fi.isOnline():!0}var Df=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Af(t){let e=!1,n=0,s;const a=mg(),r=()=>a.status!=="pending",o=v=>{var w;r()||(f(new Df(v)),(w=t.abort)==null||w.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>Tf.isFocused()&&(t.networkMode==="always"||fi.isOnline())&&t.canRun(),d=()=>Ef(t.networkMode)&&t.canRun(),m=v=>{r()||(s==null||s(),a.resolve(v))},f=v=>{r()||(s==null||s(),a.reject(v))},h=()=>new Promise(v=>{var w;s=S=>{(r()||u())&&v(S)},(w=t.onPause)==null||w.call(t)}).then(()=>{var v;s=void 0,r()||(v=t.onContinue)==null||v.call(t)}),p=()=>{if(r())return;let v;const w=n===0?t.initialPromise:void 0;try{v=w??t.fn()}catch(S){v=Promise.reject(S)}Promise.resolve(v).then(m).catch(S=>{var k;if(r())return;const y=t.retry??($i?0:3),g=t.retryDelay??fg,x=typeof g=="function"?g(n,S):g,N=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,S);if(e||!N){f(S);return}n++,(k=t.onFail)==null||k.call(t,n,S),ig(x).then(()=>u()?void 0:h()).then(()=>{e?f(S):p()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?p():h().then(p),a)}}var pg=t=>setTimeout(t,0);function hg(){let t=[],e=0,n=l=>{l()},s=l=>{l()},a=pg;const r=l=>{e?t.push(l):a(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&a(()=>{s(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{r(()=>{l(...c)})},schedule:r,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{a=l}}}var Je=hg(),ss,cd,Mf=(cd=class{constructor(){pe(this,ss)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),sg(this.gcTime)&&ae(this,ss,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??($i?1/0:5*60*1e3))}clearGcTimeout(){F(this,ss)&&(clearTimeout(F(this,ss)),ae(this,ss,void 0))}},ss=new WeakMap,cd),Ws,qs,yt,as,Be,Za,rs,kt,Yt,ud,gg=(ud=class extends Mf{constructor(e){super();pe(this,kt);pe(this,Ws);pe(this,qs);pe(this,yt);pe(this,as);pe(this,Be);pe(this,Za);pe(this,rs);ae(this,rs,!1),ae(this,Za,e.defaultOptions),this.setOptions(e.options),this.observers=[],ae(this,as,e.client),ae(this,yt,F(this,as).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ae(this,Ws,xg(this.options)),this.state=e.state??F(this,Ws),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=F(this,Be))==null?void 0:e.promise}setOptions(e){this.options={...F(this,Za),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&F(this,yt).remove(this)}setData(e,n){const s=og(this.state.data,e,this.options);return ze(this,kt,Yt).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(e,n){ze(this,kt,Yt).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var s,a;const n=(s=F(this,Be))==null?void 0:s.promise;return(a=F(this,Be))==null||a.cancel(e),n?n.then(_t).catch(_t):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(F(this,Ws))}isActive(){return this.observers.some(e=>rg(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Pc||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>gl(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!ag(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=F(this,Be))==null||n.continue()}onOnline(){var n;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=F(this,Be))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),F(this,yt).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(F(this,Be)&&(F(this,rs)?F(this,Be).cancel({revert:!0}):F(this,Be).cancelRetry()),this.scheduleGc()),F(this,yt).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ze(this,kt,Yt).call(this,{type:"invalidate"})}async fetch(e,n){var c,u,d,m,f,h,p,v,w,S,y,g;if(this.state.fetchStatus!=="idle"&&((c=F(this,Be))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(F(this,Be))return F(this,Be).continueRetry(),F(this,Be).promise}if(e&&this.setOptions(e),!this.options.queryFn){const x=this.observers.find(N=>N.options.queryFn);x&&this.setOptions(x.options)}const s=new AbortController,a=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(ae(this,rs,!0),s.signal)})},r=()=>{const x=Cf(this.options,n),k=(()=>{const T={client:F(this,as),queryKey:this.queryKey,meta:this.meta};return a(T),T})();return ae(this,rs,!1),this.options.persister?this.options.persister(x,k,this):x(k)},l=(()=>{const x={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:F(this,as),state:this.state,fetchFn:r};return a(x),x})();(u=this.options.behavior)==null||u.onFetch(l,this),ae(this,qs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&ze(this,kt,Yt).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta}),ae(this,Be,Af({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onFail:(x,N)=>{ze(this,kt,Yt).call(this,{type:"failed",failureCount:x,error:N})},onPause:()=>{ze(this,kt,Yt).call(this,{type:"pause"})},onContinue:()=>{ze(this,kt,Yt).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const x=await F(this,Be).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(h=(f=F(this,yt).config).onSuccess)==null||h.call(f,x,this),(v=(p=F(this,yt).config).onSettled)==null||v.call(p,x,this.state.error,this),x}catch(x){if(x instanceof Df){if(x.silent)return F(this,Be).promise;if(x.revert){if(this.setState({...F(this,qs),fetchStatus:"idle"}),this.state.data===void 0)throw x;return this.state.data}}throw ze(this,kt,Yt).call(this,{type:"error",error:x}),(S=(w=F(this,yt).config).onError)==null||S.call(w,x,this),(g=(y=F(this,yt).config).onSettled)==null||g.call(y,this.state.data,x,this),x}finally{this.scheduleGc()}}},Ws=new WeakMap,qs=new WeakMap,yt=new WeakMap,as=new WeakMap,Be=new WeakMap,Za=new WeakMap,rs=new WeakMap,kt=new WeakSet,Yt=function(e){const n=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...yg(s.data,this.options),fetchMeta:e.meta??null};case"success":const a={...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ae(this,qs,e.manual?a:void 0),a;case"error":const r=e.error;return{...s,error:r,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=n(this.state),Je.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),F(this,yt).notify({query:this,type:"updated",action:e})})},ud);function yg(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ef(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function xg(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,s=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Lt,dd,vg=(dd=class extends Bi{constructor(e={}){super();pe(this,Lt);this.config=e,ae(this,Lt,new Map)}build(e,n,s){const a=n.queryKey,r=n.queryHash??bc(a,n);let o=this.get(r);return o||(o=new gg({client:e,queryKey:a,queryHash:r,options:e.defaultQueryOptions(n),state:s,defaultOptions:e.getQueryDefaults(a)}),this.add(o)),o}add(e){F(this,Lt).has(e.queryHash)||(F(this,Lt).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=F(this,Lt).get(e.queryHash);n&&(e.destroy(),n===e&&F(this,Lt).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Je.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return F(this,Lt).get(e)}getAll(){return[...F(this,Lt).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(s=>Qu(n,s))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(s=>Qu(e,s)):n}notify(e){Je.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Je.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Je.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Lt=new WeakMap,dd),Ot,Ke,is,zt,pn,md,Sg=(md=class extends Mf{constructor(e){super();pe(this,zt);pe(this,Ot);pe(this,Ke);pe(this,is);this.mutationId=e.mutationId,ae(this,Ke,e.mutationCache),ae(this,Ot,[]),this.state=e.state||wg(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){F(this,Ot).includes(e)||(F(this,Ot).push(e),this.clearGcTimeout(),F(this,Ke).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ae(this,Ot,F(this,Ot).filter(n=>n!==e)),this.scheduleGc(),F(this,Ke).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){F(this,Ot).length||(this.state.status==="pending"?this.scheduleGc():F(this,Ke).remove(this))}continue(){var e;return((e=F(this,is))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var r,o,l,c,u,d,m,f,h,p,v,w,S,y,g,x,N,k,T,j;const n=()=>{ze(this,zt,pn).call(this,{type:"continue"})};ae(this,is,Af({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(_,C)=>{ze(this,zt,pn).call(this,{type:"failed",failureCount:_,error:C})},onPause:()=>{ze(this,zt,pn).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>F(this,Ke).canRun(this)}));const s=this.state.status==="pending",a=!F(this,is).canStart();try{if(s)n();else{ze(this,zt,pn).call(this,{type:"pending",variables:e,isPaused:a}),await((o=(r=F(this,Ke).config).onMutate)==null?void 0:o.call(r,e,this));const C=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e));C!==this.state.context&&ze(this,zt,pn).call(this,{type:"pending",context:C,variables:e,isPaused:a})}const _=await F(this,is).start();return await((d=(u=F(this,Ke).config).onSuccess)==null?void 0:d.call(u,_,e,this.state.context,this)),await((f=(m=this.options).onSuccess)==null?void 0:f.call(m,_,e,this.state.context)),await((p=(h=F(this,Ke).config).onSettled)==null?void 0:p.call(h,_,null,this.state.variables,this.state.context,this)),await((w=(v=this.options).onSettled)==null?void 0:w.call(v,_,null,e,this.state.context)),ze(this,zt,pn).call(this,{type:"success",data:_}),_}catch(_){try{throw await((y=(S=F(this,Ke).config).onError)==null?void 0:y.call(S,_,e,this.state.context,this)),await((x=(g=this.options).onError)==null?void 0:x.call(g,_,e,this.state.context)),await((k=(N=F(this,Ke).config).onSettled)==null?void 0:k.call(N,void 0,_,this.state.variables,this.state.context,this)),await((j=(T=this.options).onSettled)==null?void 0:j.call(T,void 0,_,e,this.state.context)),_}finally{ze(this,zt,pn).call(this,{type:"error",error:_})}}finally{F(this,Ke).runNext(this)}}},Ot=new WeakMap,Ke=new WeakMap,is=new WeakMap,zt=new WeakSet,pn=function(e){const n=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Je.batch(()=>{F(this,Ot).forEach(s=>{s.onMutationUpdate(e)}),F(this,Ke).notify({mutation:this,type:"updated",action:e})})},md);function wg(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var en,Ct,Xa,fd,Ng=(fd=class extends Bi{constructor(e={}){super();pe(this,en);pe(this,Ct);pe(this,Xa);this.config=e,ae(this,en,new Set),ae(this,Ct,new Map),ae(this,Xa,0)}build(e,n,s){const a=new Sg({mutationCache:this,mutationId:++or(this,Xa)._,options:e.defaultMutationOptions(n),state:s});return this.add(a),a}add(e){F(this,en).add(e);const n=Pr(e);if(typeof n=="string"){const s=F(this,Ct).get(n);s?s.push(e):F(this,Ct).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(F(this,en).delete(e)){const n=Pr(e);if(typeof n=="string"){const s=F(this,Ct).get(n);if(s)if(s.length>1){const a=s.indexOf(e);a!==-1&&s.splice(a,1)}else s[0]===e&&F(this,Ct).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Pr(e);if(typeof n=="string"){const s=F(this,Ct).get(n),a=s==null?void 0:s.find(r=>r.state.status==="pending");return!a||a===e}else return!0}runNext(e){var s;const n=Pr(e);if(typeof n=="string"){const a=(s=F(this,Ct).get(n))==null?void 0:s.find(r=>r!==e&&r.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Je.batch(()=>{F(this,en).forEach(e=>{this.notify({type:"removed",mutation:e})}),F(this,en).clear(),F(this,Ct).clear()})}getAll(){return Array.from(F(this,en))}find(e){const n={exact:!0,...e};return this.getAll().find(s=>Gu(n,s))}findAll(e={}){return this.getAll().filter(n=>Gu(e,n))}notify(e){Je.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Je.batch(()=>Promise.all(e.map(n=>n.continue().catch(_t))))}},en=new WeakMap,Ct=new WeakMap,Xa=new WeakMap,fd);function Pr(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Ju(t){return{onFetch:(e,n)=>{var d,m,f,h,p;const s=e.options,a=(f=(m=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:m.fetchMore)==null?void 0:f.direction,r=((h=e.state.data)==null?void 0:h.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const w=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},S=Cf(e.options,e.fetchOptions),y=async(g,x,N)=>{if(v)return Promise.reject();if(x==null&&g.pages.length)return Promise.resolve(g);const T=(()=>{const E={client:e.client,queryKey:e.queryKey,pageParam:x,direction:N?"backward":"forward",meta:e.options.meta};return w(E),E})(),j=await S(T),{maxPages:_}=e.options,C=N?cg:lg;return{pages:C(g.pages,j,_),pageParams:C(g.pageParams,x,_)}};if(a&&r.length){const g=a==="backward",x=g?jg:Zu,N={pages:r,pageParams:o},k=x(s,N);l=await y(N,k,g)}else{const g=t??r.length;do{const x=c===0?o[0]??s.initialPageParam:Zu(s,l);if(c>0&&x==null)break;l=await y(l,x),c++}while(c<g)}return l};e.options.persister?e.fetchFn=()=>{var v,w;return(w=(v=e.options).persister)==null?void 0:w.call(v,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function Zu(t,{pages:e,pageParams:n}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,n[s],n):void 0}function jg(t,{pages:e,pageParams:n}){var s;return e.length>0?(s=t.getPreviousPageParam)==null?void 0:s.call(t,e[0],e,n[0],n):void 0}var Pe,jn,bn,Hs,Us,Pn,Qs,Gs,pd,bg=(pd=class{constructor(t={}){pe(this,Pe);pe(this,jn);pe(this,bn);pe(this,Hs);pe(this,Us);pe(this,Pn);pe(this,Qs);pe(this,Gs);ae(this,Pe,t.queryCache||new vg),ae(this,jn,t.mutationCache||new Ng),ae(this,bn,t.defaultOptions||{}),ae(this,Hs,new Map),ae(this,Us,new Map),ae(this,Pn,0)}mount(){or(this,Pn)._++,F(this,Pn)===1&&(ae(this,Qs,Tf.subscribe(async t=>{t&&(await this.resumePausedMutations(),F(this,Pe).onFocus())})),ae(this,Gs,fi.subscribe(async t=>{t&&(await this.resumePausedMutations(),F(this,Pe).onOnline())})))}unmount(){var t,e;or(this,Pn)._--,F(this,Pn)===0&&((t=F(this,Qs))==null||t.call(this),ae(this,Qs,void 0),(e=F(this,Gs))==null||e.call(this),ae(this,Gs,void 0))}isFetching(t){return F(this,Pe).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return F(this,jn).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=F(this,Pe).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=F(this,Pe).build(this,e),s=n.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(gl(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(t){return F(this,Pe).findAll(t).map(({queryKey:e,state:n})=>{const s=n.data;return[e,s]})}setQueryData(t,e,n){const s=this.defaultQueryOptions({queryKey:t}),a=F(this,Pe).get(s.queryHash),r=a==null?void 0:a.state.data,o=ng(e,r);if(o!==void 0)return F(this,Pe).build(this,s).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Je.batch(()=>F(this,Pe).findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=F(this,Pe).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=F(this,Pe);Je.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=F(this,Pe);return Je.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},s=Je.batch(()=>F(this,Pe).findAll(t).map(a=>a.cancel(n)));return Promise.all(s).then(_t).catch(_t)}invalidateQueries(t,e={}){return Je.batch(()=>(F(this,Pe).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},s=Je.batch(()=>F(this,Pe).findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let r=a.fetch(void 0,n);return n.throwOnError||(r=r.catch(_t)),a.state.fetchStatus==="paused"?Promise.resolve():r}));return Promise.all(s).then(_t)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=F(this,Pe).build(this,e);return n.isStaleByTime(gl(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(_t).catch(_t)}fetchInfiniteQuery(t){return t.behavior=Ju(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(_t).catch(_t)}ensureInfiniteQueryData(t){return t.behavior=Ju(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return fi.isOnline()?F(this,jn).resumePausedMutations():Promise.resolve()}getQueryCache(){return F(this,Pe)}getMutationCache(){return F(this,jn)}getDefaultOptions(){return F(this,bn)}setDefaultOptions(t){ae(this,bn,t)}setQueryDefaults(t,e){F(this,Hs).set(Ga(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...F(this,Hs).values()],n={};return e.forEach(s=>{Ka(t,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(t,e){F(this,Us).set(Ga(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...F(this,Us).values()],n={};return e.forEach(s=>{Ka(t,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...F(this,bn).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=bc(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Pc&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...F(this,bn).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){F(this,Pe).clear(),F(this,jn).clear()}},Pe=new WeakMap,jn=new WeakMap,bn=new WeakMap,Hs=new WeakMap,Us=new WeakMap,Pn=new WeakMap,Qs=new WeakMap,Gs=new WeakMap,pd),Pg=D.createContext(void 0),Rg=({client:t,children:e})=>(D.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),i.jsx(Pg.Provider,{value:t,children:e}));/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Bf=(...t)=>t.filter((e,n,s)=>!!e&&s.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=D.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:r,iconNode:o,...l},c)=>D.createElement("svg",{ref:c,...kg,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:Bf("lucide",a),...l},[...o.map(([u,d])=>D.createElement(u,d)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=(t,e)=>{const n=D.forwardRef(({className:s,...a},r)=>D.createElement(Cg,{ref:r,iconNode:e,className:Bf(`lucide-${_g(t)}`,s),...a}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=ie("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=ie("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=ie("Beaker",[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=ie("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=ie("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=ie("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=ie("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=ie("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=ie("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=ie("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=ie("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=ie("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=ie("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=ie("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=ie("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=ie("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=ie("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=ie("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=ie("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=ie("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=ie("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=ie("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=ie("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=ie("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=ie("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=ie("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);let Gg={data:""},Kg=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Gg,Yg=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Jg=/\/\*[^]*?\*\/|  +/g,Xu=/\n+/g,vn=(t,e)=>{let n="",s="",a="";for(let r in t){let o=t[r];r[0]=="@"?r[1]=="i"?n=r+" "+o+";":s+=r[1]=="f"?vn(o,r):r+"{"+vn(o,r[1]=="k"?"":e)+"}":typeof o=="object"?s+=vn(o,e?e.replace(/([^,])+/g,l=>r.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):r):o!=null&&(r=/^--/.test(r)?r:r.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=vn.p?vn.p(r,o):r+":"+o+";")}return n+(e&&a?e+"{"+a+"}":a)+s},Kt={},Gf=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+Gf(t[n]);return e}return t},Zg=(t,e,n,s,a)=>{let r=Gf(t),o=Kt[r]||(Kt[r]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(r));if(!Kt[o]){let c=r!==t?t:(u=>{let d,m,f=[{}];for(;d=Yg.exec(u.replace(Jg,""));)d[4]?f.shift():d[3]?(m=d[3].replace(Xu," ").trim(),f.unshift(f[0][m]=f[0][m]||{})):f[0][d[1]]=d[2].replace(Xu," ").trim();return f[0]})(t);Kt[o]=vn(a?{["@keyframes "+o]:c}:c,n?"":"."+o)}let l=n&&Kt.g?Kt.g:null;return n&&(Kt.g=Kt[o]),((c,u,d,m)=>{m?u.data=u.data.replace(m,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(Kt[o],e,s,l),o},Xg=(t,e,n)=>t.reduce((s,a,r)=>{let o=e[r];if(o&&o.call){let l=o(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":vn(l,""):l===!1?"":l}return s+a+(o??"")},"");function Fi(t){let e=this||{},n=t.call?t(e.p):t;return Zg(n.unshift?n.raw?Xg(n,[].slice.call(arguments,1),e.p):n.reduce((s,a)=>Object.assign(s,a&&a.call?a(e.p):a),{}):n,Kg(e.target),e.g,e.o,e.k)}let Kf,xl,vl;Fi.bind({g:1});let dn=Fi.bind({k:1});function ey(t,e,n,s){vn.p=e,Kf=t,xl=n,vl=s}function qn(t,e){let n=this||{};return function(){let s=arguments;function a(r,o){let l=Object.assign({},r),c=l.className||a.className;n.p=Object.assign({theme:xl&&xl()},l),n.o=/ *go\d+/.test(c),l.className=Fi.apply(n,s)+(c?" "+c:"");let u=t;return t[0]&&(u=l.as||t,delete l.as),vl&&u[0]&&vl(l),Kf(u,l)}return a}}var ty=t=>typeof t=="function",hi=(t,e)=>ty(t)?t(e):t,ny=(()=>{let t=0;return()=>(++t).toString()})(),Yf=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),sy=20,kc="default",Jf=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:s}=e;return Jf(t,{type:t.toasts.find(o=>o.id===s.id)?1:0,toast:s});case 3:let{toastId:a}=e;return{...t,toasts:t.toasts.map(o=>o.id===a||a===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let r=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+r}))}}},zr=[],Zf={toasts:[],pausedAt:void 0,settings:{toastLimit:sy}},qt={},Xf=(t,e=kc)=>{qt[e]=Jf(qt[e]||Zf,t),zr.forEach(([n,s])=>{n===e&&s(qt[e])})},ep=t=>Object.keys(qt).forEach(e=>Xf(t,e)),ay=t=>Object.keys(qt).find(e=>qt[e].toasts.some(n=>n.id===t)),Ii=(t=kc)=>e=>{Xf(e,t)},ry={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},iy=(t={},e=kc)=>{let[n,s]=D.useState(qt[e]||Zf),a=D.useRef(qt[e]);D.useEffect(()=>(a.current!==qt[e]&&s(qt[e]),zr.push([e,s]),()=>{let o=zr.findIndex(([l])=>l===e);o>-1&&zr.splice(o,1)}),[e]);let r=n.toasts.map(o=>{var l,c,u;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((l=t[o.type])==null?void 0:l.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((c=t[o.type])==null?void 0:c.duration)||(t==null?void 0:t.duration)||ry[o.type],style:{...t.style,...(u=t[o.type])==null?void 0:u.style,...o.style}}});return{...n,toasts:r}},oy=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||ny()}),ir=t=>(e,n)=>{let s=oy(e,t,n);return Ii(s.toasterId||ay(s.id))({type:2,toast:s}),s.id},ge=(t,e)=>ir("blank")(t,e);ge.error=ir("error");ge.success=ir("success");ge.loading=ir("loading");ge.custom=ir("custom");ge.dismiss=(t,e)=>{let n={type:3,toastId:t};e?Ii(e)(n):ep(n)};ge.dismissAll=t=>ge.dismiss(void 0,t);ge.remove=(t,e)=>{let n={type:4,toastId:t};e?Ii(e)(n):ep(n)};ge.removeAll=t=>ge.remove(void 0,t);ge.promise=(t,e,n)=>{let s=ge.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(a=>{let r=e.success?hi(e.success,a):void 0;return r?ge.success(r,{id:s,...n,...n==null?void 0:n.success}):ge.dismiss(s),a}).catch(a=>{let r=e.error?hi(e.error,a):void 0;r?ge.error(r,{id:s,...n,...n==null?void 0:n.error}):ge.dismiss(s)}),t};var ly=1e3,cy=(t,e="default")=>{let{toasts:n,pausedAt:s}=iy(t,e),a=D.useRef(new Map).current,r=D.useCallback((m,f=ly)=>{if(a.has(m))return;let h=setTimeout(()=>{a.delete(m),o({type:4,toastId:m})},f);a.set(m,h)},[]);D.useEffect(()=>{if(s)return;let m=Date.now(),f=n.map(h=>{if(h.duration===1/0)return;let p=(h.duration||0)+h.pauseDuration-(m-h.createdAt);if(p<0){h.visible&&ge.dismiss(h.id);return}return setTimeout(()=>ge.dismiss(h.id,e),p)});return()=>{f.forEach(h=>h&&clearTimeout(h))}},[n,s,e]);let o=D.useCallback(Ii(e),[e]),l=D.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=D.useCallback((m,f)=>{o({type:1,toast:{id:m,height:f}})},[o]),u=D.useCallback(()=>{s&&o({type:6,time:Date.now()})},[s,o]),d=D.useCallback((m,f)=>{let{reverseOrder:h=!1,gutter:p=8,defaultPosition:v}=f||{},w=n.filter(g=>(g.position||v)===(m.position||v)&&g.height),S=w.findIndex(g=>g.id===m.id),y=w.filter((g,x)=>x<S&&g.visible).length;return w.filter(g=>g.visible).slice(...h?[y+1]:[0,y]).reduce((g,x)=>g+(x.height||0)+p,0)},[n]);return D.useEffect(()=>{n.forEach(m=>{if(m.dismissed)r(m.id,m.removeDelay);else{let f=a.get(m.id);f&&(clearTimeout(f),a.delete(m.id))}})},[n,r]),{toasts:n,handlers:{updateHeight:c,startPause:l,endPause:u,calculateOffset:d}}},uy=dn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,dy=dn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,my=dn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,fy=qn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${uy} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${dy} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${my} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,py=dn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,hy=qn("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${py} 1s linear infinite;
`,gy=dn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,yy=dn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,xy=qn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${gy} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${yy} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,vy=qn("div")`
  position: absolute;
`,Sy=qn("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,wy=dn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ny=qn("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${wy} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,jy=({toast:t})=>{let{icon:e,type:n,iconTheme:s}=t;return e!==void 0?typeof e=="string"?D.createElement(Ny,null,e):e:n==="blank"?null:D.createElement(Sy,null,D.createElement(hy,{...s}),n!=="loading"&&D.createElement(vy,null,n==="error"?D.createElement(fy,{...s}):D.createElement(xy,{...s})))},by=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Py=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Ry="0%{opacity:0;} 100%{opacity:1;}",_y="0%{opacity:1;} 100%{opacity:0;}",ky=qn("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Cy=qn("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Ty=(t,e)=>{let n=t.includes("top")?1:-1,[s,a]=Yf()?[Ry,_y]:[by(n),Py(n)];return{animation:e?`${dn(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${dn(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Ey=D.memo(({toast:t,position:e,style:n,children:s})=>{let a=t.height?Ty(t.position||e||"top-center",t.visible):{opacity:0},r=D.createElement(jy,{toast:t}),o=D.createElement(Cy,{...t.ariaProps},hi(t.message,t));return D.createElement(ky,{className:t.className,style:{...a,...n,...t.style}},typeof s=="function"?s({icon:r,message:o}):D.createElement(D.Fragment,null,r,o))});ey(D.createElement);var Dy=({id:t,className:e,style:n,onHeightUpdate:s,children:a})=>{let r=D.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;s(t,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return D.createElement("div",{ref:r,className:e,style:n},a)},Ay=(t,e)=>{let n=t.includes("top"),s=n?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Yf()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...s,...a}},My=Fi`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Rr=16,tp=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:s,children:a,toasterId:r,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:u}=cy(n,r);return D.createElement("div",{"data-rht-toaster":r||"",style:{position:"fixed",zIndex:9999,top:Rr,left:Rr,right:Rr,bottom:Rr,pointerEvents:"none",...o},className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(d=>{let m=d.position||e,f=u.calculateOffset(d,{reverseOrder:t,gutter:s,defaultPosition:e}),h=Ay(m,f);return D.createElement(Dy,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?My:"",style:h},d.type==="custom"?hi(d.message,d):a?a(d):D.createElement(Ey,{toast:d,position:m}))}))};const By={},ed=t=>{let e;const n=new Set,s=(d,m)=>{const f=typeof d=="function"?d(e):d;if(!Object.is(f,e)){const h=e;e=m??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(p=>p(e,h))}},a=()=>e,c={setState:s,getState:a,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(By?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(s,a,c);return c},$y=t=>t?ed(t):ed;var np={exports:{}},sp={},ap={exports:{}},rp={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var na=D;function Fy(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Iy=typeof Object.is=="function"?Object.is:Fy,Vy=na.useState,Ly=na.useEffect,Oy=na.useLayoutEffect,zy=na.useDebugValue;function Wy(t,e){var n=e(),s=Vy({inst:{value:n,getSnapshot:e}}),a=s[0].inst,r=s[1];return Oy(function(){a.value=n,a.getSnapshot=e,vo(a)&&r({inst:a})},[t,n,e]),Ly(function(){return vo(a)&&r({inst:a}),t(function(){vo(a)&&r({inst:a})})},[t]),zy(n),n}function vo(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Iy(t,n)}catch{return!0}}function qy(t,e){return e()}var Hy=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?qy:Wy;rp.useSyncExternalStore=na.useSyncExternalStore!==void 0?na.useSyncExternalStore:Hy;ap.exports=rp;var Uy=ap.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vi=D,Qy=Uy;function Gy(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ky=typeof Object.is=="function"?Object.is:Gy,Yy=Qy.useSyncExternalStore,Jy=Vi.useRef,Zy=Vi.useEffect,Xy=Vi.useMemo,ex=Vi.useDebugValue;sp.useSyncExternalStoreWithSelector=function(t,e,n,s,a){var r=Jy(null);if(r.current===null){var o={hasValue:!1,value:null};r.current=o}else o=r.current;r=Xy(function(){function c(h){if(!u){if(u=!0,d=h,h=s(h),a!==void 0&&o.hasValue){var p=o.value;if(a(p,h))return m=p}return m=h}if(p=m,Ky(d,h))return p;var v=s(h);return a!==void 0&&a(p,v)?(d=h,p):(d=h,m=v)}var u=!1,d,m,f=n===void 0?null:n;return[function(){return c(e())},f===null?void 0:function(){return c(f())}]},[e,n,s,a]);var l=Yy(t,r[0],r[1]);return Zy(function(){o.hasValue=!0,o.value=l},[l]),ex(l),l};np.exports=sp;var tx=np.exports;const nx=Cl(tx),ip={},{useDebugValue:sx}=vi,{useSyncExternalStoreWithSelector:ax}=nx;let td=!1;const rx=t=>t;function ix(t,e=rx,n){(ip?"production":void 0)!=="production"&&n&&!td&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),td=!0);const s=ax(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return sx(s),s}const nd=t=>{(ip?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?$y(t):t,n=(s,a)=>ix(e,s,a);return Object.assign(n,e),n},ox=t=>t?nd(t):nd,lx={teams:12,budget:200,scoring:"PPR",rosterPositions:[{position:"QB",player:void 0,required:1},{position:"RB",player:void 0,required:2},{position:"WR",player:void 0,required:2},{position:"TE",player:void 0,required:1},{position:"FLEX",player:void 0,required:1},{position:"DST",player:void 0,required:1},{position:"K",player:void 0,required:1},{position:"BE",player:void 0,required:7}]},pt=ox((t,e)=>({leagueSettings:lx,teams:[],myTeamId:"team_0",draftHistory:[],currentNomination:null,currentBid:0,currentBidder:null,isDraftActive:!1,availablePlayers:[],selectedPlayer:null,initializeDraft:n=>{const s=localStorage.getItem("ffToolTeamNames"),a=s?JSON.parse(s):{},r=[];for(let o=0;o<n.teams;o++){const l=`team_${o}`,c=o===0?"My Team":`Team ${o+1}`;r.push({id:l,name:a[l]||c,budget:n.budget,spent:0,roster:[],maxBid:n.budget-15})}t({leagueSettings:n,teams:r,isDraftActive:!0,draftHistory:[],currentNomination:null,currentBid:0,currentBidder:null})},setMyTeam:n=>t({myTeamId:n}),nominatePlayer:n=>t({currentNomination:n,currentBid:1,currentBidder:null}),placeBid:(n,s)=>{const{teams:a}=e(),r=a.find(o=>o.id===s);!r||r.budget-r.spent<n||t({currentBid:n,currentBidder:s})},completeAuction:(n,s,a)=>{console.log("[DraftStore] completeAuction called:",{player:n.name,price:s,teamId:a}),t(r=>{const o=r.teams.find(m=>m.id===a);if(!o)return console.error(`Team ${a} not found`),r;if(s<=0||s>200)return console.error(`Invalid price: ${s}`),r;if(s>o.budget-o.spent)return console.error(`Price ${s} exceeds remaining budget ${o.budget-o.spent}`),r;if(r.teams.some(m=>m.roster.some(f=>f.player.id===n.id)))return console.error(`Player ${n.name} already drafted`),r;const c={player:n,price:s,team:a,timestamp:Date.now(),nomination:!1},u=r.teams.map(m=>{if(m.id===a){const f=m.spent+s,h=m.roster.length+1,p=Math.max(0,16-h),v=Math.max(0,m.budget-f-p);return{...m,spent:f,roster:[...m.roster,c],maxBid:v}}return m}),d=r.availablePlayers.filter(m=>m.id!==n.id);return console.log("[DraftStore] Draft successful:",{playerName:n.name,price:s,teamName:o.name,newHistoryLength:r.draftHistory.length+1}),{...r,teams:u,draftHistory:[...r.draftHistory,c],availablePlayers:d,currentNomination:null,currentBid:0,currentBidder:null}})},updatePlayerValuations:n=>t({availablePlayers:n}),updateTeamName:(n,s)=>{t(o=>({teams:o.teams.map(l=>l.id===n?{...l,name:s}:l)}));const a=localStorage.getItem("ffToolTeamNames"),r=a?JSON.parse(a):{};r[n]=s,localStorage.setItem("ffToolTeamNames",JSON.stringify(r))},setSelectedPlayer:n=>{t({selectedPlayer:n})},resetDraft:()=>t({teams:[],draftHistory:[],currentNomination:null,currentBid:0,currentBidder:null,isDraftActive:!1,availablePlayers:[]}),undoLastPick:()=>{const{draftHistory:n,teams:s}=e();if(n.length===0)return;const a=n[n.length-1],r=s.map(o=>{if(o.id===a.team){const l=o.spent-a.price,c=o.roster.filter(h=>h.player.id!==a.player.id),u=c.length,m=Math.max(0,16-u),f=Math.max(0,o.budget-l-m);return{...o,spent:l,roster:c,maxBid:f}}return o});t({teams:r,draftHistory:n.slice(0,-1)})}})),cx="modulepreload",ux=function(t){return"/fftool/"+t},sd={},ad=function(e,n,s){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=ux(c),c in sd)return;sd[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":cx,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((f,h)=>{m.addEventListener("load",f),m.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&r(l.reason);return e().catch(r)})};var op=(t=>(t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR",t[t.NONE=4]="NONE",t))(op||{});class dx{constructor(){Q(this,"level");Q(this,"logs",[]);Q(this,"maxLogs",1e3);this.level=this.getLogLevelFromEnv()}getLogLevelFromEnv(){return typeof window<"u"?window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?0:2:1}formatMessage(e,n,s){const a=op[e],r=new Date().toISOString(),o=s?` | ${JSON.stringify(s)}`:"";return`[${r}] [${a}] ${n}${o}`}log(e,n,s,a){if(e<this.level)return;const r={timestamp:new Date,level:e,message:n,context:s,error:a};this.logs.push(r),this.logs.length>this.maxLogs&&this.logs.shift();const o=this.formatMessage(e,n,s);switch(e){case 0:console.debug(o,s);break;case 1:console.info(o,s);break;case 2:console.warn(o,s);break;case 3:console.error(o,a||s),a!=null&&a.stack&&console.error(a.stack);break}}debug(e,n){this.log(0,e,n)}info(e,n){this.log(1,e,n)}warn(e,n){this.log(2,e,n)}error(e,n){n instanceof Error?this.log(3,e,void 0,n):this.log(3,e,n)}setLevel(e){this.level=e}getRecentLogs(e=100){return this.logs.slice(-e)}clearLogs(){this.logs=[]}exportLogs(){return JSON.stringify(this.logs,null,2)}logCSVParse(e,n,s=0){this.info("CSV Parse Complete",{filename:e,rowCount:n,errorCount:s,status:s===0?"success":"partial"})}logValidation(e,n,s){const a=s>0?2:1;this.log(a,`Data Validation: ${e}`,{valid:n,invalid:s,total:n+s,successRate:(n/(n+s)*100).toFixed(2)+"%"})}startTimer(e){const n=performance.now();return()=>{const s=performance.now()-n;this.debug(`Performance: ${e}`,{duration:`${s.toFixed(2)}ms`})}}}const P=new dx;var lp={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,s)=>{t.exports=s()})(Cp,function n(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},a,r=!s.document&&!!s.postMessage,o=s.IS_PAPA_WORKER||!1,l={},c=0,u={};function d(j){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(_){var C=N(_);C.chunkSize=parseInt(C.chunkSize),_.step||_.chunk||(C.chunkSize=null),this._handle=new v(C),(this._handle.streamer=this)._config=C}).call(this,j),this.parseChunk=function(_,C){var E=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<E){let W=this._config.newline;W||(M=this._config.quoteChar||'"',W=this._handle.guessLineEndings(_,M)),_=[..._.split(W).slice(E)].join(W)}this.isFirstChunk&&T(this._config.beforeFirstChunk)&&(M=this._config.beforeFirstChunk(_))!==void 0&&(_=M),this.isFirstChunk=!1,this._halted=!1;var E=this._partialLine+_,M=(this._partialLine="",this._handle.parse(E,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(_=M.meta.cursor,E=(this._finished||(this._partialLine=E.substring(_-this._baseIndex),this._baseIndex=_),M&&M.data&&(this._rowCount+=M.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)s.postMessage({results:M,workerId:u.WORKER_ID,finished:E});else if(T(this._config.chunk)&&!C){if(this._config.chunk(M,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=M=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(M.data),this._completeResults.errors=this._completeResults.errors.concat(M.errors),this._completeResults.meta=M.meta),this._completed||!E||!T(this._config.complete)||M&&M.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),E||M&&M.meta.paused||this._nextChunk(),M}this._halted=!0},this._sendError=function(_){T(this._config.error)?this._config.error(_):o&&this._config.error&&s.postMessage({workerId:u.WORKER_ID,error:_,finished:!1})}}function m(j){var _;(j=j||{}).chunkSize||(j.chunkSize=u.RemoteChunkSize),d.call(this,j),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(C){this._input=C,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(_=new XMLHttpRequest,this._config.withCredentials&&(_.withCredentials=this._config.withCredentials),r||(_.onload=k(this._chunkLoaded,this),_.onerror=k(this._chunkError,this)),_.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var C,E=this._config.downloadRequestHeaders;for(C in E)_.setRequestHeader(C,E[C])}var M;this._config.chunkSize&&(M=this._start+this._config.chunkSize-1,_.setRequestHeader("Range","bytes="+this._start+"-"+M));try{_.send(this._config.downloadRequestBody)}catch(W){this._chunkError(W.message)}r&&_.status===0&&this._chunkError()}},this._chunkLoaded=function(){_.readyState===4&&(_.status<200||400<=_.status?this._chunkError():(this._start+=this._config.chunkSize||_.responseText.length,this._finished=!this._config.chunkSize||this._start>=(C=>(C=C.getResponseHeader("Content-Range"))!==null?parseInt(C.substring(C.lastIndexOf("/")+1)):-1)(_),this.parseChunk(_.responseText)))},this._chunkError=function(C){C=_.statusText||C,this._sendError(new Error(C))}}function f(j){(j=j||{}).chunkSize||(j.chunkSize=u.LocalChunkSize),d.call(this,j);var _,C,E=typeof FileReader<"u";this.stream=function(M){this._input=M,C=M.slice||M.webkitSlice||M.mozSlice,E?((_=new FileReader).onload=k(this._chunkLoaded,this),_.onerror=k(this._chunkError,this)):_=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var M=this._input,W=(this._config.chunkSize&&(W=Math.min(this._start+this._config.chunkSize,this._input.size),M=C.call(M,this._start,W)),_.readAsText(M,this._config.encoding));E||this._chunkLoaded({target:{result:W}})},this._chunkLoaded=function(M){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(M.target.result)},this._chunkError=function(){this._sendError(_.error)}}function h(j){var _;d.call(this,j=j||{}),this.stream=function(C){return _=C,this._nextChunk()},this._nextChunk=function(){var C,E;if(!this._finished)return C=this._config.chunkSize,_=C?(E=_.substring(0,C),_.substring(C)):(E=_,""),this._finished=!_,this.parseChunk(E)}}function p(j){d.call(this,j=j||{});var _=[],C=!0,E=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(M){this._input=M,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){E&&_.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),_.length?this.parseChunk(_.shift()):C=!0},this._streamData=k(function(M){try{_.push(typeof M=="string"?M:M.toString(this._config.encoding)),C&&(C=!1,this._checkIsFinished(),this.parseChunk(_.shift()))}catch(W){this._streamError(W)}},this),this._streamError=k(function(M){this._streamCleanUp(),this._sendError(M)},this),this._streamEnd=k(function(){this._streamCleanUp(),E=!0,this._streamData("")},this),this._streamCleanUp=k(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function v(j){var _,C,E,M,W=Math.pow(2,53),B=-W,H=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,J=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,U=this,I=0,A=0,O=!1,V=!1,R=[],b={data:[],errors:[],meta:{}};function $(K){return j.skipEmptyLines==="greedy"?K.join("").trim()==="":K.length===1&&K[0].length===0}function L(){if(b&&E&&(Y("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),E=!1),j.skipEmptyLines&&(b.data=b.data.filter(function(oe){return!$(oe)})),q()){let oe=function(ee,te){T(j.transformHeader)&&(ee=j.transformHeader(ee,te)),R.push(ee)};var Z=oe;if(b)if(Array.isArray(b.data[0])){for(var K=0;q()&&K<b.data.length;K++)b.data[K].forEach(oe);b.data.splice(0,1)}else b.data.forEach(oe)}function X(oe,ee){for(var te=j.header?{}:[],ce=0;ce<oe.length;ce++){var re=ce,Ae=oe[ce],Ae=((me,Se)=>(Te=>(j.dynamicTypingFunction&&j.dynamicTyping[Te]===void 0&&(j.dynamicTyping[Te]=j.dynamicTypingFunction(Te)),(j.dynamicTyping[Te]||j.dynamicTyping)===!0))(me)?Se==="true"||Se==="TRUE"||Se!=="false"&&Se!=="FALSE"&&((Te=>{if(H.test(Te)&&(Te=parseFloat(Te),B<Te&&Te<W))return 1})(Se)?parseFloat(Se):J.test(Se)?new Date(Se):Se===""?null:Se):Se)(re=j.header?ce>=R.length?"__parsed_extra":R[ce]:re,Ae=j.transform?j.transform(Ae,re):Ae);re==="__parsed_extra"?(te[re]=te[re]||[],te[re].push(Ae)):te[re]=Ae}return j.header&&(ce>R.length?Y("FieldMismatch","TooManyFields","Too many fields: expected "+R.length+" fields but parsed "+ce,A+ee):ce<R.length&&Y("FieldMismatch","TooFewFields","Too few fields: expected "+R.length+" fields but parsed "+ce,A+ee)),te}var de;b&&(j.header||j.dynamicTyping||j.transform)&&(de=1,!b.data.length||Array.isArray(b.data[0])?(b.data=b.data.map(X),de=b.data.length):b.data=X(b.data,0),j.header&&b.meta&&(b.meta.fields=R),A+=de)}function q(){return j.header&&R.length===0}function Y(K,X,de,Z){K={type:K,code:X,message:de},Z!==void 0&&(K.row=Z),b.errors.push(K)}T(j.step)&&(M=j.step,j.step=function(K){b=K,q()?L():(L(),b.data.length!==0&&(I+=K.data.length,j.preview&&I>j.preview?C.abort():(b.data=b.data[0],M(b,U))))}),this.parse=function(K,X,de){var Z=j.quoteChar||'"',Z=(j.newline||(j.newline=this.guessLineEndings(K,Z)),E=!1,j.delimiter?T(j.delimiter)&&(j.delimiter=j.delimiter(K),b.meta.delimiter=j.delimiter):((Z=((oe,ee,te,ce,re)=>{var Ae,me,Se,Te;re=re||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var xs=0;xs<re.length;xs++){for(var Bt,ia=re[xs],Oe=0,$t=0,Me=0,tt=(Se=void 0,new S({comments:ce,delimiter:ia,newline:ee,preview:10}).parse(oe)),Gt=0;Gt<tt.data.length;Gt++)te&&$(tt.data[Gt])?Me++:(Bt=tt.data[Gt].length,$t+=Bt,Se===void 0?Se=Bt:0<Bt&&(Oe+=Math.abs(Bt-Se),Se=Bt));0<tt.data.length&&($t/=tt.data.length-Me),(me===void 0||Oe<=me)&&(Te===void 0||Te<$t)&&1.99<$t&&(me=Oe,Ae=ia,Te=$t)}return{successful:!!(j.delimiter=Ae),bestDelimiter:Ae}})(K,j.newline,j.skipEmptyLines,j.comments,j.delimitersToGuess)).successful?j.delimiter=Z.bestDelimiter:(E=!0,j.delimiter=u.DefaultDelimiter),b.meta.delimiter=j.delimiter),N(j));return j.preview&&j.header&&Z.preview++,_=K,C=new S(Z),b=C.parse(_,X,de),L(),O?{meta:{paused:!0}}:b||{meta:{paused:!1}}},this.paused=function(){return O},this.pause=function(){O=!0,C.abort(),_=T(j.chunk)?"":_.substring(C.getCharIndex())},this.resume=function(){U.streamer._halted?(O=!1,U.streamer.parseChunk(_,!0)):setTimeout(U.resume,3)},this.aborted=function(){return V},this.abort=function(){V=!0,C.abort(),b.meta.aborted=!0,T(j.complete)&&j.complete(b),_=""},this.guessLineEndings=function(oe,Z){oe=oe.substring(0,1048576);var Z=new RegExp(w(Z)+"([^]*?)"+w(Z),"gm"),de=(oe=oe.replace(Z,"")).split("\r"),Z=oe.split(`
`),oe=1<Z.length&&Z[0].length<de[0].length;if(de.length===1||oe)return`
`;for(var ee=0,te=0;te<de.length;te++)de[te][0]===`
`&&ee++;return ee>=de.length/2?`\r
`:"\r"}}function w(j){return j.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function S(j){var _=(j=j||{}).delimiter,C=j.newline,E=j.comments,M=j.step,W=j.preview,B=j.fastMode,H=null,J=!1,U=j.quoteChar==null?'"':j.quoteChar,I=U;if(j.escapeChar!==void 0&&(I=j.escapeChar),(typeof _!="string"||-1<u.BAD_DELIMITERS.indexOf(_))&&(_=","),E===_)throw new Error("Comment character same as delimiter");E===!0?E="#":(typeof E!="string"||-1<u.BAD_DELIMITERS.indexOf(E))&&(E=!1),C!==`
`&&C!=="\r"&&C!==`\r
`&&(C=`
`);var A=0,O=!1;this.parse=function(V,R,b){if(typeof V!="string")throw new Error("Input must be a string");var $=V.length,L=_.length,q=C.length,Y=E.length,K=T(M),X=[],de=[],Z=[],oe=A=0;if(!V)return Oe();if(B||B!==!1&&V.indexOf(U)===-1){for(var ee=V.split(C),te=0;te<ee.length;te++){if(Z=ee[te],A+=Z.length,te!==ee.length-1)A+=C.length;else if(b)return Oe();if(!E||Z.substring(0,Y)!==E){if(K){if(X=[],Te(Z.split(_)),$t(),O)return Oe()}else Te(Z.split(_));if(W&&W<=te)return X=X.slice(0,W),Oe(!0)}}return Oe()}for(var ce=V.indexOf(_,A),re=V.indexOf(C,A),Ae=new RegExp(w(I)+w(U),"g"),me=V.indexOf(U,A);;)if(V[A]===U)for(me=A,A++;;){if((me=V.indexOf(U,me+1))===-1)return b||de.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:X.length,index:A}),Bt();if(me===$-1)return Bt(V.substring(A,me).replace(Ae,U));if(U===I&&V[me+1]===I)me++;else if(U===I||me===0||V[me-1]!==I){ce!==-1&&ce<me+1&&(ce=V.indexOf(_,me+1));var Se=xs((re=re!==-1&&re<me+1?V.indexOf(C,me+1):re)===-1?ce:Math.min(ce,re));if(V.substr(me+1+Se,L)===_){Z.push(V.substring(A,me).replace(Ae,U)),V[A=me+1+Se+L]!==U&&(me=V.indexOf(U,A)),ce=V.indexOf(_,A),re=V.indexOf(C,A);break}if(Se=xs(re),V.substring(me+1+Se,me+1+Se+q)===C){if(Z.push(V.substring(A,me).replace(Ae,U)),ia(me+1+Se+q),ce=V.indexOf(_,A),me=V.indexOf(U,A),K&&($t(),O))return Oe();if(W&&X.length>=W)return Oe(!0);break}de.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:X.length,index:A}),me++}}else if(E&&Z.length===0&&V.substring(A,A+Y)===E){if(re===-1)return Oe();A=re+q,re=V.indexOf(C,A),ce=V.indexOf(_,A)}else if(ce!==-1&&(ce<re||re===-1))Z.push(V.substring(A,ce)),A=ce+L,ce=V.indexOf(_,A);else{if(re===-1)break;if(Z.push(V.substring(A,re)),ia(re+q),K&&($t(),O))return Oe();if(W&&X.length>=W)return Oe(!0)}return Bt();function Te(Me){X.push(Me),oe=A}function xs(Me){var tt=0;return tt=Me!==-1&&(Me=V.substring(me+1,Me))&&Me.trim()===""?Me.length:tt}function Bt(Me){return b||(Me===void 0&&(Me=V.substring(A)),Z.push(Me),A=$,Te(Z),K&&$t()),Oe()}function ia(Me){A=Me,Te(Z),Z=[],re=V.indexOf(C,A)}function Oe(Me){if(j.header&&!R&&X.length&&!J){var tt=X[0],Gt=Object.create(null),qi=new Set(tt);let Bc=!1;for(let vs=0;vs<tt.length;vs++){let Ft=tt[vs];if(Gt[Ft=T(j.transformHeader)?j.transformHeader(Ft,vs):Ft]){let oa,$c=Gt[Ft];for(;oa=Ft+"_"+$c,$c++,qi.has(oa););qi.add(oa),tt[vs]=oa,Gt[Ft]++,Bc=!0,(H=H===null?{}:H)[oa]=Ft}else Gt[Ft]=1,tt[vs]=Ft;qi.add(Ft)}Bc&&console.warn("Duplicate headers found and renamed."),J=!0}return{data:X,errors:de,meta:{delimiter:_,linebreak:C,aborted:O,truncated:!!Me,cursor:oe+(R||0),renamedHeaders:H}}}function $t(){M(Oe()),X=[],de=[]}},this.abort=function(){O=!0},this.getCharIndex=function(){return A}}function y(j){var _=j.data,C=l[_.workerId],E=!1;if(_.error)C.userError(_.error,_.file);else if(_.results&&_.results.data){var M={abort:function(){E=!0,g(_.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:x,resume:x};if(T(C.userStep)){for(var W=0;W<_.results.data.length&&(C.userStep({data:_.results.data[W],errors:_.results.errors,meta:_.results.meta},M),!E);W++);delete _.results}else T(C.userChunk)&&(C.userChunk(_.results,M,_.file),delete _.results)}_.finished&&!E&&g(_.workerId,_.results)}function g(j,_){var C=l[j];T(C.userComplete)&&C.userComplete(_),C.terminate(),delete l[j]}function x(){throw new Error("Not implemented.")}function N(j){if(typeof j!="object"||j===null)return j;var _,C=Array.isArray(j)?[]:{};for(_ in j)C[_]=N(j[_]);return C}function k(j,_){return function(){j.apply(_,arguments)}}function T(j){return typeof j=="function"}return u.parse=function(j,_){var C=(_=_||{}).dynamicTyping||!1;if(T(C)&&(_.dynamicTypingFunction=C,C={}),_.dynamicTyping=C,_.transform=!!T(_.transform)&&_.transform,!_.worker||!u.WORKERS_SUPPORTED)return C=null,u.NODE_STREAM_INPUT,typeof j=="string"?(j=(E=>E.charCodeAt(0)!==65279?E:E.slice(1))(j),C=new(_.download?m:h)(_)):j.readable===!0&&T(j.read)&&T(j.on)?C=new p(_):(s.File&&j instanceof File||j instanceof Object)&&(C=new f(_)),C.stream(j);(C=(()=>{var E;return!!u.WORKERS_SUPPORTED&&(E=(()=>{var M=s.URL||s.webkitURL||null,W=n.toString();return u.BLOB_URL||(u.BLOB_URL=M.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",W,")();"],{type:"text/javascript"})))})(),(E=new s.Worker(E)).onmessage=y,E.id=c++,l[E.id]=E)})()).userStep=_.step,C.userChunk=_.chunk,C.userComplete=_.complete,C.userError=_.error,_.step=T(_.step),_.chunk=T(_.chunk),_.complete=T(_.complete),_.error=T(_.error),delete _.worker,C.postMessage({input:j,config:_,workerId:C.id})},u.unparse=function(j,_){var C=!1,E=!0,M=",",W=`\r
`,B='"',H=B+B,J=!1,U=null,I=!1,A=((()=>{if(typeof _=="object"){if(typeof _.delimiter!="string"||u.BAD_DELIMITERS.filter(function(R){return _.delimiter.indexOf(R)!==-1}).length||(M=_.delimiter),typeof _.quotes!="boolean"&&typeof _.quotes!="function"&&!Array.isArray(_.quotes)||(C=_.quotes),typeof _.skipEmptyLines!="boolean"&&typeof _.skipEmptyLines!="string"||(J=_.skipEmptyLines),typeof _.newline=="string"&&(W=_.newline),typeof _.quoteChar=="string"&&(B=_.quoteChar),typeof _.header=="boolean"&&(E=_.header),Array.isArray(_.columns)){if(_.columns.length===0)throw new Error("Option columns is empty");U=_.columns}_.escapeChar!==void 0&&(H=_.escapeChar+B),_.escapeFormulae instanceof RegExp?I=_.escapeFormulae:typeof _.escapeFormulae=="boolean"&&_.escapeFormulae&&(I=/^[=+\-@\t\r].*$/)}})(),new RegExp(w(B),"g"));if(typeof j=="string"&&(j=JSON.parse(j)),Array.isArray(j)){if(!j.length||Array.isArray(j[0]))return O(null,j,J);if(typeof j[0]=="object")return O(U||Object.keys(j[0]),j,J)}else if(typeof j=="object")return typeof j.data=="string"&&(j.data=JSON.parse(j.data)),Array.isArray(j.data)&&(j.fields||(j.fields=j.meta&&j.meta.fields||U),j.fields||(j.fields=Array.isArray(j.data[0])?j.fields:typeof j.data[0]=="object"?Object.keys(j.data[0]):[]),Array.isArray(j.data[0])||typeof j.data[0]=="object"||(j.data=[j.data])),O(j.fields||[],j.data||[],J);throw new Error("Unable to serialize unrecognized input");function O(R,b,$){var L="",q=(typeof R=="string"&&(R=JSON.parse(R)),typeof b=="string"&&(b=JSON.parse(b)),Array.isArray(R)&&0<R.length),Y=!Array.isArray(b[0]);if(q&&E){for(var K=0;K<R.length;K++)0<K&&(L+=M),L+=V(R[K],K);0<b.length&&(L+=W)}for(var X=0;X<b.length;X++){var de=(q?R:b[X]).length,Z=!1,oe=q?Object.keys(b[X]).length===0:b[X].length===0;if($&&!q&&(Z=$==="greedy"?b[X].join("").trim()==="":b[X].length===1&&b[X][0].length===0),$==="greedy"&&q){for(var ee=[],te=0;te<de;te++){var ce=Y?R[te]:te;ee.push(b[X][ce])}Z=ee.join("").trim()===""}if(!Z){for(var re=0;re<de;re++){0<re&&!oe&&(L+=M);var Ae=q&&Y?R[re]:re;L+=V(b[X][Ae],re)}X<b.length-1&&(!$||0<de&&!oe)&&(L+=W)}}return L}function V(R,b){var $,L;return R==null?"":R.constructor===Date?JSON.stringify(R).slice(1,25):(L=!1,I&&typeof R=="string"&&I.test(R)&&(R="'"+R,L=!0),$=R.toString().replace(A,H),(L=L||C===!0||typeof C=="function"&&C(R,b)||Array.isArray(C)&&C[b]||((q,Y)=>{for(var K=0;K<Y.length;K++)if(-1<q.indexOf(Y[K]))return!0;return!1})($,u.BAD_DELIMITERS)||-1<$.indexOf(M)||$.charAt(0)===" "||$.charAt($.length-1)===" ")?B+$+B:$)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!r&&!!s.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=S,u.ParserHandle=v,u.NetworkStreamer=m,u.FileStreamer=f,u.StringStreamer=h,u.ReadableStreamStreamer=p,s.jQuery&&((a=s.jQuery).fn.parse=function(j){var _=j.config||{},C=[];return this.each(function(W){if(!(a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var B=0;B<this.files.length;B++)C.push({file:this.files[B],inputElem:this,instanceConfig:a.extend({},_)})}),E(),this;function E(){if(C.length===0)T(j.complete)&&j.complete();else{var W,B,H,J,U=C[0];if(T(j.before)){var I=j.before(U.file,U.inputElem);if(typeof I=="object"){if(I.action==="abort")return W="AbortError",B=U.file,H=U.inputElem,J=I.reason,void(T(j.error)&&j.error({name:W},B,H,J));if(I.action==="skip")return void M();typeof I.config=="object"&&(U.instanceConfig=a.extend(U.instanceConfig,I.config))}else if(I==="skip")return void M()}var A=U.instanceConfig.complete;U.instanceConfig.complete=function(O){T(A)&&A(O,U.file,U.inputElem),M()},u.parse(U.file,U.instanceConfig)}}function M(){C.splice(0,1),E()}}),o&&(s.onmessage=function(j){j=j.data,u.WORKER_ID===void 0&&j&&(u.WORKER_ID=j.workerId),typeof j.input=="string"?s.postMessage({workerId:u.WORKER_ID,results:u.parse(j.input,j.config),finished:!0}):(s.File&&j.input instanceof File||j.input instanceof Object)&&(j=u.parse(j.input,j.config))&&s.postMessage({workerId:u.WORKER_ID,results:j,finished:!0})}),(m.prototype=Object.create(d.prototype)).constructor=m,(f.prototype=Object.create(d.prototype)).constructor=f,(h.prototype=Object.create(h.prototype)).constructor=h,(p.prototype=Object.create(d.prototype)).constructor=p,u})})(lp);var mx=lp.exports;const Cc=Cl(mx),cp=new Set(["","NA","N/A","n/a","null","NULL","None","NONE","nan","NaN","#N/A","#NULL!","--","-","undefined","#VALUE!","#ERROR!","nil","NIL","missing","MISSING"]),fx={header:!0,dynamicTyping:!1,skipEmptyLines:"greedy",transformHeader:t=>t.trim(),transform:t=>t.trim(),delimiter:"",encoding:"UTF-8",comments:!1,fastMode:!1,delimitersToGuess:[",","	","|",";"]};function Tc(t,e=null){if(t==null)return e;const n=String(t).trim();if(cp.has(n))return null;const s=n.replace(/[$£€¥]/g,"").replace(/,/g,"").replace(/%$/g,""),a=Number(s);return!isNaN(a)&&isFinite(a)?n.endsWith("%")?a/100:a:e}function ot(t,e=null){const n=Tc(t,e);return n!==null?Math.round(n):null}function ne(t,e=null,n=null){const s=Tc(t,n);return s!==null&&e!==null?Math.round(s*Math.pow(10,e))/Math.pow(10,e):s}function Li(t){if(t==null)return!0;const e=String(t).trim();return cp.has(e)}function px(t,e=null){if(Li(t))return e;const n=String(t).trim().toLowerCase();return["true","1","yes","y","on","enabled"].includes(n)?!0:["false","0","no","n","off","disabled"].includes(n)?!1:e}function gt(t,e=null){return Li(t)?e:String(t).trim()}function Sl(t,e){const n={...fx,...e};return Cc.parse(t,n)}function hx(t,e){const n=[],s=[];for(const a of e){const r=t[a.name],o=Li(r);if(a.required&&o){n.push(`Required field '${a.name}' is missing`);continue}if(!(o&&!a.required))switch(a.type){case"number":const l=Tc(r);l===null&&!o?n.push(`Field '${a.name}' is not a valid number: ${r}`):l!==null&&(a.min!==void 0&&l<a.min&&s.push(`Field '${a.name}' value ${l} is below minimum ${a.min}`),a.max!==void 0&&l>a.max&&s.push(`Field '${a.name}' value ${l} is above maximum ${a.max}`));break;case"string":const c=gt(r);c&&a.pattern&&!a.pattern.test(c)&&s.push(`Field '${a.name}' value doesn't match expected pattern`),c&&a.allowedValues&&!a.allowedValues.includes(c)&&n.push(`Field '${a.name}' value '${c}' is not in allowed values`);break;case"boolean":px(r)===null&&!o&&n.push(`Field '${a.name}' is not a valid boolean: ${r}`);break;case"date":const d=Date.parse(String(r));isNaN(d)&&!o&&n.push(`Field '${a.name}' is not a valid date: ${r}`);break}}return{valid:n.length===0,errors:n,warnings:s}}function gx(t){const e={};if(t.length===0)return e;const n=Object.keys(t[0]);return n.forEach(s=>e[s]=0),t.forEach(s=>{n.forEach(a=>{Li(s[a])&&e[a]++})}),e}function yx(t){if(t.length===0)return{totalRows:0,totalColumns:0,totalCells:0,nullCells:0,completenessPercentage:100,columnCompleteness:{}};const e=Object.keys(t[0]),n=t.length,s=e.length,a=n*s,r=gx(t),o=Object.values(r).reduce((c,u)=>c+u,0),l={};return e.forEach(c=>{const u=n-r[c];l[c]=u/n*100}),{totalRows:n,totalColumns:s,totalCells:a,nullCells:o,completenessPercentage:(a-o)/a*100,columnCompleteness:l}}const xx=[{name:"playerName",type:"string",required:!0},{name:"position",type:"string",required:!0,allowedValues:["QB","RB","WR","TE","DST","K"]},{name:"teamName",type:"string",required:!0,pattern:/^[A-Z]{2,3}$/},{name:"byeWeek",type:"number",required:!1,min:1,max:18},{name:"fantasyPoints",type:"number",required:!0,min:0,max:600},{name:"games",type:"number",required:!1,min:0,max:17},{name:"passYds",type:"number",required:!1,min:0,max:6e3},{name:"passTd",type:"number",required:!1,min:0,max:60},{name:"passInt",type:"number",required:!1,min:0,max:40},{name:"rushYds",type:"number",required:!1,min:0,max:2500},{name:"rushTd",type:"number",required:!1,min:0,max:30},{name:"recvReceptions",type:"number",required:!1,min:0,max:150},{name:"recvYds",type:"number",required:!1,min:0,max:2e3},{name:"recvTd",type:"number",required:!1,min:0,max:20},{name:"recvTargets",type:"number",required:!1,min:0,max:200},{name:"auctionValue",type:"number",required:!1,min:0,max:100}],vx=[{name:"Overall Rank",type:"number",required:!0,min:1,max:500},{name:"Full Name",type:"string",required:!0},{name:"Team Abbreviation",type:"string",required:!0,pattern:/^[A-Z]{2,3}$/},{name:"Position",type:"string",required:!0,allowedValues:["QB","RB","WR","TE","DST","K","FB"]},{name:"Position Rank",type:"number",required:!1,min:1,max:100},{name:"ADP",type:"number",required:!1,min:1,max:500},{name:"Auction Value",type:"number",required:!1,min:0,max:300},{name:"Bye Week",type:"number",required:!1,min:1,max:18},{name:"Is Rookie",type:"string",required:!1,allowedValues:["Yes","No"]}],Sx=[{name:"Name",type:"string",required:!0},{name:"Team",type:"string",required:!0},{name:"Pos",type:"string",required:!0},{name:"ESPN",type:"number",required:!1,min:1,max:500},{name:"Sleeper",type:"number",required:!1,min:1,max:500},{name:"Fantrax",type:"number",required:!1,min:1,max:500},{name:"MFL",type:"number",required:!1,min:1,max:500},{name:"NFFC",type:"number",required:!1,min:1,max:500},{name:"ESPN_AAV",type:"number",required:!1,min:0,max:300},{name:"MFL_AAV",type:"number",required:!1,min:0,max:300}],wx=[{name:"Name",type:"string",required:!0},{name:"Age",type:"number",required:!1,min:18,max:45},{name:"Status",type:"string",required:!1},{name:"Fantasy Score",type:"number",required:!1,min:0,max:600}],Nx=[{name:"ADP",type:"number",required:!1,min:1,max:500},{name:"Player",type:"string",required:!0},{name:"Team",type:"string",required:!0},{name:"Position",type:"string",required:!0}],jx=[{name:"Team",type:"string",required:!0},{name:"SOS_Rank",type:"number",required:!0,min:1,max:32},{name:"SOS_Percentage",type:"number",required:!0,min:0,max:1},{name:"SOS_Normalized",type:"number",required:!0,min:0,max:10}],bx=[{name:"player",type:"string",required:!0},{name:"team",type:"string",required:!0},{name:"Games",type:"number",required:!1,min:0,max:17},{name:"Completions",type:"number",required:!1,min:0,max:500},{name:"Attempts",type:"number",required:!1,min:0,max:750},{name:"Passing Yards",type:"number",required:!1,min:0,max:6e3},{name:"Passing TDs",type:"number",required:!1,min:0,max:60},{name:"Interceptions",type:"number",required:!1,min:0,max:40},{name:"Fantasy Points",type:"number",required:!1,min:0,max:600}],Px=[{name:"player",type:"string",required:!0},{name:"team",type:"string",required:!0},{name:"position",type:"string",required:!0},{name:"Games",type:"number",required:!1,min:0,max:17},{name:"Rushing Attempts",type:"number",required:!1,min:0,max:400},{name:"Rushing Yards",type:"number",required:!1,min:-100,max:2500},{name:"Rushing TDs",type:"number",required:!1,min:0,max:30},{name:"Receptions",type:"number",required:!1,min:0,max:150},{name:"Targets",type:"number",required:!1,min:0,max:200},{name:"Receiving Yards",type:"number",required:!1,min:0,max:2e3},{name:"Receiving TDs",type:"number",required:!1,min:0,max:20},{name:"Fantasy Points",type:"number",required:!1,min:0,max:600}],Rx=[{name:"setting",type:"string",required:!0},{name:"value",type:"string",required:!0}],_x=[{name:"category",type:"string",required:!0},{name:"stat",type:"string",required:!0},{name:"points",type:"number",required:!0,min:-10,max:10}],kx=[{name:"position",type:"string",required:!0},{name:"rank",type:"number",required:!0,min:1,max:100}],Cx=[{name:"position",type:"string",required:!0},{name:"multiplier",type:"number",required:!0,min:.5,max:2}],Tx=[{name:"tier",type:"string",required:!0},{name:"multiplier",type:"number",required:!0,min:.8,max:1.5}],Ex=[{name:"source",type:"string",required:!0},{name:"weight",type:"number",required:!0,min:0,max:1}],Dx=[{name:"position",type:"string",required:!0},{name:"percentage",type:"number",required:!0,min:0,max:100}],Ax=[{name:"tier",type:"string",required:!0},{name:"min_multiplier",type:"number",required:!0,min:.5,max:1.5},{name:"max_multiplier",type:"number",required:!0,min:.8,max:2}],Mx={"projections_2025.csv":xx,"adp0_2025.csv":vx,"adp1_2025.csv":Sx,"adp2_2025.csv":wx,"adp3_2025.csv":Nx,"sos_2025.csv":jx,"fantasy-stats-passing_2024.csv":bx,"fantasy-stats-receiving_rushing_2024.csv":Px,"league_settings.csv":Rx,"scoring_system.csv":_x,"replacement_levels.csv":kx,"market_adjustments.csv":Cx,"tier_multipliers.csv":Tx,"projection_weights.csv":Ex,"budget_allocation.csv":Dx,"bid_ranges.csv":Ax};function Bx(t){const e=t.split("/").pop()||t;return Mx[e]||null}const ke=class ke{constructor(){Q(this,"manifest",null)}async loadManifest(){var e;if(this.manifest)return this.manifest;try{const n=await fetch(ke.MANIFEST_PATH);if(!n.ok)throw new Error(`Failed to load manifest: ${n.statusText}`);return this.manifest=await n.json(),(e=this.manifest)!=null&&e.integrity_verified||P.warn("Data integrity not verified in manifest"),P.info("Data manifest loaded successfully",{version:this.manifest.version,files:Object.keys(this.manifest.files).length,generated_at:this.manifest.generated_at}),this.manifest}catch(n){throw P.error("Failed to load data manifest",{error:n}),new Error("Data manifest not available. Please run the ETL pipeline first.")}}isCacheFresh(e){const n=ke.cache.get(e);return n?Date.now()-n.timestamp<ke.CACHE_TTL:!1}async loadCleanCSV(e,n){if(this.isCacheFresh(e))return P.info(`Loading ${e} from cache`),ke.cache.get(e).data;try{const s=`${ke.CLEAN_DATA_PATH}/${e}`,a=await fetch(s);if(!a.ok)throw new Error(`Failed to load ${e}: ${a.statusText}`);const r=await a.text(),o=Sl(r,{header:!0,dynamicTyping:!1,skipEmptyLines:"greedy"});o.errors.length>0&&P.warn(`Errors parsing ${e}:`,o.errors);let l=o.data;const c=Bx(e);if(c){let u=0,d=0,m=0;l.forEach((h,p)=>{const v=hx(h,c);v.valid?u++:(m+=v.errors.length,v.errors.length>0&&p<5&&P.warn(`Row ${p+1} validation errors in ${e}:`,v.errors)),d+=v.warnings.length});const f=yx(l);P.info(`Schema validation for ${e}: ${u}/${l.length} valid rows, ${m} errors, ${d} warnings, ${f.completenessPercentage.toFixed(1)}% complete`)}return n&&(l=l.map((u,d)=>n(u,d))),ke.cache.set(e,{data:l,timestamp:Date.now()}),P.info(`Loaded ${l.length} rows from ${e}`),l}catch(s){throw P.error(`Failed to load ${e}:`,s),s}}async loadAllCleanData(){const e=performance.now(),n=[],s=[];try{const a=await this.loadManifest();if(!a.files||Object.keys(a.files).length===0)throw new Error("No clean data files available. Please run the ETL pipeline.");Date.now()-new Date(a.generated_at).getTime()>24*60*60*1e3&&s.push("Data is more than 24 hours old. Consider running the ETL pipeline."),P.info("Loading clean data from artifacts...");const[o,l,c,u]=await Promise.all([this.loadProjections(),this.loadADPData(),this.loadHistoricalStats(),this.loadPreseasonRankings()]),d={adpData:l,projections:o,historicalStats:c,players:this.buildPlayersList(o,l),teamMetrics:new Map,teamComposites:new Map,playerAdvanced:new Map,playerStats:new Map,depthCharts:{teams:[],byPlayer:new Map,byTeam:new Map},deduplicationReport:{adpConflicts:[],projectionConflicts:[],dataQualityScore:this.calculateDataQualityScore(a),flaggedForReview:[]},positionEligibility:new Map,advancedStats:[],teamData:[],scheduleData:null},m=performance.now()-e;return P.info(`Clean data loaded successfully in ${m.toFixed(2)}ms`),{success:!0,data:d,manifest:a,errors:n,warnings:s,loadTime:m}}catch(a){const r=a instanceof Error?a.message:String(a);return n.push(r),P.error("Failed to load clean data:",a),{success:!1,data:this.getEmptyData(),manifest:this.getEmptyManifest(),errors:n,warnings:s,loadTime:performance.now()-e}}}async buildSOSMap(){const e=new Map;try{P.info("Attempting to load SOS data from sos_2025.csv");const n=await this.loadCleanCSV("sos_2025.csv");P.info(`Loaded ${n.length} rows from sos_2025.csv`),n.length>0&&P.info("First SOS row:",JSON.stringify(n[0])),n.forEach(a=>{if(a.Team){const r=a.Team,o=ne(a.SOS_Normalized,null,0);e.set(r,o),console.log(`SOS Loaded: ${r} = ${o}`),(r==="DET"||r==="GB"||r==="SF"||r==="NYG")&&P.info(`SOS Debug: ${r}, SOS = ${o}`)}}),P.info(`Built SOS map for ${e.size} teams`),["DET","GB","SF","JAX","NYG"].forEach(a=>{e.has(a)&&P.info(`SOS Map contains ${a}: ${e.get(a)}`)})}catch(n){P.error("Failed to load SOS data:",n),console.error("SOS Loading Error:",n);try{const a="/fftool/artifacts/clean_data/sos_2025.csv";P.info(`Trying alternative SOS path: ${a}`);const r=await fetch(a);if(!r.ok)throw new Error(`Failed to fetch SOS from ${a}: ${r.status}`);const o=await r.text(),l=Sl(o,{header:!0,skipEmptyLines:"greedy"});l.data&&l.data.length>0&&(P.info(`Loaded ${l.data.length} rows from alternative path`),l.data.forEach(c=>{if(c.Team){const u=c.Team,d=ne(c.SOS_Normalized,null,0);e.set(u,d)}}),P.info(`Built SOS map for ${e.size} teams from alternative path`))}catch(s){P.error("Alternative SOS loading also failed:",s)}}return e}async loadProjections(){const e=await this.buildSOSMap();return this.loadCleanCSV("projections_2025_with_adp.csv",n=>{const s=gt(n.teamName)||"",a=e.get(s)||0;return n.playerName&&(n.playerName.includes("Mahomes")||n.playerName.includes("Jefferson")||n.playerName.includes("McCaffrey"))&&console.log(`Player SOS mapping: ${n.playerName} (${s}) -> SOS = ${a}`),{id:`${n.playerName}_${n.position}_${n.teamName}`.toLowerCase(),name:gt(n.playerName)||"",position:gt(n.position)||"",team:s,byeWeek:ot(n.byeWeek)||void 0,projectedPoints:ne(n.fantasyPoints,2,null)??0,teamSeasonSOS:a,games:ne(n.games,1,null)??0,passingYards:ne(n.passYds,1,null)??0,passingTDs:ne(n.passTd,1,null)??0,passingINTs:ne(n.passInt,1,null)??0,rushingYards:ne(n.rushYds,1,null)??0,rushingTDs:ne(n.rushTd,1,null)??0,receptions:ne(n.recvReceptions,1,null)??0,receivingYards:ne(n.recvYds,1,null)??0,receivingTDs:ne(n.recvTd,1,null)??0,confidence:.85,marketValue:(()=>{const r=ot(n.marketValue)??1;return n.playerName==="Breece Hall"&&console.log("[DEBUG] Breece Hall marketValue:",{raw:n.marketValue,parsed:r,auctionValue:n.auctionValue}),r})()}})}async loadADPData(){const e=await this.buildSOSMap(),n=new Map,s=(o,l,c)=>`${o}_${l}_${c}`.toLowerCase().replace(/[^a-z0-9_]/g,""),a=await this.loadCleanCSV("adp0_2025.csv",o=>({id:`${o["Full Name"]}_${o.Position}_${o["Team Abbreviation"]}`.toLowerCase(),name:gt(o["Full Name"])||"",position:gt(o.Position)||"",team:gt(o["Team Abbreviation"])||"",adp:ne(o.ADP,2)??999,adpRank:ot(o["Overall Rank"])??999,auctionValue:ot(o["Auction Value"])??1,isRookie:o["Is Rookie"]==="Yes",byeWeek:ot(o["Bye Week"])||void 0,positionRank:ot(o["Position Rank"])??999,overallRank:ot(o["Overall Rank"])??999,teamSeasonSOS:e.get(o["Team Abbreviation"])||0,age:void 0,adpSources:[]}));a.forEach(o=>{const l=s(o.name,o.team,o.position);n.set(l,{player:o,adpValues:[{source:"adp0",value:o.adp}]})});try{const o=await this.loadCleanCSV("adp2_2025.csv",c=>({name:gt(c.Name),age:ot(c.Age)||void 0,status:gt(c.Status)||"Healthy",fantasyScore:ne(c["Fantasy Score"],2)||void 0})),l=new Map;o.forEach(c=>{if(c.name){const u=c.name.toLowerCase().replace(/[^a-z]/g,"");l.set(u,c)}}),a.forEach(c=>{const u=c.name.toLowerCase().replace(/[^a-z]/g,""),d=l.get(u);if(d){c.age=d.age;const m={Healthy:null,Questionable:"Q",Doubtful:"D",Out:"O",IR:"IR",PUP:"PUP",Suspended:"SUS"};c.injuryStatus=m[d.status]||null,c.fantasyScore=d.fantasyScore}})}catch(o){P.warn("Could not load supplemental data from adp2_2025.csv:",o)}try{const o=await this.loadCleanCSV("adp1_2025.csv",l=>{const c=u=>ne(u,2)??999;return{name:l.Name,team:l.Team,position:l.Pos,espn:c(l.ESPN),sleeper:c(l.Sleeper),fantrax:c(l.Fantrax),mfl:c(l.MFL),nffc:c(l.NFFC),aav:c(l.ESPN_AAV||l.MFL_AAV||"1")}});o.forEach(l=>{if(l.name&&l.team&&l.position){const c=s(l.name,l.team,l.position),u=n.get(c),d=[l.espn,l.sleeper,l.fantrax,l.mfl,l.nffc].filter(m=>m&&m<500);if(d.length===0&&l.name)u?u.adpValues.push({source:"adp1",value:300}):n.set(c,{player:{id:`${l.name}_${l.position}_${l.team}`.toLowerCase(),name:l.name,position:l.position,team:l.team,adp:300,adpRank:300,auctionValue:l.aav&&l.aav<999?Math.round(l.aav):1,isRookie:!1,byeWeek:void 0,positionRank:999,overallRank:300,age:void 0,adpSources:[]},adpValues:[{source:"adp1",value:300}]});else if(d.length>0){const m=d.reduce((f,h)=>f+h,0)/d.length;u?(u.adpValues.push({source:"adp1",value:m}),l.aav&&l.aav>0&&l.aav<999&&((!u.player.auctionValue||u.player.auctionValue<=1)&&(u.player.auctionValue=Math.round(l.aav)),l.name==="Breece Hall"&&console.log("[ROOT CAUSE FIX] Breece Hall auction value:",{fromAdp0:u.player.auctionValue,fromAdp1AAV:l.aav,keeping:u.player.auctionValue}))):n.set(c,{player:{id:`${l.name}_${l.position}_${l.team}`.toLowerCase(),name:l.name,position:l.position,team:l.team,adp:m,adpRank:Math.round(m),auctionValue:l.aav&&l.aav<999?Math.round(l.aav):1,isRookie:!1,byeWeek:void 0,positionRank:999,overallRank:Math.round(m),age:void 0,teamSeasonSOS:e.get(l.team)||0,adpSources:[]},adpValues:[{source:"adp1",value:m}]})}}}),P.info(`Loaded ${o.length} entries from adp1_2025.csv`)}catch(o){P.warn("Could not load adp1_2025.csv:",o)}try{const o=await this.loadCleanCSV("adp3_2025.csv",l=>{var c;return{adp:ne(l.ADP,2)??999,position:((c=gt(l.Position))==null?void 0:c.split("-")[0])||"",name:gt(l.Player),team:gt(l.Team)}});o.forEach(l=>{if(l.name&&l.team&&l.position){const c=s(l.name,l.team,l.position),u=n.get(c);l.adp&&l.adp<500&&(u?u.adpValues.push({source:"adp3",value:l.adp}):n.set(c,{player:{id:`${l.name}_${l.position}_${l.team}`.toLowerCase(),name:l.name,position:l.position,team:l.team,adp:l.adp,adpRank:Math.round(l.adp),auctionValue:1,isRookie:!1,byeWeek:void 0,positionRank:999,overallRank:Math.round(l.adp),age:void 0,teamSeasonSOS:e.get(l.team)||0,adpSources:[]},adpValues:[{source:"adp3",value:l.adp}]}))}}),P.info(`Loaded ${o.length} entries from adp3_2025.csv`)}catch(o){P.warn("Could not load adp3_2025.csv:",o)}try{const o=await fetch(`${ke.CLEAN_DATA_PATH}/adp4_2025.txt`);if(o.ok){const c=(await o.text()).trim().split(`
`).slice(1);c.forEach(u=>{var m,f,h;const d=u.split(",");if(d.length>=5){const p=(m=d[1])==null?void 0:m.trim(),v=(f=d[2])==null?void 0:f.trim(),w=(h=d[3])==null?void 0:h.trim(),S=ne(d[5],2)??999;if(p&&v&&w){const y=s(p,w,v),g=n.get(y);if(g)g.adpValues.push({source:"adp4",value:S});else{const x={id:y,name:p,position:v,team:w,adp:S,adpRank:ot(d[0])??999,auctionValue:1,positionRank:999,adpSources:[]};n.set(y,{player:x,adpValues:[{source:"adp4",value:S}]})}}}}),P.info(`Loaded ${c.length} entries from adp4_2025.txt`)}}catch(o){P.warn("Could not load adp4_2025.txt:",o)}try{const o=await fetch(`${ke.CLEAN_DATA_PATH}/adp5_2025.txt`);if(o.ok){const c=(await o.text()).trim().split(`
`).slice(1);c.forEach(u=>{var m,f,h;const d=u.split(",");if(d.length>=6){const p=(m=d[2])==null?void 0:m.trim(),v=(f=d[3])==null?void 0:f.trim(),w=(h=d[4])==null?void 0:h.trim(),S=ne(d[1],2)??999;if(p&&v&&w){const y=s(p,w,v),g=n.get(y);if(g)g.adpValues.push({source:"adp5",value:S});else{const x={id:y,name:p,position:v,team:w,adp:S,adpRank:999,auctionValue:1,positionRank:999,teamSeasonSOS:e.get(w)||0,adpSources:[]};n.set(y,{player:x,adpValues:[{source:"adp5",value:S}]})}}}}),P.info(`Loaded ${c.length} entries from adp5_2025.txt`)}}catch(o){P.warn("Could not load adp5_2025.txt:",o)}const r=[];return n.forEach((o,l)=>{const{player:c,adpValues:u}=o,d=u.filter(m=>m.value<500);if(d.length>0){const m=d.reduce((f,h)=>f+h.value,0);c.adp=m/d.length,c.adpSources=u}(!c.auctionValue||c.auctionValue===1)&&(c.auctionValue=1),r.push(c)}),P.info(`Loaded ${r.length} total players with aggregate ADP from ${n.size} unique players`),r}async loadHistoricalStats(){const e=[],[n,s]=await Promise.all([this.loadCleanCSV("fantasy-stats-passing_2024.csv"),this.loadCleanCSV("fantasy-stats-receiving_rushing_2024.csv")]);return e}async loadPreseasonRankings(){return this.loadCleanCSV("preseason_rankings_2025.csv")}buildPlayersList(e,n){const s=new Map;for(const a of e)s.set(a.id,{id:a.id,name:a.name,position:a.position,team:a.team,byeWeek:a.byeWeek,teamSeasonSOS:a.teamSeasonSOS,points:a.projectedPoints||0,adp:999,auctionValue:a.marketValue||1});for(const a of n){const r=s.get(a.id);r?(r.adp=a.adp,r.auctionValue=a.auctionValue):s.set(a.id,{id:a.id,name:a.name,position:a.position,team:a.team,byeWeek:a.byeWeek,teamSeasonSOS:a.teamSeasonSOS,points:0,adp:a.adp,auctionValue:a.auctionValue})}return Array.from(s.values())}calculateDataQualityScore(e){const n=e.statistics;if(!n)return 0;let s=100;return s-=(n.failed_loads||0)*10,s-=(n.rows_quarantined||0)/Math.max(n.rows_parsed||1,1)*20,s-=Math.min((n.coercions||0)/100,10),Math.max(0,Math.min(100,s))}getEmptyData(){return{adpData:[],projections:[],historicalStats:[],players:[],teamMetrics:new Map,teamComposites:new Map,playerAdvanced:new Map,playerStats:new Map,depthCharts:{teams:[],byPlayer:new Map,byTeam:new Map},deduplicationReport:{adpConflicts:[],projectionConflicts:[],dataQualityScore:0,flaggedForReview:[]},positionEligibility:new Map,advancedStats:[],teamData:[],scheduleData:null}}getEmptyManifest(){return{version:"0.0.0",generated_at:new Date().toISOString(),pipeline_version:"0.0.0",data_location:"",files:{},statistics:{files_processed:0,successful_loads:0,failed_loads:0,rows_parsed:0,rows_quarantined:0,coercions:0,duplicates:0},integrity_verified:!1}}clearCache(){ke.cache.clear(),this.manifest=null,P.info("Data cache cleared")}async needsETLUpdate(){try{const e=await this.loadManifest();return!e.files||Object.keys(e.files).length===0||Date.now()-new Date(e.generated_at).getTime()>24*60*60*1e3||!e.integrity_verified}catch{return!0}}};Q(ke,"BASE_PATH","/fftool/"),Q(ke,"ARTIFACTS_PATH",`${ke.BASE_PATH}artifacts`),Q(ke,"CLEAN_DATA_PATH",`${ke.BASE_PATH}artifacts/clean_data`),Q(ke,"MANIFEST_PATH",`${ke.BASE_PATH}artifacts/data_manifest.json`),Q(ke,"CACHE_TTL",5*60*1e3),Q(ke,"cache",new Map);let wl=ke;const $x=new wl;class up{constructor(){Q(this,"SOURCE_WEIGHTS",{fantasypros:.4,cbs:.35,projections_2025:.25,flx:0})}aggregateProjections(e){const n=new Map;for(const a of e)for(const r of a.projections){const o=this.getPlayerKey(r);n.has(o)||n.set(o,{player:r.name,position:r.position,team:r.team||"FA",sources:new Map,weightedAverage:{}}),n.get(o).sources.set(a.name,r)}const s=[];for(const[a,r]of n){const o=this.calculateWeightedAverage(r);r.sources.size>0&&o.projectedPoints>0&&s.push(o)}return s.sort((a,r)=>(r.projectedPoints||0)-(a.projectedPoints||0)),s}calculateWeightedAverage(e){let n=0;const s={projectedPoints:0,floorPoints:0,ceilingPoints:0,passingYards:0,passingTDs:0,rushingYards:0,rushingTDs:0,receivingYards:0,receivingTDs:0,receptions:0,targets:0,carries:0};for(const[o,l]of e.sources){const c=this.getSourceWeight(o);n+=c;for(const u in s){const d=l[u];d!=null&&!isNaN(d)&&(s[u]+=d*c)}}if(n>0)for(const o in s)s[o]=s[o]/n;const a=this.getBestSource(e.sources),r={id:`${this.normalizePlayerName(e.player)}_${e.position}_${e.team}`,name:e.player,position:e.position,team:e.team,projectedPoints:Math.round(s.projectedPoints*10)/10,floorPoints:s.floorPoints,ceilingPoints:s.ceilingPoints,confidence:this.calculateConfidence(e.sources),byeWeek:a==null?void 0:a.byeWeek,age:a==null?void 0:a.age,injuryStatus:a==null?void 0:a.injuryStatus,isRookie:a==null?void 0:a.isRookie,games:a==null?void 0:a.games,teamSeasonSOS:(()=>{const o=(a==null?void 0:a.teamSeasonSOS)||0,l=e.player.toLowerCase();return(l.includes("mahomes")||l.includes("jefferson")||l.includes("mccaffrey"))&&console.log(`Aggregator SOS: ${e.player} -> SOS = ${o} (from ${(a==null?void 0:a.source)||"unknown"})`),o})(),passingYards:s.passingYards>0?Math.round(s.passingYards):void 0,passingTDs:s.passingTDs>0?Math.round(s.passingTDs*10)/10:void 0,rushingYards:s.rushingYards>0?Math.round(s.rushingYards):void 0,rushingTDs:s.rushingTDs>0?Math.round(s.rushingTDs*10)/10:void 0,receivingYards:s.receivingYards>0?Math.round(s.receivingYards):void 0,receivingTDs:s.receivingTDs>0?Math.round(s.receivingTDs*10)/10:void 0,receptions:s.receptions>0?Math.round(s.receptions):void 0};return!r.floorPoints&&r.projectedPoints>0&&(r.floorPoints=Math.round(r.projectedPoints*.75)),!r.ceilingPoints&&r.projectedPoints>0&&(r.ceilingPoints=Math.round(r.projectedPoints*1.25)),r}getSourceWeight(e){const n=e.toLowerCase();return n.includes("fantasypros")?this.SOURCE_WEIGHTS.fantasypros:n.includes("cbs")?this.SOURCE_WEIGHTS.cbs:n.includes("projections_2025")?this.SOURCE_WEIGHTS.projections_2025:n.includes("flx")?this.SOURCE_WEIGHTS.flx:.1}calculateConfidence(e){if(e.size===0)return 0;if(e.size===1)return .6;const n=Array.from(e.values()).map(u=>u.projectedPoints||0),s=n.reduce((u,d)=>u+d,0)/n.length,a=n.reduce((u,d)=>u+Math.pow(d-s,2),0)/n.length,r=Math.sqrt(a),o=s>0?r/s:1;let c=Math.min(1,e.size/3)*.5;return o<.1?c+=.4:o<.2?c+=.3:o<.3?c+=.2:o<.5&&(c+=.1),Math.min(.95,Math.max(.3,c))}getBestSource(e){let n,s=-1;for(const[a,r]of e){let o=0;a.includes("fantasypros")?o+=3:a.includes("cbs")?o+=2:a.includes("projections_2025")&&(o+=1),r.byeWeek&&o++,r.team&&r.team!=="FA"&&o++,r.age&&o++,r.games&&o++,r.injuryStatus&&o++,o>s&&(s=o,n=r)}return n}getPlayerKey(e){return`${this.normalizePlayerName(e.name)}_${e.position}`}normalizePlayerName(e){return e.toLowerCase().replace(/[^a-z0-9]/g,"").replace(/jr$/g,"").replace(/sr$/g,"").replace(/ii$/g,"").replace(/iii$/g,"").replace(/iv$/g,"").replace(/v$/g,"")}validateProjections(e){return e.filter(n=>{const s={QB:450,RB:400,WR:400,TE:300,K:200,DST:200,DEF:200}[n.position]||350;return n.projectedPoints<=0||n.projectedPoints>s?(console.warn(`Invalid projection for ${n.name}: ${n.projectedPoints} points`),!1):!0})}}const Fx={LA:"LAR",BLT:"BAL",HST:"HOU",ARZ:"ARI",JAX:"JAC",JACK:"JAC",WSH:"WAS",WASH:"WAS",LVR:"LV",LV:"LV",STL:"LAR",SD:"LAC",OAK:"LV",ARI:"ARI",ATL:"ATL",BAL:"BAL",BUF:"BUF",CAR:"CAR",CHI:"CHI",CIN:"CIN",CLE:"CLE",DAL:"DAL",DEN:"DEN",DET:"DET",GB:"GB",HOU:"HOU",IND:"IND",JAC:"JAC",KC:"KC",LAC:"LAC",LAR:"LAR",MIA:"MIA",MIN:"MIN",NE:"NE",NO:"NO",NYG:"NYG",NYJ:"NYJ",PHI:"PHI",PIT:"PIT",SF:"SF",SEA:"SEA",TB:"TB",TEN:"TEN",WAS:"WAS",FA:"FA","":"FA","N/A":"FA",UFA:"FA"},So={"Mike Thomas":"Michael Thomas","Mike Williams":"Michael Williams","Mike Evans":"Michael Evans","DJ Moore":"D.J. Moore","DJ Chark":"D.J. Chark","AJ Brown":"A.J. Brown","Andrew Ogletree":"Drew Ogletree","Drew Ogletree":"Andrew Ogletree","Marvin Mims Jr":"Marvin Mims","Marvin Mims Jr.":"Marvin Mims","Marvin Mims":"Marvin Mims","Luther Burden":"Luther Burden","Luther Burden III":"Luther Burden","Odell Beckham":"Odell Beckham Jr.","Odell Beckham Jr":"Odell Beckham Jr.","Michael Pittman":"Michael Pittman Jr.","Michael Pittman Jr":"Michael Pittman Jr.","Brian Robinson":"Brian Robinson Jr.","Brian Robinson Jr":"Brian Robinson Jr.","Marquise Brown":"Marquise Brown","Hollywood Brown":"Marquise Brown",'Marquise "Hollywood" Brown':"Marquise Brown","Kenneth Walker":"Kenneth Walker III","Kenneth Walker III":"Kenneth Walker III","Will Fuller":"Will Fuller V","Will Fuller V":"Will Fuller V","AJ Dillon":"A.J. Dillon","TJ Hockenson":"T.J. Hockenson","CJ Stroud":"C.J. Stroud","CJ Beathard":"C.J. Beathard","Ken Walker":"Kenneth Walker III","Marvin Harrison":"Marvin Harrison Jr.","Gabriel Davis":"Gabe Davis","Joshua Palmer":"Josh Palmer","Joshua Downs":"Josh Downs","Christopher Olave":"Chris Olave","DeAndre Hopkins":"Deandre Hopkins","Cleveland Browns":"Browns DST","Browns Defense":"Browns DST","Cleveland Defense":"Browns DST","Bills DST":"Buffalo Bills","Buffalo Bills":"Bills DST",BUF:"Bills DST","Steelers DST":"Pittsburgh Steelers","Pittsburgh Steelers":"Steelers DST",PIT:"Steelers DST","49ers DST":"San Francisco 49ers","San Francisco 49ers":"49ers DST",SF:"49ers DST","Lions DST":"Detroit Lions","Detroit Lions":"Lions DST",DET:"Lions DST","Eagles DST":"Philadelphia Eagles","Philadelphia Eagles":"Eagles DST",PHI:"Eagles DST","Broncos DST":"Denver Broncos","Denver Broncos":"Broncos DST",DEN:"Broncos DST","Vikings DST":"Minnesota Vikings","Minnesota Vikings":"Vikings DST",MIN:"Vikings DST","Cowboys DST":"Dallas Cowboys","Dallas Cowboys":"Cowboys DST",DAL:"Cowboys DST","Ravens DST":"Baltimore Ravens","Baltimore Ravens":"Ravens DST",BAL:"Ravens DST","Chiefs DST":"Kansas City Chiefs","Kansas City Chiefs":"Chiefs DST",KC:"Chiefs DST"};class Ix{constructor(){Q(this,"playerIndex",new Map);Q(this,"normalizedIndex",new Map);Q(this,"teamRosters",new Map)}getPlayerIndex(){return this.playerIndex}initialize(e){this.playerIndex.clear(),this.normalizedIndex.clear(),this.teamRosters.clear();const n=e.filter(o=>{const l=(o.position||o.Position||"").toUpperCase();return l==="DST"||l==="DEF"});if(n.length>0)P.info(`Found ${n.length} DST entries to index:`,n.slice(0,5).map(o=>({name:o.name||o["Full Name"]||o.Player,team:o.team||o["Team Abbreviation"]||o.Team,position:o.position||o.Position})));else{P.warn("NO DST entries found in ADP data!");const o=new Set(e.map(l=>l.position||l.Position));P.warn("Available positions in ADP:",Array.from(o))}e.forEach(o=>{const l=o.name||o["Full Name"]||o.Player,c=o.team||o["Team Abbreviation"]||o.Team,u=this.normalizeTeam(c),d=this.normalizePosition(o.position||o.Position);if(!l){P.warn("Player with no name found:",o);return}const m=this.generateKey(l,u,d);if(this.playerIndex.set(m,o),d==="DST"){const h=l.replace(" DST","").replace(" Defense","").trim(),p=h.split(" "),v=[`${h} DST`,`${h} Defense`,h];if(p.length>1){const w=p[p.length-1];v.push(`${w} DST`),v.push(`${w} Defense`),v.push(w)}if(p.length>=1){const w=p[0];w!==h&&(v.push(`${w} DST`),v.push(`${w} Defense`))}v.forEach(w=>{if(w&&w!==l){const S=this.generateKey(w,u,d);this.playerIndex.set(S,o)}})}const f=this.generateNormalizedKey(l,u,d);this.normalizedIndex.set(f,o),this.teamRosters.has(u)||this.teamRosters.set(u,new Set),this.teamRosters.get(u).add(l)}),Array.from(this.playerIndex.keys()).filter(o=>o.includes("|DST")).length>0||P.warn("No DST keys were created in the player index!"),P.info(`PlayerResolver initialized with ${this.playerIndex.size} players`);const a=["Mims","Marquise","Luther","Bills","49ers","Lions","Vikings","Packers","Cowboys","Patriots","Chiefs","Broncos"];this.playerIndex.forEach((o,l)=>{a.some(c=>l.toLowerCase().includes(c.toLowerCase()))});const r=Array.from(this.playerIndex.keys()).filter(o=>o.includes("|DST"));if(r.length>0){const o=new Map;r.forEach(c=>{const d=c.split("|")[1];o.has(d)||o.set(d,[]),o.get(d).push(c)}),["BUF","PIT","KC","SF","DET","MIN","GB","DAL","NE"].forEach(c=>{o.get(c)})}}generateKey(e,n,s){return`${e}|${this.normalizeTeam(n)}|${this.normalizePosition(s)}`}generateNormalizedKey(e,n,s){return`${this.normalizeName(e)}|${this.normalizeTeam(n)}|${this.normalizePosition(s)}`}normalizeName(e){return e?(So[e]||e).toLowerCase().replace(/[.']/g,"").replace(/\s+(jr\.?|sr\.?|iii|ii|iv|v)$/i,"").replace(/\s+/g," ").trim():""}normalizeTeam(e){if(!e)return"FA";const n=e.toUpperCase().trim();return Fx[n]||n}normalizePosition(e){return e?e.toUpperCase().trim():""}generateDSTVariations(e,n){const s=[],a=this.getFullTeamName(n),r=a.split(" "),o=r.slice(0,-1).join(" "),l=r[r.length-1];return s.push(e),s.push(`${l} DST`),s.push(`${a} DST`),s.push(`${a}`),s.push(`${l}`),s.push(`${o} Defense`),s.push(`${l} Defense`),s.push(`${a} Defense`),o&&o!==l&&s.push(`${o} DST`),n==="SF"&&(s.push("San Francisco DST"),s.push("49ers DST"),s.push("San Francisco 49ers DST"),s.push("49ers"),s.push("San Francisco 49ers")),n==="GB"&&(s.push("Green Bay Defense"),s.push("Packers DST"),s.push("Green Bay DST"),s.push("Green Bay Packers DST"),s.push("Packers"),s.push("Green Bay Packers")),n==="NE"&&(s.push("New England Defense"),s.push("Patriots DST"),s.push("New England DST"),s.push("New England Patriots DST"),s.push("Patriots"),s.push("New England Patriots")),[...new Set(s)]}getFullTeamName(e){if(!e)return"";const n={BUF:"Buffalo Bills",MIA:"Miami Dolphins",NE:"New England Patriots",NYJ:"New York Jets",BAL:"Baltimore Ravens",CIN:"Cincinnati Bengals",CLE:"Cleveland Browns",PIT:"Pittsburgh Steelers",HOU:"Houston Texans",IND:"Indianapolis Colts",JAC:"Jacksonville Jaguars",TEN:"Tennessee Titans",DEN:"Denver Broncos",KC:"Kansas City Chiefs",LV:"Las Vegas Raiders",LAC:"Los Angeles Chargers",DAL:"Dallas Cowboys",NYG:"New York Giants",PHI:"Philadelphia Eagles",WAS:"Washington Commanders",CHI:"Chicago Bears",DET:"Detroit Lions",GB:"Green Bay Packers",MIN:"Minnesota Vikings",ATL:"Atlanta Falcons",CAR:"Carolina Panthers",NO:"New Orleans Saints",TB:"Tampa Bay Buccaneers",ARI:"Arizona Cardinals",LAR:"Los Angeles Rams",SF:"San Francisco 49ers",SEA:"Seattle Seahawks",Bills:"Buffalo Bills",Dolphins:"Miami Dolphins",Patriots:"New England Patriots",Jets:"New York Jets",Ravens:"Baltimore Ravens",Bengals:"Cincinnati Bengals",Browns:"Cleveland Browns",Steelers:"Pittsburgh Steelers",Texans:"Houston Texans",Colts:"Indianapolis Colts",Jaguars:"Jacksonville Jaguars",Titans:"Tennessee Titans",Broncos:"Denver Broncos",Chiefs:"Kansas City Chiefs",Raiders:"Las Vegas Raiders",Chargers:"Los Angeles Chargers",Cowboys:"Dallas Cowboys",Giants:"New York Giants",Eagles:"Philadelphia Eagles",Commanders:"Washington Commanders",Bears:"Chicago Bears",Lions:"Detroit Lions",Packers:"Green Bay Packers",Vikings:"Minnesota Vikings",Falcons:"Atlanta Falcons",Panthers:"Carolina Panthers",Saints:"New Orleans Saints",Buccaneers:"Tampa Bay Buccaneers",Cardinals:"Arizona Cardinals",Rams:"Los Angeles Rams","49ers":"San Francisco 49ers",Seahawks:"Seattle Seahawks"};if(Object.values(n).includes(e))return e;if(n[e])return n[e];const a=this.normalizeTeam(e);return n[a]?n[a]:e}findBestMatch(e,n,s){if(e!=null&&e.includes("Mims")||e!=null&&e.includes("Marquise")||e!=null&&e.includes("Luther")||e!=null&&e.includes("DST"),(s==null?void 0:s.toUpperCase())==="DST"||e!=null&&e.includes("DST")||e!=null&&e.includes("Defense")){const d=this.normalizeTeam(n),m=this.generateDSTVariations(e,d);for(const v of m){const w=this.generateKey(v,d,"DST");if(this.playerIndex.has(w))return{player:this.playerIndex.get(w),confidence:1,matchType:"exact",reason:`DST matched as ${v}`}}const h=Array.from(this.playerIndex.keys()).filter(v=>v.includes("|DST")).find(v=>v.includes(`|${d}|`));return h?{player:this.playerIndex.get(h),confidence:.95,matchType:"normalized",reason:`DST matched by team code ${d}`}:{player:this.createProvisionalPlayer(e,d,"DST",{fantasyPoints:0}),confidence:.5,matchType:"normalized",reason:"Provisional DST created (not in ADP data)"}}const a=this.generateKey(e,n,s);if(this.playerIndex.has(a))return{player:this.playerIndex.get(a),confidence:1,matchType:"exact",reason:"Exact match found"};if(s==="RB"||s==="FB"){const d=s==="RB"?"FB":"RB",m=this.generateKey(e,n,d);if(this.playerIndex.has(m))return{player:this.playerIndex.get(m),confidence:.98,matchType:"normalized",reason:`Matched with position flexibility: ${s} → ${d}`}}const r=So[e]||e;if(r!==e){const d=this.generateKey(r,n,s);if(this.playerIndex.has(d))return{player:this.playerIndex.get(d),confidence:.95,matchType:"alias",reason:`Matched via alias: ${e} → ${r}`};if(s==="RB"||s==="FB"){const m=s==="RB"?"FB":"RB",f=this.generateKey(r,n,m);if(this.playerIndex.has(f))return{player:this.playerIndex.get(f),confidence:.93,matchType:"alias",reason:`Matched via alias + position: ${e} → ${r} (${s} → ${m})`}}}const o=e.replace(/"[^"]*"/g,"").replace(/\([^)]*\)/g,"").replace(/\s+/g," ").trim();if(o!==e&&o.length>0){const d=this.generateKey(o,n,s);if(this.playerIndex.has(d))return{player:this.playerIndex.get(d),confidence:.95,matchType:"alias",reason:`Matched by removing nickname: ${e} → ${o}`};const m=So[o]||o;if(m!==o){const f=this.generateKey(m,n,s);if(this.playerIndex.has(f))return{player:this.playerIndex.get(f),confidence:.95,matchType:"alias",reason:`Matched via alias: ${o} → ${m}`}}}const l=this.generateNormalizedKey(e,n,s);if(this.normalizedIndex.has(l))return{player:this.normalizedIndex.get(l),confidence:.9,matchType:"normalized",reason:"Matched after normalization"};const c=this.fuzzyMatchPlayer(e,n,s);if(c&&c.confidence>.7)return c;const u=this.findPlayerOnDifferentTeam(e,s);return u?{...u,confidence:Math.min(.8,u.confidence),reason:`Found on different team: ${u.player.team} (possible trade)`}:{player:null,confidence:0,matchType:"not_found",reason:`No match found for ${e} (${s}, ${n})`}}fuzzyMatchPlayer(e,n,s){const a=this.normalizeName(e);let r=null,o=1/0;return this.playerIndex.forEach((l,c)=>{const[u,d,m]=c.split("|");if(this.normalizeTeam(d)!==this.normalizeTeam(n)||this.normalizePosition(m)!==this.normalizePosition(s))return;const f=this.levenshteinDistance(a,this.normalizeName(u));f<o&&f<=3&&(o=f,r={player:l,confidence:Math.max(.5,1-f*.15),matchType:"fuzzy",reason:`Fuzzy match (distance: ${f})`})}),r}findPlayerOnDifferentTeam(e,n){const s=this.normalizeName(e);for(const[a,r]of this.playerIndex.entries()){const[o,l,c]=a.split("|");if(this.normalizePosition(c)===this.normalizePosition(n)&&this.normalizeName(o)===s)return{player:r,confidence:.85,matchType:"normalized",reason:"Found on different team"}}return null}levenshteinDistance(e,n){const s=[];for(let a=0;a<=n.length;a++)s[a]=[a];for(let a=0;a<=e.length;a++)s[0][a]=a;for(let a=1;a<=n.length;a++)for(let r=1;r<=e.length;r++)n.charAt(a-1)===e.charAt(r-1)?s[a][r]=s[a-1][r-1]:s[a][r]=Math.min(s[a-1][r-1]+1,s[a][r-1]+1,s[a-1][r]+1);return s[n.length][e.length]}createProvisionalPlayer(e,n,s,a){return{id:this.generateKey(e,n,s),name:e,team:this.normalizeTeam(n),position:this.normalizePosition(s),adp:999,auctionValue:0,isProvisional:!0,dataSource:"projection-only",projectedPoints:a.fantasyPoints||0,confidence:.5,note:"Player not in ADP data - created from projections"}}resolveDataset(e,n,s,a){const r=[],o=[],l=[],c={total:0,exact:0,normalized:0,fuzzy:0,alias:0,provisional:0,unresolved:0};return e.forEach(u=>{const d=u[n],m=u[s],f=u[a];if(!d)return;c.total++;const h=this.findBestMatch(d,m,f);if(h.matchType==="exact")c.exact++,r.push({...u,_resolved:h.player,_confidence:h.confidence});else if(h.matchType==="normalized")c.normalized++,r.push({...u,_resolved:h.player,_confidence:h.confidence});else if(h.matchType==="fuzzy")c.fuzzy++,r.push({...u,_resolved:h.player,_confidence:h.confidence});else if(h.matchType==="alias")c.alias++,r.push({...u,_resolved:h.player,_confidence:h.confidence});else{const p=this.createProvisionalPlayer(d,m,f,u);o.push(p),c.provisional++}}),P.info("Foreign key resolution complete:",c),{resolved:r,provisional:o,unresolved:l,stats:c}}}const Vs=new Ix,Qn=class Qn{constructor(){Q(this,"playerProfiles",new Map);Q(this,"loaded",!1)}static getInstance(){return Qn.instance||(Qn.instance=new Qn),Qn.instance}async loadRosterData(){if(this.loaded)return this.playerProfiles;const e=["49ers","bears","bengals","bills","broncos","browns","buccaneers","cardinals","chargers","chiefs","colts","commanders","cowboys","dolphins","eagles","falcons","giants","jaguars","jets","lions","packers","panthers","patriots","raiders","rams","ravens","saints","seahawks","steelers","texans","titans","vikings"],n={"49ers":"SF",bears:"CHI",bengals:"CIN",bills:"BUF",broncos:"DEN",browns:"CLE",buccaneers:"TB",cardinals:"ARI",chargers:"LAC",chiefs:"KC",colts:"IND",commanders:"WAS",cowboys:"DAL",dolphins:"MIA",eagles:"PHI",falcons:"ATL",giants:"NYG",jaguars:"JAC",jets:"NYJ",lions:"DET",packers:"GB",panthers:"CAR",patriots:"NE",raiders:"LV",rams:"LAR",ravens:"BAL",saints:"NO",seahawks:"SEA",steelers:"PIT",texans:"HOU",titans:"TEN",vikings:"MIN"},s="/fftool/";for(const a of e)try{const r=await fetch(`${s}canonical_data/advanced_data/2025-2026/${a}.csv`);if(!r.ok)continue;const o=await r.text(),l=this.parseCSV(o),c=n[a];l.forEach(u=>{if(u.NAME&&u.NAME!=="-"){const d={name:u.NAME,team:c,position:u.POS,height:u.HEIGHT,weight:this.parseWeight(u.WEIGHT),college:u.COLLEGE,age:parseFloat(u.AGE)||void 0,year:parseInt(u.YEAR)||void 0,round:this.parseRound(u["R#"]),pick:this.parsePick(u["D#"]),offGrade:parseFloat(u.OFF_GRADE)||void 0,passGrade:parseFloat(u.PASS_GRADE)||void 0,runGrade:parseFloat(u.RUN_GRADE)||void 0,recvGrade:parseFloat(u.RECV_GRADE)||void 0},m=this.normalizeKey(u.NAME);this.playerProfiles.set(m,d)}})}catch(r){P.warn(`Failed to load roster data for ${a}:`,r)}return this.loaded=!0,P.info(`Loaded roster data for ${this.playerProfiles.size} players`),this.playerProfiles}getPlayerProfile(e){const n=this.normalizeKey(e);return this.playerProfiles.get(n)}parseCSV(e){const n=e.trim().split(`
`);if(n.length<2)return[];const s=n[0].split(",").map(r=>r.trim()),a=[];for(let r=1;r<n.length;r++){const o=n[r].split(","),l={};s.forEach((c,u)=>{var d;l[c]=((d=o[u])==null?void 0:d.trim())||""}),a.push(l)}return a}parseWeight(e){const n=parseInt(e);return isNaN(n)?void 0:n}parseRound(e){if(!e||e==="-")return;const n=parseInt(e);return isNaN(n)?void 0:n}parsePick(e){if(!e||e==="-")return;const n=parseInt(e);return isNaN(n)?void 0:n}normalizeKey(e){return e.toLowerCase().replace(/[^a-z]/g,"")}};Q(Qn,"instance");let Nl=Qn;const wo=Nl.getInstance(),Gn=class Gn{constructor(){Q(this,"sosData",new Map);Q(this,"loaded",!1)}static getInstance(){return Gn.instance||(Gn.instance=new Gn),Gn.instance}async loadSOSData(){if(this.loaded)return this.sosData;try{const n=await fetch("/fftool/artifacts/clean_data/sos_2025.csv");if(!n.ok)throw new Error(`Failed to load SOS data: ${n.statusText}`);const s=await n.text();return this.parseCSV(s).forEach(r=>{const o=r.Team;if(!o)return;const l=o,c=new Map,u={team:l,seasonGames:17,seasonSOS:parseFloat(r.SOS_Normalized)||0,playoffGames:0,playoffSOS:0,allGames:17,allSOS:parseFloat(r.SOS_Normalized)||0,weeklyOpponents:c};this.sosData.set(l,u)}),this.loaded=!0,P.info(`Loaded SOS data for ${this.sosData.size} teams`),this.sosData}catch(e){return P.error("Failed to load SOS data:",e),new Map}}getTeamSOS(e){return this.sosData.get(e)}getWeeklySOS(e,n){const s=this.sosData.get(e);if(!s)return 0;let a=0,r=0;return n.forEach(o=>{const l=s.weeklyOpponents.get(o);l!==void 0&&(a+=l,r++)}),r>0?a/r:0}getPlayoffSOS(e){const n=this.sosData.get(e);return n?n.playoffSOS:0}parseCSV(e){const n=e.trim().split(`
`);if(n.length<2)return[];const s=n[0].split(",").map(r=>r.trim().replace(/"/g,"")),a=[];for(let r=1;r<n.length;r++){const o=this.parseCSVLine(n[r]),l={};s.forEach((c,u)=>{var d;l[c]=((d=o[u])==null?void 0:d.trim().replace(/"/g,""))||""}),a.push(l)}return a}parseCSVLine(e){const n=[];let s="",a=!1;for(let r=0;r<e.length;r++){const o=e[r];o==='"'?a=!a:o===","&&!a?(n.push(s),s=""):s+=o}return n.push(s),n}};Q(Gn,"instance");let jl=Gn;const No=jl.getInstance(),_r={Arizona:"ARI",Atlanta:"ATL",Baltimore:"BAL",Buffalo:"BUF",Carolina:"CAR",Chicago:"CHI",Cincinnati:"CIN",Cleveland:"CLE",Dallas:"DAL",Denver:"DEN",Detroit:"DET","Green Bay":"GB",Houston:"HOU",Indianapolis:"IND",Jacksonville:"JAC","Kansas City":"KC","LA Chargers":"LAC","Los Angeles Chargers":"LAC","LA Rams":"LAR","Los Angeles Rams":"LAR","Las Vegas":"LV",Miami:"MIA",Minnesota:"MIN","New England":"NE","New Orleans":"NO","NY Giants":"NYG","New York Giants":"NYG","NY Jets":"NYJ","New York Jets":"NYJ",Philadelphia:"PHI",Pittsburgh:"PIT","San Francisco":"SF",Seattle:"SEA","Tampa Bay":"TB",Tennessee:"TEN",Washington:"WAS"};function Oi(t){if(!t)return null;const e=t.trim();if(_r[e])return _r[e];const n=e.toLowerCase();for(const[r,o]of Object.entries(_r))if(r.toLowerCase()===n)return o;const s=e.toUpperCase();return new Set(Object.values(_r)).has(s)?s:null}const gi=["","--","N/A","null","undefined","NA","n/a","-"],Vx={NULL_VALUES:gi,ENCODING:"UTF-8",DEFAULT_OPTIONS:{header:!0,skipEmptyLines:!0,dynamicTyping:!0,delimitersToGuess:[",","	","|",";"],trimHeaders:!0,transformHeader:t=>t.trim()}};function Ja(t){return t.replace(/^\uFEFF/,"").replace(/^\xEF\xBB\xBF/,"")}function se(t){if(t==null)return;const e=String(t).trim();if(gi.includes(e)||e.toLowerCase()==="null"||e.toLowerCase()==="undefined")return;const n=e.replace(/,/g,"").replace(/\$/g,"").replace(/%$/g,""),s=parseFloat(n);return isNaN(s)?void 0:s}function Lx(t,e){if(!t||typeof t!="object")return!1;if(e){for(const s of e)if(!(s in t)||t[s]==null||gi.includes(String(t[s]).trim()))return P.warn(`Missing required field: ${s}`,{row:t}),!1}return Object.values(t).some(s=>s!=null&&!gi.includes(String(s).trim()))}function Qt(t,e,n){try{const s=Ja(t);if(!s||s.trim().length===0)return P.warn("Empty CSV content provided"),[];const a=Cc.parse(s,{...Vx.DEFAULT_OPTIONS,...e,beforeFirstChunk:l=>Ja(l)}),r=a.errors.filter(l=>{var c,u,d;return l.type!=="FieldMismatch"&&!((c=l.message)!=null&&c.includes("Duplicate headers found"))&&!((u=l.message)!=null&&u.includes("Too many fields"))&&!((d=l.message)!=null&&d.includes("Too few fields"))});r.length>0&&P.error("Critical CSV parsing errors",{errors:r});const o=a.data.filter(l=>{const c=Lx(l,n);return c||P.debug("Invalid row filtered",{row:l}),c});return P.info(`CSV parsed successfully: ${o.length} valid rows out of ${a.data.length} total`),o}catch(s){return P.error("Failed to parse CSV",{error:s}),[]}}function Ox(t,e){const s=Ja(t).split(`
`).filter(c=>c.trim());if(s.length===0)return[];const a=s[0].split(","),r={},l=[a.map(c=>{const u=c.replace(/"/g,"").trim();if(e[u]){r[u]=(r[u]||0)+1;const d=r[u]-1;return`"${e[u].names[d]||u}"`}return c}).join(","),...s.slice(1)].join(`
`);return Qt(l)}function zx(t){const e=[",","	",";","|"],n={},s=t.split(`
`).slice(0,5);for(const a of e)n[a]=s.reduce((r,o)=>r+(o.split(a).length-1),0);return Object.entries(n).reduce((a,r)=>n[a[0]]>n[r[0]]?a:r)[0]}var Jt=(t=>(t.STRING="string",t.INTEGER="integer",t.FLOAT="float",t.BOOLEAN="boolean",t.DATE="date",t.ENUM="enum",t.PERCENTAGE="percentage",t.CURRENCY="currency",t))(Jt||{});const ga={ADP_DATA:{name:"adp_data",columns:[{name:"Overall Rank",type:"integer",required:!0,min:1,max:500},{name:"Full Name",type:"string",required:!0},{name:"Team Abbreviation",type:"string",required:!0,pattern:/^[A-Z]{2,3}$/},{name:"Position",type:"enum",required:!0,allowedValues:["QB","RB","WR","TE","DST","K"]},{name:"Position Rank",type:"integer",required:!0,min:1,max:100},{name:"Bye Week",type:"integer",required:!1,min:1,max:18},{name:"ADP",type:"float",required:!0,min:1,max:300},{name:"Projected Points",type:"float",required:!0,min:0,max:500},{name:"Auction Value",type:"currency",required:!1,min:0,max:200},{name:"Is Rookie",type:"enum",required:!1,allowedValues:["Yes","No"]},{name:"Data Status",type:"enum",required:!1,allowedValues:["Complete","Partial","Pending"]}],uniqueKeys:[["Full Name","Position"]],allowExtraColumns:!1,encoding:"UTF-8",delimiter:",",quoteChar:'"',escapeChar:"\\",hasHeader:!0,skipRows:0,naValues:["","N/A","--","null","NA","n/a","-"],thousandsSeparator:",",decimalSeparator:".",duplicatePolicy:"fail",validationMode:"strict"},PROJECTIONS:{name:"projections",columns:[{name:"playerName",type:"string",required:!0},{name:"teamName",type:"string",required:!0},{name:"position",type:"enum",required:!0,allowedValues:["QB","RB","WR","TE","DST","K"]},{name:"byeWeek",type:"integer",required:!1,min:1,max:18},{name:"games",type:"integer",required:!1,min:0,max:17},{name:"fantasyPoints",type:"float",required:!0,min:0,max:600},{name:"auctionValue",type:"currency",required:!1,min:0,max:200},{name:"passComp",type:"float",required:!1,min:0},{name:"passAtt",type:"float",required:!1,min:0},{name:"passYds",type:"float",required:!1,min:0},{name:"passTd",type:"float",required:!1,min:0},{name:"passInt",type:"float",required:!1,min:0},{name:"rushAtt",type:"float",required:!1,min:0},{name:"rushYds",type:"float",required:!1,min:0},{name:"rushTd",type:"float",required:!1,min:0},{name:"recvTargets",type:"float",required:!1,min:0},{name:"recvReceptions",type:"float",required:!1,min:0},{name:"recvYds",type:"float",required:!1,min:0},{name:"recvTd",type:"float",required:!1,min:0}],uniqueKeys:[["playerName","teamName","position"]],allowExtraColumns:!0,encoding:"UTF-8",delimiter:",",quoteChar:'"',escapeChar:"\\",hasHeader:!0,skipRows:0,naValues:["","N/A","--","null","NA","n/a","-","0"],thousandsSeparator:",",decimalSeparator:".",duplicatePolicy:"last",validationMode:"strict"},TEAM_METRICS:{name:"team_metrics",columns:[{name:"Rank",type:"integer",required:!0,min:1,max:32},{name:"Team",type:"string",required:!0},{name:"2024",type:"float",required:!1},{name:"Last 3",type:"float",required:!1},{name:"Last 1",type:"float",required:!1},{name:"Home",type:"float",required:!1},{name:"Away",type:"float",required:!1},{name:"2023",type:"float",required:!1}],uniqueKeys:[["Team"]],allowExtraColumns:!1,encoding:"UTF-8",delimiter:"	",quoteChar:'"',escapeChar:"\\",hasHeader:!0,skipRows:0,naValues:["","--","N/A"],thousandsSeparator:",",decimalSeparator:".",duplicatePolicy:"fail",validationMode:"strict"},ADVANCED_STATS_WR:{name:"advanced_stats_wr",columns:[{name:"Player",type:"string",required:!0},{name:"Team",type:"string",required:!1},{name:"Targets",type:"integer",required:!1,min:0},{name:"Target Share",type:"percentage",required:!1,min:0,max:100},{name:"Receptions",type:"integer",required:!1,min:0},{name:"Catch Rate",type:"percentage",required:!1,min:0,max:100},{name:"Yards",type:"integer",required:!1,min:0},{name:"YAC",type:"float",required:!1,min:0},{name:"Air Yards",type:"float",required:!1,min:0},{name:"Red Zone Targets",type:"integer",required:!1,min:0},{name:"TDs",type:"integer",required:!1,min:0}],uniqueKeys:[["Player"]],allowExtraColumns:!0,encoding:"UTF-8",delimiter:",",quoteChar:'"',escapeChar:"\\",hasHeader:!0,skipRows:0,naValues:["","--","N/A","-"],thousandsSeparator:",",decimalSeparator:".",duplicatePolicy:"last",validationMode:"warning"}},Wx=[{sourceTable:"projections",sourceColumn:"playerName",targetTable:"adp_data",targetColumn:"Full Name",nullable:!1,onMissing:"warn"},{sourceTable:"projections",sourceColumn:"teamName",targetTable:"team_metrics",targetColumn:"Team",nullable:!1,onMissing:"fail"},{sourceTable:"advanced_stats_wr",sourceColumn:"Player",targetTable:"projections",targetColumn:"playerName",nullable:!1,onMissing:"warn"}],qx={string:(t,e)=>{if(t==null)return e.required?null:e.default??null;const n=String(t).trim();if(e.pattern&&!e.pattern.test(n))throw new Error(`Value "${n}" does not match pattern ${e.pattern}`);return n},integer:(t,e)=>{if(t==null||String(t).trim()==="")return e.required?null:e.default??null;const n=parseInt(String(t).replace(/,/g,""),10);if(isNaN(n))throw new Error(`Cannot parse "${t}" as integer`);if(e.min!==void 0&&n<e.min)throw new Error(`Value ${n} is below minimum ${e.min}`);if(e.max!==void 0&&n>e.max)throw new Error(`Value ${n} is above maximum ${e.max}`);return n},float:(t,e)=>{if(t==null||String(t).trim()==="")return e.required?null:e.default??null;const n=parseFloat(String(t).replace(/,/g,""));if(isNaN(n))throw new Error(`Cannot parse "${t}" as float`);if(e.min!==void 0&&n<e.min)throw new Error(`Value ${n} is below minimum ${e.min}`);if(e.max!==void 0&&n>e.max)throw new Error(`Value ${n} is above maximum ${e.max}`);return n},boolean:(t,e)=>{if(t==null)return e.required?null:e.default??null;const n=String(t).trim().toLowerCase();if(["true","yes","1","t","y"].includes(n))return!0;if(["false","no","0","f","n"].includes(n))return!1;throw new Error(`Cannot parse "${t}" as boolean`)},percentage:(t,e)=>{if(t==null||String(t).trim()==="")return e.required?null:e.default??null;const n=String(t).replace("%","").replace(/,/g,""),s=parseFloat(n);if(isNaN(s))throw new Error(`Cannot parse "${t}" as percentage`);const a=s>1?s/100:s;if(e.min!==void 0&&a<e.min/100)throw new Error(`Value ${a*100}% is below minimum ${e.min}%`);if(e.max!==void 0&&a>e.max/100)throw new Error(`Value ${a*100}% is above maximum ${e.max}%`);return a},currency:(t,e)=>{if(t==null||String(t).trim()==="")return e.required?null:e.default??null;const n=String(t).replace(/[$,]/g,"").trim(),s=parseFloat(n);if(isNaN(s))throw new Error(`Cannot parse "${t}" as currency`);if(e.min!==void 0&&s<e.min)throw new Error(`Value $${s} is below minimum $${e.min}`);if(e.max!==void 0&&s>e.max)throw new Error(`Value $${s} is above maximum $${e.max}`);return s},enum:(t,e)=>{var s,a;if(t==null||String(t).trim()==="")return e.required?null:e.default??null;const n=String(t).trim();if(!((s=e.allowedValues)!=null&&s.includes(n)))throw new Error(`Value "${n}" is not in allowed values: ${(a=e.allowedValues)==null?void 0:a.join(", ")}`);return n},date:(t,e)=>{if(t==null)return e.required?null:e.default??null;const n=new Date(String(t));if(isNaN(n.getTime()))throw new Error(`Cannot parse "${t}" as date`);return n}};class Hx{constructor(){Q(this,"dataStore",new Map);Q(this,"quarantine",[]);Q(this,"coercions",[])}parseWithSchema(e,n){const s=performance.now(),a=n.schema,r={sourceFile:a.name,parsedAt:new Date,rowCountOriginal:0,rowCountAfterHeaders:0,rowCountAfterEmpty:0,rowCountAfterDuplicates:0,rowCountAfterValidation:0,rowCountFinal:0,duplicatesRemoved:0,validationErrors:0,coercions:[],quarantinedRows:[]},o=[],l=[];try{P.info(`[${a.name}] Step 1: BOM handling`);let c=e;if(n.bomHandling==="remove")c=Ja(e),c!==e&&P.info(`[${a.name}] BOM detected and removed`);else if(n.bomHandling==="fail"&&e.startsWith("\uFEFF"))throw new Error('BOM detected but bomHandling is set to "fail"');const u=c.split(`
`);r.rowCountOriginal=u.length,P.info(`[${a.name}] Step 2: Original row count: ${r.rowCountOriginal}`),P.info(`[${a.name}] Step 3: Parsing CSV with delimiter: "${a.delimiter}"`);const d=Cc.parse(c,{delimiter:a.delimiter,quoteChar:a.quoteChar,escapeChar:a.escapeChar,header:a.hasHeader,skipEmptyLines:n.skipEmptyLines,dynamicTyping:!1,encoding:a.encoding,comments:!1,trimHeaders:n.trimWhitespace,transformHeader:k=>n.trimWhitespace?k.trim():k});if(d.errors.length>0){const k=d.errors.filter(T=>{var j;return T.type!=="FieldMismatch"&&!((j=T.message)!=null&&j.includes("Too many fields"))});k.length>0&&(P.error(`[${a.name}] Critical parsing errors:`,{errors:k}),k.forEach(T=>{o.push({row:T.row,message:T.message||"Unknown parsing error",type:"schema"})}))}let m=d.data;r.rowCountAfterHeaders=m.length,P.info(`[${a.name}] Step 4: Rows after header: ${r.rowCountAfterHeaders}`),a.skipRows>0&&(m=m.slice(a.skipRows),P.info(`[${a.name}] Skipped ${a.skipRows} rows`));const f=m.length;n.skipEmptyLines&&(m=m.filter(k=>Object.values(k).some(j=>j!=null&&String(j).trim()!==""))),r.rowCountAfterEmpty=m.length,P.info(`[${a.name}] Step 5: Rows after removing empty: ${r.rowCountAfterEmpty} (removed ${f-m.length})`),P.info(`[${a.name}] Step 6: Schema validation`);const h=new Set(a.columns.map(k=>k.name)),p=new Set(Object.keys(m[0]||{}));if(!a.allowExtraColumns){const k=Array.from(p).filter(T=>!h.has(T));if(k.length>0){const T={message:`Unexpected columns found: ${k.join(", ")}`,type:"schema"};if(a.validationMode==="strict")throw o.push(T),new Error(T.message);l.push(T)}}const v=a.columns.filter(k=>k.required&&!p.has(k.name)).map(k=>k.name);if(v.length>0)throw new Error(`Missing required columns: ${v.join(", ")}`);P.info(`[${a.name}] Step 7: Type coercion and validation`);const w=[],S=[];for(let k=0;k<m.length;k++){const T=m[k],j={};let _=!0;const C=[];for(const E of a.columns){const M=T[E.name],W=a.naValues.includes(String(M).trim());try{if(W){E.required?(C.push(`Required column "${E.name}" has NA value`),_=!1):j[E.name]=E.default??null;continue}const B=qx[E.type];if(!B)throw new Error(`No coercer for type ${E.type}`);const H=B(M,E);H!==M&&M!=null&&this.coercions.push({row:k+1,column:E.name,originalValue:M,coercedValue:H,reason:`Type coercion to ${E.type}`}),E.required&&H==null&&(C.push(`Required column "${E.name}" is null`),_=!1),j[E.name]=H}catch(B){const H=`Column "${E.name}": ${B instanceof Error?B.message:String(B)}`;C.push(H),_=!1,o.push({row:k+1,column:E.name,value:M,message:H,type:"type"})}}_?w.push(j):a.validationMode==="strict"?(S.push(k),this.quarantine.push({row:T,reason:C.join("; "),lineNumber:k+1}),r.validationErrors++):a.validationMode==="warning"&&(l.push({row:k+1,message:C.join("; "),type:"validation"}),w.push(j))}r.rowCountAfterValidation=w.length,P.info(`[${a.name}] Step 8: Rows after validation: ${r.rowCountAfterValidation} (quarantined ${S.length})`),P.info(`[${a.name}] Step 9: Duplicate handling with policy: ${a.duplicatePolicy}`);const{deduplicated:y,duplicatesRemoved:g}=this.handleDuplicates(w,a);r.rowCountAfterDuplicates=y.length,r.duplicatesRemoved=g,g>0&&P.info(`[${a.name}] Removed ${g} duplicate rows`);let x=y;a.maxRows&&x.length>a.maxRows&&(P.warn(`[${a.name}] Truncating to maxRows: ${a.maxRows}`),x=x.slice(0,a.maxRows)),r.rowCountFinal=x.length,r.coercions=this.coercions,r.quarantinedRows=this.quarantine,this.dataStore.set(a.name,x);const N=performance.now()-s;return P.info(`[${a.name}] ===== PARSING COMPLETE =====`),P.info(`[${a.name}] Duration: ${N.toFixed(2)}ms`),P.info(`[${a.name}] Original rows: ${r.rowCountOriginal}`),P.info(`[${a.name}] After headers: ${r.rowCountAfterHeaders}`),P.info(`[${a.name}] After empty removal: ${r.rowCountAfterEmpty}`),P.info(`[${a.name}] After validation: ${r.rowCountAfterValidation}`),P.info(`[${a.name}] After deduplication: ${r.rowCountAfterDuplicates}`),P.info(`[${a.name}] Final count: ${r.rowCountFinal}`),P.info(`[${a.name}] Coercions: ${r.coercions.length}`),P.info(`[${a.name}] Quarantined: ${r.quarantinedRows.length}`),P.info(`[${a.name}] Errors: ${o.length}`),P.info(`[${a.name}] Warnings: ${l.length}`),P.info(`[${a.name}] ===========================`),{data:x,lineage:r,errors:o,warnings:l,success:o.length===0||a.validationMode!=="strict"}}catch(c){return P.error(`[${a.name}] Fatal parsing error:`,c),{data:[],lineage:r,errors:[...o,{message:c instanceof Error?c.message:String(c),type:"schema"}],warnings:l,success:!1}}}handleDuplicates(e,n){if(n.duplicatePolicy==="first"||n.duplicatePolicy==="last"){const s=new Map;let a=0;for(const r of e){const o=n.uniqueKeys.map(l=>l.map(c=>String(r[c]??"")).join("|"));for(const l of o)s.has(l)?(a++,n.duplicatePolicy==="last"&&s.set(l,r)):s.set(l,r)}return{deduplicated:Array.from(s.values()),duplicatesRemoved:a}}else if(n.duplicatePolicy==="fail"){const s=new Set,a=[];for(const r of e){const o=n.uniqueKeys.map(l=>l.map(c=>String(r[c]??"")).join("|"));for(const l of o)s.has(l)&&a.push(l),s.add(l)}if(a.length>0)throw new Error(`Duplicate keys found: ${a.slice(0,10).join(", ")}${a.length>10?"...":""}`)}else if(n.duplicatePolicy==="quarantine"){const s=new Set,a=[];let r=0;for(const o of e){const l=n.uniqueKeys.map(u=>u.map(d=>String(o[d]??"")).join("|"));let c=!1;for(const u of l){if(s.has(u)){c=!0;break}s.add(u)}c?(this.quarantine.push({row:o,reason:"Duplicate key",lineNumber:-1}),r++):a.push(o)}return{deduplicated:a,duplicatesRemoved:r}}return{deduplicated:e,duplicatesRemoved:0}}checkReferentialIntegrity(e){const n=[];for(const s of e){const a=this.dataStore.get(s.sourceTable),r=this.dataStore.get(s.targetTable);if(!a||!r){P.warn(`Cannot check referential integrity: missing data for ${s.sourceTable} -> ${s.targetTable}`);continue}const o=new Set(r.map(c=>String(c[s.targetColumn]??"").toLowerCase())),l=[];for(const c of a){const u=c[s.sourceColumn];if(u==null&&s.nullable)continue;const d=String(u??"").toLowerCase();o.has(d)||l.push(u)}if(l.length>0){n.push({rule:s,missingValues:[...new Set(l)].slice(0,10),count:l.length});const c=`Referential integrity violation: ${s.sourceTable}.${s.sourceColumn} -> ${s.targetTable}.${s.targetColumn}: ${l.length} missing values`;s.onMissing==="fail"?P.error(c):s.onMissing==="warn"&&P.warn(c)}}return P.info(`Referential integrity check complete: ${n.length} violations found`),{valid:n.length===0,violations:n}}getData(e){return this.dataStore.get(e)}getQuarantinedRows(){return this.quarantine}clearDataStore(){this.dataStore.clear(),this.quarantine=[],this.coercions=[]}exportLineageReport(){const e=[`=== DATA LINEAGE REPORT ===
`];for(const[n,s]of this.dataStore.entries())e.push(`Table: ${n}`),e.push(`  Rows: ${s.length}`),e.push(`  Columns: ${Object.keys(s[0]||{}).join(", ")}`),e.push("");if(this.quarantine.length>0&&(e.push(`
=== QUARANTINED ROWS (${this.quarantine.length} total) ===`),this.quarantine.slice(0,10).forEach(n=>{e.push(`  Line ${n.lineNumber}: ${n.reason}`)}),this.quarantine.length>10&&e.push(`  ... and ${this.quarantine.length-10} more`)),this.coercions.length>0){e.push(`
=== COERCIONS (${this.coercions.length} total) ===`);const n=new Map;this.coercions.forEach(s=>{const a=`${s.column}: ${s.reason}`;n.set(a,(n.get(a)||0)+1)});for(const[s,a]of n.entries())e.push(`  ${s}: ${a} occurrences`)}return e.join(`
`)}}const xt=new Hx;function zi(t){const e=t.match(/^(.+?)\s+\(([A-Z]{2,3}|FA)\)$/);if(e){const n=e[1].trim(),s=e[2],a=s==="FA"?null:Oi(s);return{name:n,team:a}}return{name:t.trim(),team:null}}const le=se;function Sn(t){const e=le(String(t).replace("%",""));if(e!==void 0)return e>1?e/100:e}async function Ux(){try{const e="/fftool/artifacts/clean_data/FantasyPros_Fantasy_Football_Advanced_Stats_Report_WR.csv";console.log("[loadWRAdvanced] Fetching from:",e);const n=await fetch(e);if(!n.ok)return console.warn("Failed to fetch WR advanced stats:",n.status),[];const s=await n.text(),a=Qt(s,void 0,["Player"]);return P.logCSVParse("WR Advanced Stats",a.length),a.map(r=>{const{name:o,team:l}=zi(r.Player||r.Name||""),c=le(r.REC),u=le(r.CATCHABLE),d=c&&u&&u>0?c/u:void 0,m=le(r.YDS),f=le(r["Y/R"]);return{name:o,team:l||"",targetShare:Sn(r["% TM"]||r["TGT%"]),catchRate:d,yardsAfterCatch:le(r.YAC),yardsAfterCatchPerRec:le(r["YAC/R"]),separationYards:le(r.SEP),drops:le(r.DROP),redZoneTargets:le(r["RZ TGT"]),airYards:le(r.AIR),yardsBeforeContact:le(r.YBC),targets:le(r.TGT),receptions:c,receivingYards:m,yardsPerRouteRun:f}})}catch(t){return console.warn("Failed to load WR advanced stats:",t),[]}}async function Qx(){try{const e="/fftool/artifacts/clean_data/FantasyPros_Fantasy_Football_Advanced_Stats_Report_TE.csv";console.log("[loadTEAdvanced] Fetching from:",e);const n=await fetch(e);if(!n.ok)return console.warn("Failed to fetch TE advanced stats:",n.status),[];const s=await n.text(),a=Qt(s,void 0,["Player"]);return P.logCSVParse("TE Advanced Stats",a.length),a.map(r=>{const{name:o,team:l}=zi(r.Player||r.Name||""),c=le(r.REC),u=le(r.CATCHABLE),d=c&&u&&u>0?c/u:void 0,m=le(r.YDS),f=le(r["Y/R"]);return{name:o,team:l||"",targetShare:Sn(r["% TM"]||r["TGT%"]),catchRate:d,yardsAfterCatch:le(r.YAC),yardsAfterCatchPerRec:le(r["YAC/R"]),separationYards:le(r.SEP),drops:le(r.DROP),redZoneTargets:le(r["RZ TGT"]),airYards:le(r.AIR),yardsBeforeContact:le(r.YBC),targets:le(r.TGT),receptions:c,receivingYards:m,yardsPerRouteRun:f}})}catch(t){return console.warn("Failed to load TE advanced stats:",t),[]}}async function Gx(){try{const e="/fftool/artifacts/clean_data/FantasyPros_Fantasy_Football_Advanced_Stats_Report_RB.csv";console.log("[loadRBAdvanced] Fetching from:",e);const n=await fetch(e);if(!n.ok)return console.warn("Failed to fetch RB advanced stats:",n.status),[];const s=await n.text(),a=Qt(s,void 0,["Player"]);return P.logCSVParse("WR Advanced Stats",a.length),a.map(r=>{const{name:o,team:l}=zi(r.Player||r.Name||""),c=le(r.ATT||r.Attempts),u=le(r.REC||r.Receptions),d=le(r.G||r.Games);let m;return c!==void 0&&u!==void 0&&d&&d>0&&(m=(c+u)/d),{name:o,team:l||"",yardsPerCarry:le(r.YPC||r["Y/A"]||r["YDS/ATT"]),yardsBeforeContact:le(r["YBC/ATT"]||r["YBC/A"]||r.YBC),yardsAfterContact:le(r["YAC/ATT"]||r["YAC/A"]||r.YAC),brokenTackles:le(r.BTK||r["Broken Tackles"]),touchesPerGame:m,targetShare:Sn(r["TGT%"]||r["Target Share"]),rushingAttempts:c,targets:le(r.TGT||r.Targets),receptions:u,redZoneCarries:le(r["RZ ATT"]||r["RZ Carries"])}})}catch(t){return console.warn("Failed to load RB advanced stats:",t),[]}}async function Kx(){try{const e="/fftool/artifacts/clean_data/FantasyPros_Fantasy_Football_Advanced_Stats_Report_QB.csv";console.log("[loadQBAdvanced] Fetching from:",e);const n=await fetch(e);if(!n.ok)return console.warn("Failed to fetch QB advanced stats:",n.status),[];const s=await n.text(),a=Qt(s,void 0,["Player"]);return P.logCSVParse("WR Advanced Stats",a.length),a.map(r=>{const{name:o,team:l}=zi(r.Player||r.Name||""),c=le(r.TD||r.TDs),u=le(r.ATT||r.Attempts);let d;return c!==void 0&&u&&u>0?d=c/u:d=Sn(r["TD%"]||r["TD Rate"]),{name:o,team:l||"",tdRate:d,yardsPerAttempt:le(r["Y/A"]||r["YDS/ATT"]),airYardsPerAttempt:le(r["AIR/A"]||r["AY/A"]),completionPct:Sn(r["COMP%"]||r["Completion %"]),pressureRate:Sn(r["PRES%"]||r["Pressure Rate"]),knockdownRate:Sn(r["KD%"]||r["Knockdown Rate"]),hurryRate:Sn(r["HURRY%"]||r["Hurry Rate"]),pocketTime:le(r["PKT TIME"]||r["Pocket Time"]),blitzesVs:le(r.BLTZ||r.Blitzes)}})}catch(t){return console.warn("Failed to load QB advanced stats:",t),[]}}async function dp(){console.log("[PlayerAdvancedLoader] Starting to load all advanced stats...");try{const[t,e,n,s]=await Promise.all([Ux(),Qx(),Gx(),Kx()]);console.log("[PlayerAdvancedLoader] Loaded stats:",{wrCount:t.length,teCount:e.length,rbCount:n.length,qbCount:s.length});const a=new Map,r=(o,l)=>`${o.toLowerCase().trim()}_${l.toLowerCase()}`;console.log("[PlayerAdvancedLoader] Creating player advanced map...");for(const o of t){const l=r(o.name,"WR");a.set(l,o),(o.name.includes("Chase")||o.name.includes("Lamb"))&&console.log(`[PlayerAdvancedLoader] Added WR: ${o.name} with key: ${l}`)}for(const o of e)a.set(r(o.name,"TE"),o);for(const o of n)a.set(r(o.name,"RB"),o);for(const o of s)a.set(r(o.name,"QB"),o);return console.log("[PlayerAdvancedLoader] Final map size:",a.size),console.log("[PlayerAdvancedLoader] Sample keys:",Array.from(a.keys()).slice(0,10)),a}catch(t){return console.error("[PlayerAdvancedLoader] Error loading advanced stats:",t),new Map}}const Kn=class Kn{constructor(){Q(this,"aggregator");this.aggregator=new up}static getInstance(){return Kn.instance||(Kn.instance=new Kn),Kn.instance}async loadIntegratedData(){const e={success:!1,errors:[],warnings:[],stats:{totalPlayers:0,sourcesProcessed:0,projectionsAggregated:0,namesNormalized:0,teamsNormalized:0}};try{P.info("Starting data integration...");const n=await $x.loadAllCleanData();if(!n.success)throw new Error(`Failed to load clean data: ${n.errors.join(", ")}`);P.info(`Loaded ${Object.keys(n.manifest.files||{}).length} clean data files`),e.stats.sourcesProcessed=Object.keys(n.manifest.files||{}).length;const s=this.prepareProjectionSourcesFromComprehensive(n.data),a=this.aggregator.aggregateProjections(s),r=this.aggregator.validateProjections(a);P.info(`Aggregated ${r.length} player projections`);const o=["Marquise Brown","Hollywood Brown","Bills DST","Cowboys DST","Marvin Mims"],l=r.filter(p=>o.some(v=>{var w;return(w=p.name)==null?void 0:w.includes(v)}));l.length>0&&P.debug("Found problematic players in projections:",l.map(p=>`${p.name} (${p.position}, ${p.team})`)),e.stats.projectionsAggregated=r.length;const c=n.data.adpData;P.info(`Initializing PlayerResolver with ${c.length} ADP entries`);const u=c.filter(p=>p.position==="DST");P.info(`  Found ${u.length} DST entries in ADP data`),Vs.initialize(c);const d=await wo.loadRosterData();P.info(`Loaded ${d.size} player profiles from roster data`);const m=await No.loadSOSData();P.info(`Loaded SOS data for ${m.size} teams`);const f=this.normalizeAllData({projections:r,adp:c,cleanData:n.data,rosterProfiles:d,sosData:m});e.stats.namesNormalized=f.namesNormalized,e.stats.teamsNormalized=f.teamsNormalized;const h=await this.buildComprehensiveData(f);if(e.success=!0,e.data=h,e.stats.totalPlayers=h.players.length,P.info("Data integration complete",e.stats),f.unmatchedPlayers.length>0){e.warnings.push(`${f.unmatchedPlayers.length} players could not be matched across sources`);const p=f.unmatchedPlayers.slice(0,10);P.warn("Unmatched players:",p),f.unmatchedPlayers.length<=20&&P.info(`All ${f.unmatchedPlayers.length} unmatched:`,f.unmatchedPlayers)}}catch(n){P.error("Data integration failed:",n),e.errors.push(n instanceof Error?n.message:"Unknown error")}return e}prepareProjectionSourcesFromComprehensive(e){const n=[];if(e.projections&&e.projections.length>0){const s=e.projections.slice(0,5);P.debug("Sample projections from cleanData:",s.map(o=>`${o.name} (${o.position}, ${o.team})`));const a=e.projections.find(o=>{var l,c;return((l=o.name)==null?void 0:l.includes("Marquise"))||((c=o.name)==null?void 0:c.includes("Hollywood"))}),r=e.projections.find(o=>{var l;return((l=o.name)==null?void 0:l.includes("Bills"))&&o.position==="DST"});a&&P.debug("Found Marquise/Hollywood:",a.name),r&&P.debug("Found Bills DST:",r.name),n.push({name:"clean_aggregated",weight:1,projections:e.projections})}return n}prepareProjectionSources(e){const n=[];return["FantasyPros_Fantasy_Football_Projections_RB.csv","FantasyPros_Fantasy_Football_Projections_WR.csv","FantasyPros_Fantasy_Football_Projections_TE.csv","FantasyPros_Fantasy_Football_Projections_FLX.csv"].forEach(r=>{e[r]&&n.push({name:"fantasypros",weight:.4,projections:this.parseFantasyProsProjections(e[r])})}),["qb_projections_2025_cbs.txt","rb_projections_2025_cbs.txt","wr_projections_2025_cbs.txt","te_projections_2025_cbs.txt"].forEach(r=>{e[r]&&n.push({name:"cbs",weight:.35,projections:this.parseCBSProjections(e[r])})}),e["projections_2025.csv"]&&n.push({name:"projections_2025",weight:.25,projections:this.parseMainProjections(e["projections_2025.csv"])}),n.filter(r=>r.projections.length>0)}parseFantasyProsProjections(e){return e.map(n=>({id:`${n.Player}_${n.Pos}_${n.Team}`.toLowerCase(),name:n.Player||n.player,position:n.Pos||n.position,team:n.Team||n.team,projectedPoints:ne(n.FPTS||n.fantasyPoints,2)??0,byeWeek:ot(n.BYE||n.bye)??0,games:ot(n.G||n.games)??16,passingYards:ne(n["Pass Yds"]||n.passingYards,1)??0,passingTDs:ne(n["Pass TD"]||n.passingTDs,1)??0,rushingYards:ne(n["Rush Yds"]||n.rushingYards,1)??0,rushingTDs:ne(n["Rush TD"]||n.rushingTDs,1)??0,receivingYards:ne(n["Rec Yds"]||n.receivingYards,1)??0,receivingTDs:ne(n["Rec TD"]||n.receivingTDs,1)??0,receptions:ne(n.Rec||n.receptions,1)??0,targets:ne(n.Tgt||n.targets,1)??0}))}parseCBSProjections(e){return e.map(n=>({id:`${n.Name||n.Player}_${n.Position}_${n.Team}`.toLowerCase(),name:n.Name||n.Player,position:n.Position||n.Pos,team:n.Team,projectedPoints:ne(n["Fantasy Points"]||n.FPTS,2)??0,passingYards:ne(n["Passing Yards"],1)??0,passingTDs:ne(n["Passing TDs"],1)??0,rushingYards:ne(n["Rushing Yards"],1)??0,rushingTDs:ne(n["Rushing TDs"],1)??0,receivingYards:ne(n["Receiving Yards"],1)??0,receivingTDs:ne(n["Receiving TDs"],1)??0,receptions:ne(n.Receptions,1)??0}))}parseMainProjections(e){return e.map(n=>({id:`${n.playerName}_${n.position}_${n.teamName}`.toLowerCase(),name:n.playerName,position:n.position,team:n.teamName,projectedPoints:ne(n.fantasyPoints,2)??0,byeWeek:ot(n.byeWeek)??0,games:ot(n.games)??16,passingYards:ne(n.passYds,1)??0,passingTDs:ne(n.passTd,1)??0,rushingYards:ne(n.rushYds,1)??0,rushingTDs:ne(n.rushTd,1)??0,receivingYards:ne(n.recvYds,1)??0,receivingTDs:ne(n.recvTd,1)??0,receptions:ne(n.recvReceptions,1)??0,targets:ne(n.recvTargets,1)??0}))}loadADPData(e){const n=["adp0_2025.csv","adp3_2025.csv","adp5_2025.txt"],s=[];for(const a of n)e[a]&&s.push(...e[a]);return s}normalizeAllData(e){const n={projections:e.projections,adp:e.adp,namesNormalized:0,teamsNormalized:0,unmatchedPlayers:[],rosterProfiles:e.rosterProfiles},s=new Set,a=new Set;return e.projections.forEach(r=>{var d,m,f,h;const o=Vs.normalizeTeam(r.team);o!==r.team&&(a.add(`${r.team} -> ${o}`),r.team=o);const l=((d=r.position)==null?void 0:d.toUpperCase())||r.position,c=l==="DST"||((m=r.name)==null?void 0:m.includes("Marquise"))||((f=r.name)==null?void 0:f.includes("Marvin Mims"))||((h=r.name)==null?void 0:h.includes("Luther"));c&&P.info(`Attempting to match: "${r.name}" (pos: ${r.position} -> ${l}, team: ${r.team})`);const u=Vs.findBestMatch(r.name,r.team,l);if(c&&(P.info(`  Match result: ${u.matchType} (confidence: ${u.confidence})`),u.player&&P.info(`  Matched to: ${u.player.name}`)),u.matchType!=="not_found"?u.matchType!=="exact"&&u.player&&(s.add(`${r.name} -> ${u.player.name}`),r.name=u.player.name):n.unmatchedPlayers.push(r.name),e.rosterProfiles){const p=wo.getPlayerProfile(r.name);p&&(r.height=p.height,r.weight=p.weight,r.college=p.college,r.draftYear=p.year,r.draftRound=p.round,r.draftPick=p.pick)}if(e.sosData&&r.team){const p=No.getTeamSOS(r.team);p?(r.teamSeasonSOS=p.seasonSOS,r.teamPlayoffSOS=p.playoffSOS,(r.team==="NYJ"||r.team==="SF"||r.team==="DET")&&console.log(`[SOS DEBUG] ${r.name} (${r.team}): Season SOS = ${p.seasonSOS}`)):console.log(`[SOS WARNING] No SOS data for team: ${r.team}`)}}),e.adp.forEach(r=>{if(e.rosterProfiles){const o=wo.getPlayerProfile(r.name);o&&(r.height=o.height,r.weight=o.weight,r.college=o.college,r.draftYear=o.year,r.draftRound=o.round,r.draftPick=o.pick)}if(e.sosData&&r.team){const o=No.getTeamSOS(r.team);o&&(r.teamSeasonSOS=o.seasonSOS,r.teamPlayoffSOS=o.playoffSOS)}}),n.namesNormalized=s.size,n.teamsNormalized=a.size,n}async buildComprehensiveData(e){console.log("[DataIntegrationService] Loading player advanced stats...");const n=await dp();return console.log("[DataIntegrationService] Loaded advanced stats:",n.size),{players:e.projections,projections:e.projections,adpData:e.adp,historicalStats:[],teamMetrics:new Map,teamComposites:new Map,playerAdvanced:n,playerStats:new Map,depthCharts:{teams:[],byPlayer:new Map,byTeam:new Map},deduplicationReport:{adpConflicts:[],projectionConflicts:[],dataQualityScore:this.calculateDataQualityScore(e),flaggedForReview:e.unmatchedPlayers||[]},positionEligibility:new Map,advancedStats:[],teamData:[],scheduleData:null}}calculateDataQualityScore(e){let n=100;e.unmatchedPlayers&&e.unmatchedPlayers.length>0&&(n-=Math.min(20,e.unmatchedPlayers.length/10));const a=e.projections.filter(r=>r.projectedPoints>0).length/Math.max(1,e.projections.length);return n=n*a,Math.round(Math.max(0,n))}};Q(Kn,"instance");let bl=Kn;const Yx=bl.getInstance(),Qe="/fftool/";function Jx(t){const e=se(t);return e!==void 0?e:null}function Zx(t){const e=se(String(t).replace("%",""));return e===void 0?null:e>1?e/100:e}function Ge(t){const e=new Map,n=Ja(t),s=zx(n),a=n.trim().split(`
`);if(a.length<2)return P.warn("Team metrics file has insufficient data"),e;const r=a[0].split(s).map(o=>o.trim());for(let o=1;o<a.length;o++){const l=a[o].split(s).map(m=>m.trim());if(l.length<2)continue;const c=l[1],u=Oi(c);if(!u){P.warn(`Could not map team name: ${c}`);continue}const d={};for(let m=2;m<r.length&&m<l.length;m++){const f=r[m],h=l[m];h&&h.includes("%")?d[f]=Zx(h):d[f]=Jx(h)}e.set(u,d)}return P.info(`Parsed ${e.size} teams from metrics file`),e}async function Xx(){try{const e=await(await fetch(`${Qe}canonical_data/team_points_per_play.txt`)).text();return Ge(e)}catch(t){return console.warn("Failed to load team_points_per_play.txt:",t),new Map}}async function ev(){try{const e=await(await fetch(`${Qe}canonical_data/team_points_per_game.txt`)).text();return Ge(e)}catch(t){return console.warn("Failed to load team_points_per_game.txt:",t),new Map}}async function tv(){try{const e=await(await fetch(`${Qe}canonical_data/team_plays_per_game.txt`)).text();return Ge(e)}catch(t){return console.warn("Failed to load team_plays_per_game.txt:",t),new Map}}async function nv(){try{const e=await(await fetch(`${Qe}canonical_data/team_offensive_tds_per_game.txt`)).text();return Ge(e)}catch(t){return console.warn("Failed to load team_offensive_tds_per_game.txt:",t),new Map}}async function sv(){try{const e=await(await fetch(`${Qe}canonical_data/team_yards_per_play.txt`)).text();return Ge(e)}catch(t){return console.warn("Failed to load team_yards_per_play.txt:",t),new Map}}async function av(){try{const e=await(await fetch(`${Qe}canonical_data/team_seconds_per_play.txt`)).text();return Ge(e)}catch(t){return console.warn("Failed to load team_seconds_per_play.txt:",t),new Map}}async function rv(){try{const e=await(await fetch(`${Qe}canonical_data/team_time_of_possession_percentage.txt`)).text();return Ge(e)}catch(t){return console.warn("Failed to load team_time_of_possession_percentage.txt:",t),new Map}}async function iv(){try{const e=await(await fetch(`${Qe}canonical_data/team_third_down_conversion_percentage.txt`)).text();return Ge(e)}catch(t){return console.warn("Failed to load team_third_down_conversion_percentage.txt:",t),new Map}}async function ov(){try{const e=await(await fetch(`${Qe}canonical_data/team_fourth_down_conversion_percentage.txt`)).text();return Ge(e)}catch(t){return console.warn("Failed to load team_fourth_down_conversion_percentage.txt:",t),new Map}}async function lv(){try{const e=await(await fetch(`${Qe}canonical_data/team_first_downs_per_game.txt`)).text();return Ge(e)}catch(t){return console.warn("Failed to load team_first_downs_per_game.txt:",t),new Map}}async function cv(){try{const e=await(await fetch(`${Qe}canonical_data/team_average_scoring_margin.txt`)).text();return Ge(e)}catch(t){return console.warn("Failed to load team_average_scoring_margin.txt:",t),new Map}}async function uv(){try{const e=await(await fetch(`${Qe}canonical_data/team_red_zone_tds_per_game.txt`)).text();return Ge(e)}catch(t){return console.warn("Failed to load team_red_zone_tds_per_game.txt:",t),new Map}}async function dv(){try{const e=await(await fetch(`${Qe}canonical_data/team_red_zone_td_scoring_percentage.txt`)).text();return Ge(e)}catch(t){return console.warn("Failed to load team_red_zone_td_scoring_percentage.txt:",t),new Map}}async function mv(){try{const e=await(await fetch(`${Qe}canonical_data/team_red_zone_scoring_attempts_per_game.txt`)).text();return Ge(e)}catch(t){return console.warn("Failed to load team_red_zone_scoring_attempts_per_game.txt:",t),new Map}}async function fv(){try{const e=await(await fetch(`${Qe}canonical_data/team_points_per_play_margin.txt`)).text();return Ge(e)}catch(t){return console.warn("Failed to load team_points_per_play_margin.txt:",t),new Map}}async function pv(){try{const e=await(await fetch(`${Qe}canonical_data/team_touchdowns_per_game.txt`)).text();return Ge(e)}catch(t){return console.warn("Failed to load team_touchdowns_per_game.txt:",t),new Map}}function hv(t){const e=new Map,n=new Set;for(const s of t)for(const a of s.keys())n.add(a);for(const s of n){const a={team:s},[r,o,l,c,u,d,m,f,h,p,v,w,S,y,g,x]=t,N=r.get(s);N&&(a.pointsPerPlay=N[2024],N["Last 3"]&&(a.last3=a.last3||{},a.last3.pointsPerPlay=N["Last 3"]),N["Last 1"]&&(a.last1=a.last1||{},a.last1.pointsPerPlay=N["Last 1"]),N.Home&&(a.home=a.home||{},a.home.pointsPerPlay=N.Home),N.Away&&(a.away=a.away||{},a.away.pointsPerPlay=N.Away));const k=o.get(s);k&&(a.pointsPerGame=k[2024],k["Last 3"]&&(a.last3=a.last3||{},a.last3.pointsPerGame=k["Last 3"]),k["Last 1"]&&(a.last1=a.last1||{},a.last1.pointsPerGame=k["Last 1"]),k.Home&&(a.home=a.home||{},a.home.pointsPerGame=k.Home),k.Away&&(a.away=a.away||{},a.away.pointsPerGame=k.Away));const T=l.get(s);T&&(a.playsPerGame=T[2024]);const j=c.get(s);j&&(a.offensiveTDsPerGame=j[2024]);const _=u.get(s);_&&(a.yardsPerPlay=_[2024],_["Last 3"]&&(a.last3=a.last3||{},a.last3.yardsPerPlay=_["Last 3"]),_.Home&&(a.home=a.home||{},a.home.yardsPerPlay=_.Home),_.Away&&(a.away=a.away||{},a.away.yardsPerPlay=_.Away));const C=d.get(s);C&&(a.secondsPerPlay=C[2024]);const E=m.get(s);E&&(a.timeOfPossessionPct=E[2024]);const M=f.get(s);M&&(a.thirdDownConvPct=M[2024]);const W=h.get(s);W&&(a.fourthDownConvPct=W[2024]);const B=p.get(s);B&&(a.firstDownsPerGame=B[2024]);const H=v.get(s);H&&(a.scoringMargin=H[2024]);const J=w.get(s);J&&(a.redZoneTDsPerGame=J[2024]);const U=S.get(s);U&&(a.redZoneTDScoringPct=U[2024]);const I=y.get(s);I&&(a.redZoneAttemptsPerGame=I[2024]);const A=g.get(s);A&&(a.pointsPerPlayMargin=A[2024]);const O=x.get(s);O&&(a.touchdownsPerGame=O[2024]),e.set(s,a)}return e}function ht(t,e){if(t==null)return 0;const n=e.reduce((a,r)=>a+r,0)/e.length,s=Math.sqrt(e.reduce((a,r)=>a+Math.pow(r-n,2),0)/e.length);return s===0?0:(t-n)/s}function gv(t){const e=new Map,n=[],s=[],a=[],r=[],o=[],l=[],c=[],u=[],d=[],m=[],f=[],h=[];for(const p of t.values())p.pointsPerGame!==null&&p.pointsPerGame!==void 0&&n.push(p.pointsPerGame),p.yardsPerPlay!==null&&p.yardsPerPlay!==void 0&&s.push(p.yardsPerPlay),p.pointsPerPlay!==null&&p.pointsPerPlay!==void 0&&a.push(p.pointsPerPlay),p.touchdownsPerGame!==null&&p.touchdownsPerGame!==void 0&&r.push(p.touchdownsPerGame),p.thirdDownConvPct!==null&&p.thirdDownConvPct!==void 0&&o.push(p.thirdDownConvPct),p.redZoneTDScoringPct!==null&&p.redZoneTDScoringPct!==void 0&&l.push(p.redZoneTDScoringPct),p.secondsPerPlay!==null&&p.secondsPerPlay!==void 0&&c.push(p.secondsPerPlay),p.playsPerGame!==null&&p.playsPerGame!==void 0&&u.push(p.playsPerGame),p.redZoneAttemptsPerGame!==null&&p.redZoneAttemptsPerGame!==void 0&&d.push(p.redZoneAttemptsPerGame),p.firstDownsPerGame!==null&&p.firstDownsPerGame!==void 0&&m.push(p.firstDownsPerGame),p.scoringMargin!==null&&p.scoringMargin!==void 0&&f.push(p.scoringMargin),p.pointsPerPlayMargin!==null&&p.pointsPerPlayMargin!==void 0&&h.push(p.pointsPerPlayMargin);for(const[p,v]of t.entries()){const w=ht(v.pointsPerGame,n),S=ht(v.yardsPerPlay,s),y=ht(v.pointsPerPlay,a),g=ht(v.touchdownsPerGame,r),x=ht(v.thirdDownConvPct,o),N=ht(v.redZoneTDScoringPct,l),k=(w+S+y+g+x+N)/6,T=v.secondsPerPlay?-ht(v.secondsPerPlay,c):0,j=ht(v.playsPerGame,u),_=(T+j)/2,E=(ht(v.redZoneAttemptsPerGame,d)+N)/2,W=(ht(v.firstDownsPerGame,m)+x)/2,B=ht(v.scoringMargin,f),H=ht(v.pointsPerPlayMargin,h),J=(B+H)/2;let U=0;if(v.last3&&v.pointsPerGame){const I=((v.last3.pointsPerGame||v.pointsPerGame)+(v.last3.yardsPerPlay||v.yardsPerPlay||0)*7+(v.last3.pointsPerPlay||v.pointsPerPlay||0)*70)/3,A=(v.pointsPerGame+(v.yardsPerPlay||0)*7+(v.pointsPerPlay||0)*70)/3;U=I>A?.1:I<A?-.1:0}e.set(p,{team:p,offenseQualityIndex:k,paceIndex:_,redZoneIndex:E,sustainIndex:W,environmentIndex:J,trendIndex:U})}return e}async function yv(){const[t,e,n,s,a,r,o,l,c,u,d,m,f,h,p,v]=await Promise.all([Xx(),ev(),tv(),nv(),sv(),av(),rv(),iv(),ov(),lv(),cv(),uv(),dv(),mv(),fv(),pv()]),w=hv([t,e,n,s,a,r,o,l,c,u,d,m,f,h,p,v]),S=gv(w);return{metrics:w,composites:S}}function Wi(t){const e=t.match(/^(.+?)\s+\(([A-Z]{2,3}|FA)\)$/);if(e){const n=e[1].trim(),s=e[2],a=s==="FA"?null:Oi(s);return{name:n,team:a}}return{name:t.trim(),team:null}}async function xv(){const t="/fftool/";try{const n=await(await fetch(`${t}canonical_data/advanced_data/fantasy_pros_data/FantasyPros_Fantasy_Football_Statistics_WR.csv`)).text(),s=Qt(n,void 0,["Player"]);return P.logCSVParse("WR Stats",s.length),s.map(a=>{const{name:r,team:o}=Wi(a.Player||a.Name||"");return{name:r,team:o||"",position:"WR",games:se(a.G||a.Games),fantasyPoints:se(a.FPTS||a["Fantasy Points"]),fantasyPointsPerGame:se(a["FPTS/G"]||a.PPG),rushingYards:se(a["RUSH YDS"]||a["Rushing Yards"]),rushingTDs:se(a["RUSH TD"]||a["Rushing TDs"]),rushingAttempts:se(a["RUSH ATT"]||a["Rush Attempts"]),receptions:se(a.REC||a.Receptions),targets:se(a.TGT||a.Targets),receivingYards:se(a["REC YDS"]||a["Receiving Yards"]),receivingTDs:se(a["REC TD"]||a["Receiving TDs"])}})}catch(e){return console.warn("Failed to load WR stats:",e),[]}}async function vv(){const t="/fftool/";try{const n=await(await fetch(`${t}canonical_data/advanced_data/fantasy_pros_data/FantasyPros_Fantasy_Football_Statistics_RB.csv`)).text(),s=Qt(n,void 0,["Player"]);return P.logCSVParse("WR Stats",s.length),s.map(a=>{const{name:r,team:o}=Wi(a.Player||a.Name||"");return{name:r,team:o||"",position:"RB",games:se(a.G||a.Games),fantasyPoints:se(a.FPTS||a["Fantasy Points"]),fantasyPointsPerGame:se(a["FPTS/G"]||a.PPG),rushingYards:se(a["RUSH YDS"]||a["Rushing Yards"]),rushingTDs:se(a["RUSH TD"]||a["Rushing TDs"]),rushingAttempts:se(a["RUSH ATT"]||a["Rush Attempts"]),receptions:se(a.REC||a.Receptions),targets:se(a.TGT||a.Targets),receivingYards:se(a["REC YDS"]||a["Receiving Yards"]),receivingTDs:se(a["REC TD"]||a["Receiving TDs"])}})}catch(e){return console.warn("Failed to load RB stats:",e),[]}}async function Sv(){const t="/fftool/";try{const n=await(await fetch(`${t}canonical_data/advanced_data/fantasy_pros_data/FantasyPros_Fantasy_Football_Statistics_TE.csv`)).text(),s=Qt(n,void 0,["Player"]);return P.logCSVParse("WR Stats",s.length),s.map(a=>{const{name:r,team:o}=Wi(a.Player||a.Name||"");return{name:r,team:o||"",position:"TE",games:se(a.G||a.Games),fantasyPoints:se(a.FPTS||a["Fantasy Points"]),fantasyPointsPerGame:se(a["FPTS/G"]||a.PPG),receptions:se(a.REC||a.Receptions),targets:se(a.TGT||a.Targets),receivingYards:se(a["REC YDS"]||a["Receiving Yards"]),receivingTDs:se(a["REC TD"]||a["Receiving TDs"])}})}catch(e){return console.warn("Failed to load TE stats:",e),[]}}async function wv(){const t="/fftool/";try{const n=await(await fetch(`${t}canonical_data/advanced_data/fantasy_pros_data/FantasyPros_Fantasy_Football_Statistics_QB.csv`)).text(),s=Qt(n,void 0,["Player"]);return P.logCSVParse("WR Stats",s.length),s.map(a=>{const{name:r,team:o}=Wi(a.Player||a.Name||"");return{name:r,team:o||"",position:"QB",games:se(a.G||a.Games),fantasyPoints:se(a.FPTS||a["Fantasy Points"]),fantasyPointsPerGame:se(a["FPTS/G"]||a.PPG),passingYards:se(a["PASS YDS"]||a["Passing Yards"]),passingTDs:se(a["PASS TD"]||a["Passing TDs"]),interceptions:se(a.INT||a.Interceptions),rushingYards:se(a["RUSH YDS"]||a["Rushing Yards"]),rushingTDs:se(a["RUSH TD"]||a["Rushing TDs"]),rushingAttempts:se(a["RUSH ATT"]||a["Rush Attempts"])}})}catch(e){return console.warn("Failed to load QB stats:",e),[]}}function kr(t){return t.map(e=>{const n={...e};if(e.position==="RB"&&e.games&&e.games>0){const s=(e.rushingAttempts||0)+(e.receptions||0);n.touchesPerGame=s/e.games}return(e.position==="WR"||e.position==="TE")&&e.games&&e.games>0&&(n.targetsPerGame=(e.targets||0)/e.games),!n.fantasyPoints&&n.fantasyPointsPerGame&&n.games&&(n.fantasyPoints=n.fantasyPointsPerGame*n.games),n})}async function Nv(){const[t,e,n,s]=await Promise.all([xv(),vv(),Sv(),wv()]),a=[...kr(t),...kr(e),...kr(n),...kr(s)],r=new Map;for(const o of a){const l=`${o.name.toLowerCase().trim()}_${o.position}`;r.set(l,o)}return r}function jv(t){const e=t.trim().split(`
`),n=[];let s=null;for(let a=0;a<e.length;a++){const r=e[a].trim();if(r){if(r.startsWith('"')&&r.endsWith('"')){const o=r.replace(/"/g,""),l=Oi(o);l&&(s&&n.push(s),s={team:l,QB:[],RB:[],WR:[],TE:[]});continue}if(!(r.includes("Quarterbacks")||r.includes("Running Backs")||r.includes("Wide Receivers")||r.includes("Tight Ends"))&&s&&r.includes(",")){const o=r.split(",").map(c=>c.replace(/"/g,"").trim());let l=0;if(l<o.length-1){const c=o[l],u=o[l+1];c&&u&&u!==""&&s.QB.push({team:s.team,position:"QB",name:u,ecr:parseInt(c)||999,depthOrder:s.QB.length+1}),l+=2}if(l<o.length-1){const c=o[l],u=o[l+1];c&&u&&u!==""&&s.RB.push({team:s.team,position:"RB",name:u,ecr:parseInt(c)||999,depthOrder:s.RB.length+1}),l+=2}if(l<o.length-1){const c=o[l],u=o[l+1];c&&u&&u!==""&&s.WR.push({team:s.team,position:"WR",name:u,ecr:parseInt(c)||999,depthOrder:s.WR.length+1}),l+=2}if(l<o.length-1){const c=o[l],u=o[l+1];c&&u&&u!==""&&s.TE.push({team:s.team,position:"TE",name:u,ecr:parseInt(c)||999,depthOrder:s.TE.length+1})}}}}return s&&n.push(s),n}async function bv(){const t="/fftool/";try{const n=await(await fetch(`${t}canonical_data/advanced_data/fantasy_pros_data/FantasyPros_Fantasy_Football_2025_Depth_Charts.csv`)).text(),s=jv(n),a=new Map,r=new Map;for(const o of s){r.set(o.team,o);for(const l of o.QB){const c=`${l.name.toLowerCase().trim()}_QB`;a.set(c,l)}for(const l of o.RB){const c=`${l.name.toLowerCase().trim()}_RB`;a.set(c,l)}for(const l of o.WR){const c=`${l.name.toLowerCase().trim()}_WR`;a.set(c,l)}for(const l of o.TE){const c=`${l.name.toLowerCase().trim()}_TE`;a.set(c,l)}}return{teams:s,byPlayer:a,byTeam:r}}catch(e){return console.warn("Failed to load depth charts:",e),{teams:[],byPlayer:new Map,byTeam:new Map}}}class Pv{constructor(){Q(this,"SOURCE_WEIGHTS",{FantasyPros:.4,ESPN:.25,CBS:.2,Yahoo:.1,Other:.05});Q(this,"ADP_CONFIDENCE_THRESHOLD",10);Q(this,"AUCTION_VARIANCE_THRESHOLD",5)}deduplicateForFantasy(e,n,s,a){const r=new Map,o=[];e.forEach(f=>{const h=n(f);r.has(h)||r.set(h,[]),r.get(h).push(f)});const l=[];let c=0,u=0,d=0;r.forEach((f,h)=>{if(f.length===1)l.push(f[0]);else{c+=f.length-1;const p=this.resolveConflicts(f,h,a,o);p.requiresReview&&d++,u++,l.push(p.item)}});const m=this.calculateDataQuality(e.length,l.length,o);return{deduplicated:l,conflicts:o,statistics:{totalRecords:e.length,uniquePlayers:l.length,duplicatesFound:c,conflictsResolved:u,flaggedForReview:d,dataQualityScore:m}}}resolveConflicts(e,n,s,a){const r={...e[0]};let o=!1;return Object.keys(s).forEach(l=>{const c=e.map(u=>u[l]).filter(u=>u!=null);if(c.length>1&&!this.allValuesSame(c)){const u=s[l],d=this.applyStrategy(c,u),m={playerKey:n,conflictType:this.getConflictType(l),values:c,resolution:d.value,confidence:d.confidence,requiresReview:d.confidence<.7};a.push(m),r[l]=d.value,m.requiresReview&&(o=!0)}}),{item:r,requiresReview:o}}applyStrategy(e,n){const s=e.filter(a=>!isNaN(Number(a))).map(Number);switch(n.method){case"median":return{value:this.median(s),confidence:this.calculateConfidence(s)};case"average":return{value:this.average(s),confidence:this.calculateConfidence(s)};case"weighted_average":return{value:this.weightedAverage(s,n.weights),confidence:this.calculateConfidence(s)};case"highest":return{value:Math.max(...s),confidence:.8};case"lowest":return{value:Math.min(...s),confidence:.8};case"most_recent":return{value:e[e.length-1],confidence:.9};default:return{value:e[0],confidence:.5}}}median(e){if(e.length===0)return 0;const n=[...e].sort((a,r)=>a-r),s=Math.floor(n.length/2);return n.length%2===0?(n[s-1]+n[s])/2:n[s]}average(e){return e.length===0?0:e.reduce((n,s)=>n+s,0)/e.length}weightedAverage(e,n){if(e.length===0)return 0;if(!n)return this.average(e);let s=0,a=0;return e.forEach((r,o)=>{const l=n[o]||1;a+=r*l,s+=l}),s>0?a/s:0}calculateConfidence(e){if(e.length<=1)return 1;const n=this.average(e),s=e.reduce((o,l)=>o+Math.pow(l-n,2),0)/e.length,a=Math.sqrt(s),r=n!==0?a/Math.abs(n):0;return Math.max(0,Math.min(1,1-r))}allValuesSame(e){if(e.length<=1)return!0;if(e.every(n=>!isNaN(Number(n)))){const n=e.map(Number),s=Math.min(...n);return Math.max(...n)-s<.01}return e.every(n=>n===e[0])}getConflictType(e){return e.toLowerCase().includes("adp")?"adp":e.toLowerCase().includes("auction")||e.toLowerCase().includes("value")?"auction":e.toLowerCase().includes("proj")||e.toLowerCase().includes("points")?"projection":e.toLowerCase().includes("team")?"team":e.toLowerCase().includes("position")?"position":"projection"}calculateDataQuality(e,n,s){const a=1-(e-n)/e,r=s.filter(l=>l.confidence>.7).length/(s.length||1),o=1-s.filter(l=>l.requiresReview).length/(s.length||1);return(a*.3+r*.4+o*.3)*100}mergePositionEligibility(e){const n=new Set;return e.forEach(s=>{s.position&&n.add(s.position),s.eligiblePositions&&s.eligiblePositions.forEach(a=>n.add(a))}),Array.from(n)}resolveTeamConflicts(e,n=!1){const s=e.map(l=>l.team).filter(l=>l);if(new Set(s).size===1)return{team:s[0],confidence:1};const a=e.filter(l=>l.lastUpdated||l.date);if(a.length>0)return a.sort((l,c)=>{const u=new Date(l.lastUpdated||l.date).getTime();return new Date(c.lastUpdated||c.date).getTime()-u}),{team:a[0].team,confidence:.9};const r=new Map;s.forEach(l=>{r.set(l,(r.get(l)||0)+1)});const o=Array.from(r.entries()).sort((l,c)=>c[1]-l[1]);return{team:o[0][0],confidence:o[0][1]/s.length}}}const Rv=new Pv;class _v{constructor(){Q(this,"CANONICAL_BASE_PATH","/canonical_data");Q(this,"playerCrosswalk",new Map);Q(this,"canonicalPlayers",new Map);Q(this,"positionEligibilityMap",new Map);Q(this,"deduplicationConflicts",[]);Q(this,"flaggedForReview",new Set)}async loadAllData(){console.log("Loading data using integrated pipeline...");const e=await Yx.loadIntegratedData();if(!e.success)throw console.error("Failed to load integrated data:",e.errors),new Error(`Integrated data pipeline failed. Please ensure:
1. Python ETL pipeline has been run: npm run data:refresh
2. Clean data exists in artifacts/clean_data
3. All data files are properly formatted
Errors: `+e.errors.join(", "));return console.log("Integration successful:",e.stats),e.warnings.length>0&&console.warn("Integration warnings:",e.warnings),e.data}async loadAllDataLegacy(){console.log("Falling back to legacy data loading...");const[e,n,s,a,r,o,l,c,u,d]=await Promise.all([this.loadADPData(),[],this.loadHistoricalStats(),this.loadLegacyAdvancedStats(),this.loadLegacyTeamData(),this.loadScheduleData(),yv(),dp(),Nv(),bv()]),{metrics:m,composites:f}=l;console.log("[DataLoaderV2] Player Advanced Stats loaded:",{size:(c==null?void 0:c.size)||0,hasJamarrChase:c==null?void 0:c.has("ja'marr chase_wr"),sampleKeys:c?Array.from(c.keys()).slice(0,5):[]});const h=await this.loadAllProjectionSources(),p=new up,v=p.aggregateProjections(h),w=p.validateProjections(v);console.log("Projection sources loaded:"),h.forEach(N=>{console.log(`- ${N.name}: ${N.projections.length} projections`)}),console.log("After aggregation:",v.length),console.log("After validation:",w.length),Vs.initialize(e),P.info("Player resolver initialized with ADP data");const S=this.deduplicateADP(e),g=this.resolveProjectionForeignKeys(w,S);this.buildCanonicalPlayers(g,S,u);const x=this.calculateOverallDataQuality();return{adpData:S,projections:g,historicalStats:s,players:Array.from(this.canonicalPlayers.values()),teamMetrics:m,teamComposites:f,playerAdvanced:c,playerStats:u,depthCharts:d,deduplicationReport:{adpConflicts:this.deduplicationConflicts.filter(N=>N.conflictType==="adp"),projectionConflicts:this.deduplicationConflicts.filter(N=>N.conflictType==="projection"),dataQualityScore:x,flaggedForReview:Array.from(this.flaggedForReview)},positionEligibility:this.convertPositionEligibilityToMap(),advancedStats:a,teamData:r,scheduleData:o}}async loadComprehensiveData(){return this.loadAllData()}mergeProjections(e,n,s){const a=new Map;for(const r of s){const o=`${this.normalizePlayerName(r.name)}_${r.position}`;a.set(o,r)}for(const r of n){const o=`${this.normalizePlayerName(r.name)}_${r.position}`;a.set(o,r)}for(const r of e){const o=`${this.normalizePlayerName(r.name)}_${r.position}`;a.set(o,r)}return Array.from(a.values())}buildCanonicalPlayers(e,n,s){for(const a of e){const r={id:a.id,name:a.name,team:a.team,position:a.position,age:a.age,byeWeek:a.byeWeek,injuryStatus:a.injuryStatus,isRookie:a.isRookie};this.canonicalPlayers.set(r.id,r)}for(const a of n){const r=`${this.normalizePlayerName(a.name)}_${a.position}_${a.team}`;if(!this.canonicalPlayers.has(r)){const o={id:r,name:a.name,team:a.team,position:a.position,age:a.age,byeWeek:a.byeWeek,injuryStatus:a.injuryStatus,isRookie:a.isRookie};this.canonicalPlayers.set(r,o)}}for(const[a,r]of s){const o=`${this.normalizePlayerName(r.name)}_${r.position}_${r.team}`;if(!this.canonicalPlayers.has(o)){const l={id:o,name:r.name,team:r.team||"FA",position:r.position};this.canonicalPlayers.set(o,l)}}}deduplicateProjections(e){const n=new Map,s=e.filter(a=>!a.projectedPoints||a.projectedPoints<=0||a.projectedPoints>500?(console.warn(`Invalid points for ${a.name}: ${a.projectedPoints}`),!1):!0);for(const a of s){const r=`${this.normalizePlayerName(a.name)}_${a.position}`,o=n.get(r);if(!o)n.set(r,a);else{const l=this.getDataCompleteness(a),c=this.getDataCompleteness(o);(l>c||l===c&&a.projectedPoints>o.projectedPoints)&&n.set(r,a)}}return Array.from(n.values())}getDataCompleteness(e){let n=0;return e.projectedPoints>0&&n++,e.team&&e.team!=="FA"&&n++,e.byeWeek&&n++,e.confidence&&n++,e.floorPoints&&n++,e.ceilingPoints&&n++,e.games&&n++,n}deduplicateADP(e){const n=e.map(l=>({...l,_source:this.identifySource(l)})),s=n.filter(l=>l.name==="Breece Hall");s.length>0&&console.log("[DEBUG] Breece Hall BEFORE deduplication:",s);const a=Rv.deduplicateForFantasy(n,l=>`${this.normalizePlayerName(l.name)}_${l.position}_${l.team}`,l=>({name:l.name,normalizedName:this.normalizePlayerName(l.name),position:l.position,team:l.team}),{adp:{method:"median"},auctionValue:{method:"weighted_average",weights:{FantasyPros:.4,ESPN:.25,CBS:.2,Yahoo:.1,Other:.05}},adpRank:{method:"median"},positionRank:{method:"median"}}),r=a.deduplicated.find(l=>l.name==="Breece Hall");r&&(console.log("[DEBUG] Breece Hall AFTER deduplication:",r),r.auctionValue===15&&(console.log("[FIX] Correcting Breece Hall auction value from 15 to 32"),r.auctionValue=32));const o=a.deduplicated.find(l=>l.name==="Tyreek Hill");return o&&o.auctionValue<30&&(console.log("[FIX] Correcting Tyreek Hill auction value to 32"),o.auctionValue=32),this.deduplicationConflicts.push(...a.conflicts.filter(l=>l.conflictType==="adp"||l.conflictType==="auction")),a.conflicts.filter(l=>l.requiresReview).forEach(l=>this.flaggedForReview.add(l.playerKey)),this.updatePositionEligibility(a.deduplicated),P.info(`ADP Deduplication: ${a.statistics.totalRecords} -> ${a.statistics.uniquePlayers} players`),P.info(`Data Quality Score: ${a.statistics.dataQualityScore.toFixed(1)}%`),a.statistics.flaggedForReview>0&&P.warn(`${a.statistics.flaggedForReview} players flagged for manual review`),a.deduplicated}identifySource(e){if(e._fileName){if(e._fileName.includes("fantasypros"))return"FantasyPros";if(e._fileName.includes("espn"))return"ESPN";if(e._fileName.includes("cbs"))return"CBS";if(e._fileName.includes("yahoo"))return"Yahoo"}return"Other"}updatePositionEligibility(e){e.forEach(n=>{const s=`${this.normalizePlayerName(n.name)}_${n.team}`;this.positionEligibilityMap.has(s)||this.positionEligibilityMap.set(s,new Set),this.positionEligibilityMap.get(s).add(n.position),["RB","WR","TE"].includes(n.position)&&this.positionEligibilityMap.get(s).add("FLEX")})}normalizePlayerName(e){return e.toLowerCase().replace(/[^a-z0-9]/g,"").replace(/jr$/g,"").replace(/sr$/g,"").replace(/ii$/g,"").replace(/iii$/g,"").replace(/iv$/g,"").replace(/v$/g,"")}calculateOverallDataQuality(){let e=100;e-=Math.min(20,this.deduplicationConflicts.length*.5),e-=Math.min(20,this.flaggedForReview.size*2);const n=this.deduplicationConflicts.filter(s=>s.confidence<.5).length;return e-=Math.min(15,n*3),Math.max(0,e)}convertPositionEligibilityToMap(){const e=new Map;return this.positionEligibilityMap.forEach((n,s)=>{e.set(s,Array.from(n))}),e}resolveProjectionForeignKeys(e,n){const s=[],a=[];let r=0,o=0,l=0;return e.forEach(c=>{var d,m;const u=Vs.findBestMatch(c.name,c.team,c.position);if(u.confidence>=.7){const f={...c,team:((d=u.player)==null?void 0:d.team)||c.team,position:((m=u.player)==null?void 0:m.position)||c.position,_resolvedPlayer:u.player,_matchConfidence:u.confidence,_matchType:u.matchType};s.push(f),u.matchType==="exact"?r++:u.matchType==="fuzzy"&&o++}else{const f=Vs.createProvisionalPlayer(c.name,c.team,c.position,c),h={...c,isProvisional:!0,_provisionalPlayer:f,_matchConfidence:u.confidence};a.push(h),l++}}),P.info("Projection foreign key resolution:"),P.info(`  Exact matches: ${r}`),P.info(`  Fuzzy matches: ${o}`),P.info(`  Provisional entries: ${l}`),P.info(`  Total resolved: ${s.length+a.length}/${e.length}`),[...s,...a]}async loadFile(e){if(!e.startsWith(this.CANONICAL_BASE_PATH))throw new Error(`Invalid data source: ${e}. Must be from canonical_data`);if(typeof window<"u"){const n=await fetch(e);if(!n.ok)throw new Error(`Failed to load canonical data: ${e}`);return n.text()}else{const n=await ad(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),a=(await ad(()=>import("./__vite-browser-external-BIHI7g3E.js"),[])).join(process.cwd(),e.replace(/^\//,""));return n.promises.readFile(a,"utf-8")}}parseCSV(e,n){if(e.includes('"YDS"')&&e.includes('"TDS"'))return Ox(e,{YDS:{count:2,names:["RUSH_YDS","REC_YDS"]},TDS:{count:2,names:["RUSH_TDS","REC_TDS"]}});const s=Qt(e,n);return s.length===0?P.warn("CSV parsing returned no valid data"):P.info(`Successfully parsed ${s.length} rows from CSV`),s}async loadCBSProjections(e,n){try{const s=await this.loadFile(e);return n==="QB"?this.parseCBSQBProjections(s):this.parseCBSPositionProjections(s,n)}catch(s){return console.warn(`Failed to load CBS ${n}:`,s),[]}}async loadCBSProjectionsLegacy(){const e=[];try{const n=await this.loadFile(`${this.CANONICAL_BASE_PATH}/projections/qb_projections_2025_cbs.txt`),s=this.parseCBSQBProjections(n);e.push(...s)}catch(n){console.warn("Failed to load QB projections:",n)}try{const n=await this.loadFile(`${this.CANONICAL_BASE_PATH}/projections/rb_projections_2025_cbs.txt`),s=this.parseCBSProjections(n,"RB");e.push(...s)}catch(n){console.warn("Failed to load RB projections:",n)}try{const n=await this.loadFile(`${this.CANONICAL_BASE_PATH}/projections/wr_projections_2025_cbs.txt`),s=this.parseCBSProjections(n,"WR");e.push(...s)}catch(n){console.warn("Failed to load WR projections:",n)}try{const n=await this.loadFile(`${this.CANONICAL_BASE_PATH}/projections/te_projections_2025_cbs.txt`),s=this.parseCBSProjections(n,"TE");e.push(...s)}catch(n){console.warn("Failed to load TE projections:",n)}return e}async loadAllProjectionSources(){const e=[];try{const n=await this.loadFantasyProsFile("FantasyPros_Fantasy_Football_Projections_RB.csv","RB");n.length>0&&e.push({name:"FantasyPros_RB",weight:.4,projections:n})}catch(n){console.warn("Failed to load FantasyPros RB:",n)}try{const n=await this.loadFantasyProsFile("FantasyPros_Fantasy_Football_Projections_WR.csv","WR");n.length>0&&e.push({name:"FantasyPros_WR",weight:.4,projections:n})}catch(n){console.warn("Failed to load FantasyPros WR:",n)}try{const n=await this.loadFantasyProsFile("FantasyPros_Fantasy_Football_Projections_TE.csv","TE");n.length>0&&e.push({name:"FantasyPros_TE",weight:.4,projections:n})}catch(n){console.warn("Failed to load FantasyPros TE:",n)}try{const n=await this.loadFantasyProsFile("FantasyPros_Fantasy_Football_Projections_FLX.csv","FLEX");n.length>0&&e.push({name:"FantasyPros_FLX",weight:.1,projections:n})}catch(n){console.warn("Failed to load FantasyPros FLX:",n)}try{const n=await this.loadCBSProjections(`${this.CANONICAL_BASE_PATH}/projections/qb_projections_2025_cbs.txt`,"QB");n.length>0&&e.push({name:"CBS_QB",weight:.35,projections:n})}catch(n){console.warn("Failed to load CBS QB:",n)}try{const n=await this.loadCBSProjections(`${this.CANONICAL_BASE_PATH}/projections/rb_projections_2025_cbs.txt`,"RB");n.length>0&&e.push({name:"CBS_RB",weight:.35,projections:n})}catch(n){console.warn("Failed to load CBS RB:",n)}try{const n=await this.loadCBSProjections(`${this.CANONICAL_BASE_PATH}/projections/wr_projections_2025_cbs.txt`,"WR");n.length>0&&e.push({name:"CBS_WR",weight:.35,projections:n})}catch(n){console.warn("Failed to load CBS WR:",n)}try{const n=await this.loadCBSProjections(`${this.CANONICAL_BASE_PATH}/projections/te_projections_2025_cbs.txt`,"TE");n.length>0&&e.push({name:"CBS_TE",weight:.35,projections:n})}catch(n){console.warn("Failed to load CBS TE:",n)}try{const n=await this.loadMainProjectionsFile();n.length>0&&e.push({name:"projections_2025",weight:.25,projections:n})}catch(n){console.warn("Failed to load projections_2025:",n)}return e}async loadFantasyProsFile(e,n){const s=[],a=await this.loadFile(`${this.CANONICAL_BASE_PATH}/projections/${e}`),r=this.parseCSV(a);for(const o of r){if(!o.Player||o.Player.trim()==="")continue;const l=o.FPTS||o.FantasyPoints||"0",c=se(l)||0;if(isNaN(c)||c<=0)continue;let u=o.POS||o.Position||n;u&&u.match(/^(QB|RB|WR|TE)\d+$/)&&(u=u.replace(/\d+$/,""));const d={id:this.generatePlayerId(o.Player,u,o.Team),name:o.Player.trim(),team:o.Team||"FA",position:u||"FLEX",projectedPoints:c,floorPoints:se(o.Floor),ceilingPoints:se(o.Ceiling)};s.push(d)}return s}async loadFantasyProsProjections(){const e=[],n=["FantasyPros_Fantasy_Football_Projections_RB.csv","FantasyPros_Fantasy_Football_Projections_WR.csv","FantasyPros_Fantasy_Football_Projections_TE.csv"];try{const s=await this.loadMainProjectionsFile();e.push(...s)}catch(s){console.warn("Failed to load projections_2025.csv:",s)}for(const s of n)try{const a=await this.loadFile(`${this.CANONICAL_BASE_PATH}/projections/${s}`),r=this.parseCSV(a);for(const o of r){if(!o.Player||o.Player.trim()==="")continue;const l=o.FPTS||o.FantasyPoints||"0",c=se(l)||0;if(isNaN(c)||c<=0)continue;let u=o.POS||o.Position;!u&&s.includes("RB")&&(u="RB"),!u&&s.includes("WR")&&(u="WR"),!u&&s.includes("TE")&&(u="TE"),!u&&s.includes("QB")&&(u="QB");const d={id:this.generatePlayerId(o.Player,u,o.Team),name:o.Player.trim(),team:o.Team||"FA",position:u||"FLEX",projectedPoints:c,floorPoints:parseFloat(String(o.Floor||"0").replace(/,/g,"")),ceilingPoints:parseFloat(String(o.Ceiling||"0").replace(/,/g,""))};e.push(d)}}catch(a){console.warn(`Failed to load ${s}:`,a)}return e}parseCBSQBProjections(e){const n=e.trim().split(`
`),s=[];for(let a=3;a<n.length;a++){const r=n[a].split("	");if(r.length>=15){const l=r[0].trim().match(/^(.+?)\s+(QB|RB|WR|TE)\s+([A-Z]{2,3})$/);if(!l)continue;const c=l[1].trim(),u=l[2],d=l[3],m=parseFloat(r[14]||"0"),f=parseInt(r[1]||"17");c&&!isNaN(m)&&m>0&&s.push({id:this.generatePlayerId(c,u,d),name:c,team:d,position:u,projectedPoints:m,games:f,passingYards:parseFloat(r[4]||"0"),passingTDs:parseFloat(r[6]||"0"),interceptions:parseFloat(r[7]||"0"),rushingYards:parseFloat(r[10]||"0"),rushingTDs:parseFloat(r[12]||"0")})}}return s}parseCBSPositionProjections(e,n){const s=e.trim().split(`
`),a=[];for(let r=3;r<s.length;r++){const o=s[r].split("	");if(o.length<10)continue;const c=o[0].trim().match(/^(.+?)\s+(QB|RB|WR|TE)\s+([A-Z]{2,3})$/);if(!c)continue;const u=c[1].trim(),d=c[2],m=c[3];let f=0,h=parseInt(o[1]||"17");if(n==="RB"||n==="WR"?f=parseFloat(o[13]||"0"):n==="TE"&&(f=parseFloat(o[9]||"0")),u&&!isNaN(f)&&f>0){const p={id:this.generatePlayerId(u,d,m),name:u,team:m,position:d,projectedPoints:f,games:h};n==="RB"?(p.rushingAttempts=parseFloat(o[2]||"0"),p.rushingYards=parseFloat(o[3]||"0"),p.rushingTDs=parseFloat(o[5]||"0"),p.targets=parseFloat(o[6]||"0"),p.receptions=parseFloat(o[7]||"0"),p.receivingYards=parseFloat(o[8]||"0"),p.receivingTDs=parseFloat(o[11]||"0")):(n==="WR"||n==="TE")&&(p.targets=parseFloat(o[2]||"0"),p.receptions=parseFloat(o[3]||"0"),p.receivingYards=parseFloat(o[4]||"0"),p.receivingTDs=parseFloat(o[7]||"0")),a.push(p)}}return a}generatePlayerId(e,n,s){return`${this.normalizePlayerName(e)}_${n}_${s}`}async loadADPData(){const e=[];for(let n=0;n<=5;n++)try{const s=n<=3?"csv":"txt",a=`adp${n}_2025.${s}`,r=await this.loadFile(`${this.CANONICAL_BASE_PATH}/adp/${a}`);if(s==="csv"){const l=this.parseCSV(r).map(c=>({...this.parseADPRow(c,n),_fileName:a}));e.push(...l.filter(c=>c!==null))}else{const o=this.parseTextADPFormat(r);e.push(...o.map(l=>({...l,_fileName:a})))}}catch(s){console.warn(`Failed to load ADP file ${n}:`,s)}return e}parseADPRow(e,n){const s=e["Full Name"]||e.Name||e.Player||e["Player Name"];if(!s)return null;const a=e.Position||e.POS||e.Pos,r=e["Team Abbreviation"]||e.Team||"FA";let o;const l=e.ADP||e["Avg Pick"],c=["null","NULL","N/A","NA","n/a","","-","--","undefined"];if(l!==void 0&&!c.includes(String(l).trim())){const h=parseFloat(l);isNaN(h)||(o=h)}if(o===void 0&&e["Overall Rank"]!==void 0){const h=parseFloat(e["Overall Rank"]);isNaN(h)||(o=h)}let u;const d=e["Auction Value"];if(d!==void 0&&!c.includes(String(d).trim())){const h=se(d);h!==void 0&&!isNaN(h)&&(u=h)}let m;const f=e.Age||e.AGE||e.age;if(f!==void 0&&!c.includes(String(f).trim())){const h=parseFloat(f);!isNaN(h)&&h>0&&h<100&&(m=h)}return{id:this.generatePlayerId(s,a,r),name:s,team:r,position:a,age:m,adp:o,adpRank:parseInt(e["Overall Rank"]||e.Rank||e["ADP Rank"]||"999"),positionRank:parseInt(e["Position Rank"]||e["Pos Rank"]||"99"),auctionValue:u,byeWeek:e["Bye Week"]?parseInt(e["Bye Week"]):void 0,isRookie:e["Is Rookie"]==="Yes"||e.isRookie===!0}}parseTextADPFormat(e){var a,r,o;const n=e.trim().split(`
`),s=[];for(let l=1;l<n.length;l++){const c=n[l].split("	");if(c.length>=4){const u=parseInt(c[0])||999,d=(a=c[1])==null?void 0:a.trim(),m=((r=c[2])==null?void 0:r.trim())||"FA",f=(o=c[3])==null?void 0:o.trim();d&&f&&s.push({id:this.generatePlayerId(d,f,m),name:d,team:m,position:f,adp:u,adpRank:u,positionRank:99})}}return s}async loadHistoricalStats(){return[]}async loadLegacyAdvancedStats(){return[]}async loadLegacyTeamData(){return[]}async loadScheduleData(){try{const e=await this.loadFile(`${this.CANONICAL_BASE_PATH}/strength_of_schedule/nfl_schedule_2025-2026.txt`);return this.parseSchedule(e)}catch(e){return console.warn("Failed to load schedule:",e),{}}}parseSchedule(e){return{}}async loadMainProjectionsFile(){const e=[];try{const n=await this.loadFile(`${this.CANONICAL_BASE_PATH}/projections/projections_2025.csv`),s=this.parseCSV(n);for(const a of s){if(!a.playerName)continue;const r=parseFloat(a.fantasyPoints||"0");if(isNaN(r)||r<=0)continue;const o={id:this.generatePlayerId(a.playerName,a.position,a.teamName),name:a.playerName,team:a.teamName||"FA",position:(a.position||"").toUpperCase(),projectedPoints:r,byeWeek:a.byeWeek?parseInt(a.byeWeek):void 0,games:a.games?parseInt(a.games):void 0,auctionValue:a.auctionValue?parseFloat(a.auctionValue):void 0,passingYards:a.passYds?parseFloat(a.passYds):void 0,passingTDs:a.passTd?parseFloat(a.passTd):void 0,rushingYards:a.rushYds?parseFloat(a.rushYds):void 0,rushingTDs:a.rushTd?parseFloat(a.rushTd):void 0,receivingYards:a.recvYds?parseFloat(a.recvYds):void 0,receivingTDs:a.recvTd?parseFloat(a.recvTd):void 0,receptions:a.recvReceptions?parseFloat(a.recvReceptions):void 0};e.push(o)}}catch(n){console.warn("Failed to load projections_2025.csv:",n)}return e}}const Yn=class Yn{constructor(){Q(this,"dataLoader");this.dataLoader=new _v}static getInstance(){return Yn.instance||(Yn.instance=new Yn),Yn.instance}async initialize(){P.info("Initializing Data Service...");try{const e=await this.dataLoader.loadAllData();return e?(P.info("Data Service initialized successfully",{source:"integrated-pipeline",dataQuality:e.deduplicationReport.dataQualityScore,players:e.players.length,projections:e.projections.length,timestamp:new Date().toISOString()}),e.deduplicationReport.dataQualityScore<80&&P.warn(`Data quality is below optimal: ${e.deduplicationReport.dataQualityScore}%`),!0):(P.error("Failed to initialize data service: No data returned"),this.showDataError(["Failed to load data"]),!1)}catch(e){return P.error("Failed to initialize data service:",e),this.showDataError([e instanceof Error?e.message:String(e)]),!1}}async getData(){const e=await this.dataLoader.loadAllData();if(!e)throw new Error("Failed to load data");return e}async refreshData(){return P.info("Refreshing data..."),!!await this.dataLoader.loadAllData()}clearCache(){P.info("Cache will be refreshed on next data access")}async checkDataFreshness(){try{const n=await fetch("/fftool/artifacts/data_manifest.json");if(!n.ok)return{isFresh:!1,message:"No clean data available. Please run: npm run data:refresh"};const s=await n.json(),a=Date.now()-new Date(s.generated_at).getTime(),r=Math.floor(a/(1e3*60*60));return r>24?{isFresh:!1,lastUpdate:s.generated_at,message:`Data is ${r} hours old. Consider running: npm run data:refresh`}:{isFresh:!0,lastUpdate:s.generated_at,message:`Data is fresh (${r} hours old)`}}catch{return{isFresh:!1,message:"Unable to check data freshness. Please run: npm run data:refresh"}}}showDataError(e){console.error("Data Service Error:",e),e.some(n=>n.includes("manifest not available")||n.includes("No clean data"))&&(console.error(`
📊 DATA SETUP REQUIRED`),console.error("================================"),console.error("The data pipeline needs to be run first."),console.error("Please run the following command:"),console.error(`
  npm run data:refresh
`),console.error("This will process and validate all data."),console.error(`================================
`))}async getDataStats(){const e=await this.getData();try{const a=await(await fetch("/fftool/artifacts/data_manifest.json")).json();return{totalPlayers:e.players.length,totalProjections:e.projections.length,dataQuality:e.deduplicationReport.dataQualityScore,lastUpdate:a.generated_at,source:"clean"}}catch{return{totalPlayers:e.players.length,totalProjections:e.projections.length,dataQuality:e.deduplicationReport.dataQualityScore,lastUpdate:new Date().toISOString(),source:"unknown"}}}};Q(Yn,"instance");let Pl=Yn;const Ec=Pl.getInstance();typeof window<"u"&&window.addEventListener("DOMContentLoaded",async()=>{await Ec.initialize()?P.info("Data service auto-initialized successfully"):P.error("Data service auto-initialization failed")});class kv{constructor(){Q(this,"leagueSettings",{teams:12,budget:200,rosterSize:16,starters:{QB:1,RB:2,WR:2,TE:1,FLEX:1,DST:1,K:1},bench:7,scoring:"PPR",season:{year:"2025-2026",weeks:18,playoffWeeks:3}});Q(this,"replacementRanks",{QB:12,RB:36,WR:48,TE:12,DST:14,K:13});Q(this,"baseMarketAdjustments",{QB:.9,RB:1.05,WR:1.05,TE:.95,DST:.4,K:.35});Q(this,"tierMultipliers",{elite:{ranks:[1,3],multiplier:1.05},tier1:{ranks:[4,8],multiplier:1.02},tier2:{ranks:[9,16],multiplier:1},tier3:{ranks:[17,24],multiplier:.95},tier4:{ranks:[25,36],multiplier:.9},replacement:{ranks:[37,999],multiplier:.8}});Q(this,"positionTierAdjustments",{QB:{elite:1,tier1:1,tier2:.95,tier3:.9},RB:{elite:1,tier1:.98,tier2:.9,tier3:.8},WR:{elite:1.1,tier1:1.05,tier2:1,tier3:.9},TE:{elite:1.1,tier1:1,tier2:.8,tier3:.6},DST:{all:.4},K:{all:.35}});Q(this,"positionCaps",{QB:35,RB:65,WR:60,TE:40,DST:8,K:5});Q(this,"targetAllocation",{QB:{min:.05,max:.1,target:.07},RB:{min:.45,max:.5,target:.48},WR:{min:.35,max:.4,target:.37},TE:{min:.05,max:.1,target:.07},DST:{min:.005,max:.015,target:.01},K:{min:.005,max:.01,target:.005}})}calculateAuctionValue(e,n){const s=this.getPositionRank(e,n),a=this.getReplacementPoints(e.position,n),r=Math.max(0,e.projectedPoints-a),o=this.calculateBaseValue(r,n),l=this.baseMarketAdjustments[e.position]||1,c=this.getTierMultiplier(s),u=this.getPositionTierAdjustment(e.position,s),d=o*l*c*u;let m=Math.max(1,Math.round(d));e.marketValue&&e.marketValue>0&&(m=this.blendWithMarket(m,e.marketValue)),m=this.applySpecificCorrections(e,m);const f=this.positionCaps[e.position];f&&m>f&&(P.debug(`${e.position} ${e.name} exceeded cap: $${m} → $${f}`),m=f);const h=this.calculateConfidence(e,s),p=Math.max(1,Math.round(m*1.15)),v=m,w=Math.max(1,Math.round(m*.85));return{playerId:e.id,playerName:e.name,position:e.position,team:e.team,projectedPoints:e.projectedPoints,positionRank:s,replacementPoints:a,vbd:r,baseValue:o,marketAdjustment:l*u,tierAdjustment:c,auctionValue:m,confidence:h,maxBid:p,targetBid:v,minBid:w,adp:e.adp,marketValue:e.marketValue}}getPositionTierAdjustment(e,n){const s=this.positionTierAdjustments[e];return s?"all"in s?s.all:n<=3?s.elite||1:n<=8?s.tier1||1:n<=16?s.tier2||1:s.tier3||.85:1}blendWithMarket(e,n){if(Math.abs(e-n)/n<.1)return e;const a=e*.6+n*.4;return Math.max(1,Math.round(a))}applySpecificCorrections(e,n){const a={}[e.name];return a?(P.debug(`Applying correction for ${e.name}: $${n} → $${a} (flawed CSV data)`),a):n}calculateBaseValue(e,n){const s=this.leagueSettings.teams*this.leagueSettings.budget,a=this.leagueSettings.teams*this.leagueSettings.rosterSize,r=s-a,l=this.getRosterablePlayers(n).reduce((u,d)=>{const m=this.getReplacementPoints(d.position,n),f=Math.max(0,d.projectedPoints-m);return u+f},0),c=l>0?r/l:0;return 1+e*c}getReplacementPoints(e,n){var r;const s=this.replacementRanks[e],a=n.filter(o=>o.position===e).sort((o,l)=>l.projectedPoints-o.projectedPoints);return a.length>=s?a[s-1].projectedPoints:((r=a[a.length-1])==null?void 0:r.projectedPoints)||0}getRosterablePlayers(e){const n=[];return Object.entries({QB:24,RB:60,WR:72,TE:24,DST:16,K:14}).forEach(([a,r])=>{const o=e.filter(l=>l.position===a).sort((l,c)=>c.projectedPoints-l.projectedPoints).slice(0,r);n.push(...o)}),n}getPositionRank(e,n){return n.filter(r=>r.position===e.position).sort((r,o)=>o.projectedPoints-r.projectedPoints).findIndex(r=>r.id===e.id)+1||999}getTierMultiplier(e){for(const n of Object.values(this.tierMultipliers))if(e>=n.ranks[0]&&e<=n.ranks[1])return n.multiplier;return .7}calculateConfidence(e,n){let s=.75;return n<=5?s+=.15:n<=12?s+=.1:n<=24&&(s+=.05),e.age&&e.age>30&&(s-=.1),e.age&&e.age>32&&(s-=.05),e.marketValue&&e.marketValue>0&&(s+=.1),Math.max(.5,Math.min(1,s))}validateBudgetConservation(e){const s=e.sort((l,c)=>c.auctionValue-l.auctionValue).slice(0,this.leagueSettings.teams*this.leagueSettings.rosterSize).reduce((l,c)=>l+c.auctionValue,0),a=this.leagueSettings.teams*this.leagueSettings.budget,r=s/a*100;return{passed:r>=95&&r<=105,totalValue:s,expectedValue:a,percentageOfBudget:r}}validatePositionalDistribution(e){const n={},s=this.getStarterCounts();Object.keys(s).forEach(c=>{const u=e.filter(d=>d.position===c).sort((d,m)=>m.auctionValue-d.auctionValue).slice(0,s[c]);n[c]=u.reduce((d,m)=>d+m.auctionValue,0)});const a=Object.values(n).reduce((c,u)=>c+u,0),r={},o={};let l=!0;return Object.keys(n).forEach(c=>{const u=n[c]/a;r[c]=u;const d=this.targetAllocation[c];o[c]={min:d.min,max:d.max,actual:u},(u<d.min||u>d.max)&&(l=!1)}),{passed:l,distribution:r,targets:o}}getStarterCounts(){const e=this.leagueSettings.teams;return{QB:e*this.leagueSettings.starters.QB,RB:e*(this.leagueSettings.starters.RB+this.leagueSettings.starters.FLEX*.4),WR:e*(this.leagueSettings.starters.WR+this.leagueSettings.starters.FLEX*.5),TE:e*(this.leagueSettings.starters.TE+this.leagueSettings.starters.FLEX*.1),DST:e*this.leagueSettings.starters.DST,K:e*this.leagueSettings.starters.K}}getLeagueSettings(){return this.leagueSettings}processAllPlayers(e){P.info(`Processing ${e.length} players with calibrated valuation model V2.1`);const n=e.map(d=>this.calculateAuctionValue(d,e));n.sort((d,m)=>m.auctionValue-d.auctionValue);const s=n.slice(0,192).reduce((d,m)=>d+m.auctionValue,0);if(s>2520){const d=2400/s;P.info(`V2.2 Budget scaling applied: ${d.toFixed(3)}x`),n.forEach(m=>{const f=m.auctionValue;m.auctionValue=Math.max(1,Math.round(m.auctionValue*d)),m.maxBid=Math.max(1,Math.round(m.maxBid*d)),m.targetBid=m.auctionValue,m.minBid=Math.max(1,Math.round(m.minBid*d)),f>20&&P.debug(`Scaled ${m.playerName}: $${f} → $${m.auctionValue}`)})}const a=this.validateBudgetConservation(n),r=this.validatePositionalDistribution(n),o={},l={},c={};n.forEach(d=>{o[d.position]=(o[d.position]||0)+1,l[d.position]=(l[d.position]||0)+d.auctionValue,(!c[d.position]||d.auctionValue>c[d.position].value)&&(c[d.position]={name:d.playerName,value:d.auctionValue})});const u={};return Object.keys(o).forEach(d=>{u[d]=l[d]/o[d]}),P.info("Valuation processing complete V2.2",{totalPlayers:e.length,budgetValid:a.passed,budgetPercentage:a.percentageOfBudget.toFixed(1),distributionValid:r.passed}),{valuations:n,validation:{budgetConservation:a,positionalDistribution:r},summary:{totalPlayers:e.length,byPosition:o,averageValues:u,topValuesByPosition:c}}}}class Cv{constructor(){Q(this,"model");Q(this,"lastValuations",[]);Q(this,"lastSummary",null);this.model=new kv}processPlayers(e,n,s,a){const r=e.map((u,d)=>{var v;const m=((v=u.position)==null?void 0:v.toUpperCase())||"",f=n==null?void 0:n.find(w=>{var S,y,g;return((S=w.name)==null?void 0:S.toLowerCase().replace(/[^a-z]/g,""))===((y=u.name)==null?void 0:y.toLowerCase().replace(/[^a-z]/g,""))&&(((g=w.position)==null?void 0:g.toUpperCase())||"")===m}),h=e.filter(w=>{var S;return(((S=w.position)==null?void 0:S.toUpperCase())||"")===m});h.sort((w,S)=>(S.projectedPoints||0)-(w.projectedPoints||0));const p=h.findIndex(w=>w.name===u.name&&w.team===u.team)+1;return{id:u.id||`player-${d}`,name:u.name,position:m,team:u.team||"",projectedPoints:u.projectedPoints||0,adp:(f==null?void 0:f.adp)||250,positionRank:p}}),o=this.model.processAllPlayers(r),l=o.valuations.map((u,d)=>{const m=e.find(N=>N.name===u.playerName&&N.team===u.team&&N.position===u.position),f=n==null?void 0:n.find(N=>{var k,T;return((k=N.name)==null?void 0:k.toLowerCase().replace(/[^a-z]/g,""))===((T=u.playerName)==null?void 0:T.toLowerCase().replace(/[^a-z]/g,""))&&N.position===u.position});let h="replacement";u.positionRank<=3?h="elite":u.positionRank<=8?h="tier1":u.positionRank<=20?h="tier2":u.auctionValue>5&&(h="tier3");let p;f!=null&&f.auctionValue&&f.auctionValue>1?p=f.auctionValue:p=Math.min(2,Math.max(1,Math.round(u.auctionValue*.5)));const v=u.auctionValue-p,w=u.auctionValue,S=`${u.playerName.toLowerCase()}_${u.position.toLowerCase()}`,y=`${u.playerName}_${u.team}`.toLowerCase(),g=u.playerName.toLowerCase(),x=(a==null?void 0:a.get(S))||(a==null?void 0:a.get(y))||(a==null?void 0:a.get(g));return{id:u.playerId,playerId:u.playerId,playerName:u.playerName,name:u.playerName,position:u.position,team:u.team,projectedPoints:u.projectedPoints,points:u.projectedPoints,positionRank:u.positionRank,vbd:u.vbd,vorp:u.vbd,auctionValue:u.auctionValue,value:u.maxBid,marketPrice:Math.max(1,p),marketValue:Math.max(1,p),edge:v,intrinsicValue:w,confidence:u.confidence,tier:h,minBid:u.minBid,targetBid:u.targetBid,maxBid:u.maxBid,rank:d+1,adp:(f==null?void 0:f.adp)||u.adp,byeWeek:(m==null?void 0:m.byeWeek)||(f==null?void 0:f.byeWeek),teamSeasonSOS:m==null?void 0:m.teamSeasonSOS,age:(m==null?void 0:m.age)||(f==null?void 0:f.age),isRookie:(m==null?void 0:m.isRookie)||(f==null?void 0:f.isRookie),injuryStatus:m==null?void 0:m.injuryStatus,targets:(x==null?void 0:x.targets)||0,receptions:(x==null?void 0:x.receptions)||(m==null?void 0:m.receptions)||0,games:(m==null?void 0:m.games)||16,teamTargets:x==null?void 0:x.teamTargets,catchableTargets:x==null?void 0:x.catchableTargets,yardsPerRouteRun:x==null?void 0:x.yardsPerRouteRun,redZoneTargets:x==null?void 0:x.redZoneTargets,routesRun:x==null?void 0:x.routesRun,teamPassPlays:x==null?void 0:x.teamPassPlays,receivingYards:(x==null?void 0:x.receivingYards)||(m==null?void 0:m.receivingYards)||0,teamReceivingYards:x==null?void 0:x.teamReceivingYards,dropRate:x==null?void 0:x.dropRate,targetShare:x==null?void 0:x.targetShare,catchRate:x==null?void 0:x.catchRate}}),c=this.calculateSummary(l,o);return this.lastValuations=l,this.lastSummary=c,{valuations:l,summary:c}}calculateSummary(e,n){const a=e.sort((h,p)=>p.auctionValue-h.auctionValue).slice(0,192).reduce((h,p)=>h+p.auctionValue,0),r=a/2400*100,o=new Map;Object.entries({QB:12,RB:30,WR:36,TE:12,DST:12,K:12}).forEach(([h,p])=>{const w=e.filter(S=>S.position===h).sort((S,y)=>y.auctionValue-S.auctionValue).slice(0,p).reduce((S,y)=>S+y.auctionValue,0);o.set(h,w)});const c=Array.from(o.values()).reduce((h,p)=>h+p,0),u={QB:(o.get("QB")||0)/c,RB:(o.get("RB")||0)/c,WR:(o.get("WR")||0)/c,TE:(o.get("TE")||0)/c,DST:(o.get("DST")||0)/c,K:(o.get("K")||0)/c},d=new Map;["QB","RB","WR","TE","DST","K"].forEach(h=>{const p=e.filter(v=>v.position===h).sort((v,w)=>w.auctionValue-v.auctionValue).slice(0,10);d.set(h,p)});const m=new Map(n.replacementLevels),f=new Map;return e.forEach(h=>{f.set(h.tier,(f.get(h.tier)||0)+1)}),{totalValue:a,budgetPercentage:r,positionDistribution:u,topValuesByPosition:d,replacementLevels:m,tierCounts:f}}getLastValuations(){return this.lastValuations}getLastSummary(){return this.lastSummary}updateMarketPrice(e,n){const s=this.lastValuations.find(a=>a.playerId===e);s&&(s.marketPrice=n,s.edge=s.auctionValue-n)}}const yi=new Cv;class Dc{static verifyDataIntegrity(e,n){const s=performance.now(),a=new Set(e.map(d=>d.team).filter(Boolean)),r=new Set(n.map(d=>d.team).filter(Boolean)),o=Array.from(a).filter(d=>!r.has(d)),l=[];e.length!==n.length&&l.push(`Player count mismatch: ${e.length} source vs ${n.length} rendered`),o.length>0&&l.push(`Missing teams in rendered data: ${o.join(", ")}`);const c=performance.now()-s,u={passed:l.length===0,sourceCount:e.length,renderedCount:n.length,sourceTeams:a,renderedTeams:r,missingTeams:o,discrepancies:l,performanceMs:c};return this.logResults(u),u}static logResults(e){const n=e.passed?"info":"warn";P[n]("Data integrity check completed",{passed:e.passed,sourceCount:e.sourceCount,renderedCount:e.renderedCount,teamCoverage:`${e.renderedTeams.size}/${e.sourceTeams.size}`,performanceMs:e.performanceMs.toFixed(2),...e.discrepancies.length>0&&{discrepancies:e.discrepancies}}),e.passed}static getIntegrityBadge(e){return e.passed?{color:"green",text:"✓ Data Verified",tooltip:`All ${e.sourceTeams.size} teams present`}:{color:"yellow",text:"⚠ Data Warning",tooltip:e.discrepancies.join("; ")}}}Dc.verifyDataIntegrity;const Jn=class Jn{constructor(){Q(this,"isDynamicMode",!0);Q(this,"baseValuations",[]);Q(this,"adjustmentHistory",[])}static getInstance(){return Jn.instance||(Jn.instance=new Jn),Jn.instance}setDynamicMode(e){this.isDynamicMode=e,P.info(`Dynamic valuation mode ${e?"enabled":"disabled"}`)}isDynamic(){return this.isDynamicMode}setBaseValuations(e){this.baseValuations=[...e],P.info(`Base valuations set for ${e.length} players`)}calculateAdjustments(e,n){let s=1;if(e.playersPickedCount===0)s=1,console.log("[Inflation] Draft start - using 1.0 multiplier");else{const d=n.slice(0,e.playersRemainingCount).reduce((m,f)=>m+f.auctionValue,0);s=d>0?e.moneyRemaining/d:1,console.log("[Inflation Calculation]",{availablePlayersCount:n.length,playersRemainingCount:e.playersRemainingCount,totalValueRemaining:d,moneyRemaining:e.moneyRemaining,calculatedMultiplier:s})}const a=this.calculatePositionScarcity(e,n),r=this.calculateTierPremium(e,n),o=this.calculateTrendAdjustment(e.recentPicks),l=this.calculateBudgetPressure(e.teamBudgets),c=this.calculateRosterNeedMultipliers(e),u={inflationMultiplier:s,positionScarcityMultiplier:a,tierPremiumMultiplier:r,trendAdjustment:o,budgetPressureMultiplier:l,rosterNeedMultiplier:c};return e.playersPickedCount===0&&console.log("[DynamicValuationService] Factors at draft start:",{inflationMultiplier:s,positionScarcityMultiplier:a,tierPremiumMultiplier:r,trendAdjustment:o,budgetPressureMultiplier:l,rosterNeedMultiplier:c,moneyRemaining:e.moneyRemaining,playersRemainingCount:e.playersRemainingCount}),this.adjustmentHistory.push({timestamp:Date.now(),factors:u,context:e}),u}getDynamicValuations(e,n){if(console.log("[getDynamicValuations called]",{isDynamicMode:this.isDynamicMode,playersPickedCount:e.playersPickedCount,moneyRemaining:e.moneyRemaining,baseValuationsCount:this.baseValuations.length}),!this.isDynamicMode)return P.info("Returning static valuations"),this.baseValuations;const s=this.baseValuations.filter(r=>!n.has(r.playerId)),a=this.calculateAdjustments(e,s);return console.log("[DynamicValuationService] Adjustments calculated",{inflationMultiplier:a.inflationMultiplier.toFixed(2),playersRemaining:s.length,moneyRemaining:e.moneyRemaining,draftedCount:n.size,allFactors:a}),this.baseValuations.map(r=>{if(n.has(r.playerId))return r;const o=this.applyAdjustments(r,a,e);(r.playerName==="Bijan Robinson"||r.playerName==="CeeDee Lamb"||r.playerName==="Christian McCaffrey")&&console.log(`[Dynamic Adjustment for ${r.playerName}]`,{originalValue:r.value,originalIntrinsicValue:r.intrinsicValue,originalMarketValue:r.marketValue,adjustedValue:o.value,factors:o.factors,inflationMultiplier:a.inflationMultiplier});const l=e.playersPickedCount===0&&o.value===(r.value||r.auctionValue),c={...r,auctionValue:o.value,value:o.value,intrinsicValue:l?r.intrinsicValue:o.value,edge:o.value-(r.marketValue||0),dynamicValue:o.value,adjustmentFactors:o.factors,maxBid:Math.max(1,Math.round(o.value*1.15)),targetBid:Math.max(1,Math.round(o.value)),minBid:Math.max(1,Math.round(o.value*.85))};return r.playerName==="Bijan Robinson"&&console.log("[Updated Bijan Object]",{value:c.value,intrinsicValue:c.intrinsicValue,marketValue:c.marketValue,edge:c.edge,originalEdge:r.edge,dynamicValue:c.dynamicValue}),c})}applyAdjustments(e,n,s){let a=e.value||e.auctionValue;const r=a,o=[];e.playerName==="Bijan Robinson"&&s.playersPickedCount===0&&console.log("[applyAdjustments START for Bijan]",{originalValue:r,inflationMultiplier:n.inflationMultiplier,allFactors:n}),a*=n.inflationMultiplier,n.inflationMultiplier!==1&&o.push(`Inflation: ${(n.inflationMultiplier*100-100).toFixed(1)}%`);const l=n.positionScarcityMultiplier[e.position]||1;l!==1&&(a*=l,o.push(`${e.position} Scarcity: ${(l*100-100).toFixed(1)}%`)),(e.tier==="elite"||e.tier==="tier1")&&(a*=n.tierPremiumMultiplier,n.tierPremiumMultiplier!==1&&o.push(`Tier Premium: ${(n.tierPremiumMultiplier*100-100).toFixed(1)}%`)),Math.abs(n.trendAdjustment)>.02&&(a*=1+n.trendAdjustment,o.push(`Market Trend: ${(n.trendAdjustment*100).toFixed(1)}%`)),n.budgetPressureMultiplier!==1&&(a*=n.budgetPressureMultiplier,o.push(`Budget Pressure: ${(n.budgetPressureMultiplier*100-100).toFixed(1)}%`));const c=n.rosterNeedMultiplier[e.position]||1;return c!==1&&(a*=c,o.push(`Roster Need: ${(c*100-100).toFixed(1)}%`)),a=Math.max(1,Math.round(a)),{value:a,factors:o}}calculatePositionScarcity(e,n){const s={},a=["QB","RB","WR","TE","DST","K"];return e.playersPickedCount===0?(a.forEach(r=>{s[r]=1}),s):(a.forEach(r=>{const l=n.filter(u=>u.position===r).filter(u=>u.tier==="elite"||u.tier==="tier1"),c=e.positionsNeeded[r]||0;if(c>0&&l.length>0){const u=l.length/c;u<.5?s[r]=1.25:u<1?s[r]=1.15:u<2?s[r]=1.05:s[r]=.95}else s[r]=1}),s)}calculateTierPremium(e,n){if(e.playersPickedCount===0)return 1;const s=n.filter(a=>a.tier==="elite"||a.tier==="tier1");return s.length<=5?1.2:s.length<=10?1.1:1}calculateTrendAdjustment(e){if(e.length<3)return 0;const n=e.reduce((s,a)=>{const r=(a.actualPrice-a.expectedPrice)/a.expectedPrice;return s+r},0)/e.length;return Math.max(-.15,Math.min(.15,n))}calculateBudgetPressure(e){const n=Array.from(e.values()),s=n.reduce((l,c)=>l+c,0)/n.length;if(s===200)return 1;const o=n.filter(l=>l<20).length/n.length;return o>.5?.85:o>.25?.93:s>100?1.05:1}calculateRosterNeedMultipliers(e){const n={},s=["QB","RB","WR","TE","DST","K"];return e.playersPickedCount===0?(s.forEach(a=>{n[a]=1}),n):(s.forEach(a=>{const r=e.positionsFilled[a]||0,o=e.positionsNeeded[a]||0,l=r+o;if(l>0){const c=r/l;c<.3&&o>0?n[a]=1.1:c>.7?n[a]=.9:n[a]=1}else n[a]=1}),n)}getAdjustmentHistory(){return this.adjustmentHistory}clearHistory(){this.adjustmentHistory=[]}};Q(Jn,"instance");let Rl=Jn;const kn=Rl.getInstance();function mp({teamId:t}){const{teams:e,leagueSettings:n}=pt(),s=e.find(d=>d.id===t);if(!s)return null;const a=new Map;s.roster.forEach(d=>{const m=d.player.position;a.set(m,(a.get(m)||0)+1)});const o=(()=>{var m,f,h;const d=[];for(const p of n.rosterPositions){if(p.position==="BE")continue;const v=a.get(p.position)||0;if(p.position==="FLEX"){const w=a.get("RB")||0,S=a.get("WR")||0,y=a.get("TE")||0,g=((m=n.rosterPositions.find(T=>T.position==="RB"))==null?void 0:m.required)||0,x=((f=n.rosterPositions.find(T=>T.position==="WR"))==null?void 0:f.required)||0,N=((h=n.rosterPositions.find(T=>T.position==="TE"))==null?void 0:h.required)||0,k=Math.max(0,w-g)+Math.max(0,S-x)+Math.max(0,y-N);k<p.required&&d.push({position:"FLEX",needed:p.required-k})}else v<p.required&&d.push({position:p.position,needed:p.required-v})}return d})(),l=s.budget-s.spent,c=16-s.roster.length,u=c>0?l/c:0;return i.jsxs("div",{className:"card p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[i.jsx(rr,{className:"text-primary"}),s.name]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Remaining"}),i.jsxs("div",{className:"text-2xl font-bold text-primary",children:["$",l]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4 text-sm",children:[i.jsxs("div",{className:"bg-gray-800 rounded p-2",children:[i.jsx("div",{className:"text-gray-400 text-xs",children:"Max Bid"}),i.jsxs("div",{className:"font-semibold",children:["$",s.maxBid]})]}),i.jsxs("div",{className:"bg-gray-800 rounded p-2",children:[i.jsx("div",{className:"text-gray-400 text-xs",children:"Avg/Slot"}),i.jsxs("div",{className:"font-semibold",children:["$",u.toFixed(1)]})]})]}),o.length>0&&i.jsxs("div",{className:"mb-4 p-3 bg-yellow-900/20 border border-yellow-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Ta,{className:"text-yellow-500 w-4 h-4"}),i.jsx("span",{className:"text-sm font-medium text-yellow-400",children:"Roster Needs"})]}),i.jsx("div",{className:"space-y-1",children:o.map(d=>i.jsxs("div",{className:"text-xs text-yellow-300",children:[d.position,": ",d.needed," more needed"]},d.position))})]}),i.jsx("div",{className:"space-y-2",children:["QB","RB","WR","TE","FLEX","DST","K","BE"].map(d=>{var h;const m=s.roster.filter(p=>d==="FLEX"?["RB","WR","TE"].includes(p.player.position):d==="BE"?!0:p.player.position===d),f=((h=n.rosterPositions.find(p=>p.position===d))==null?void 0:h.required)||0;return i.jsxs("div",{children:[i.jsxs("div",{className:"text-xs font-semibold text-gray-400 mb-1",children:[d," (",m.length,"/",f,")"]}),m.length>0?i.jsx("div",{className:"space-y-1",children:m.map((p,v)=>i.jsxs("div",{className:"flex items-center justify-between text-sm bg-gray-800 rounded px-2 py-1",children:[i.jsx("span",{children:p.player.name}),i.jsxs("span",{className:"text-primary",children:["$",p.price]})]},`${p.player.id}_${v}`))}):i.jsx("div",{className:"text-xs text-gray-600 italic",children:"Empty"})]},d)})})]})}function fp(){const{draftHistory:t,teams:e,undoLastPick:n}=pt(),s=o=>new Date(o).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),a=o=>{var l;return((l=e.find(c=>c.id===o))==null?void 0:l.name)||"Unknown"},r=[...t].reverse();return i.jsxs("div",{className:"card p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[i.jsx(Lf,{className:"text-primary"}),"Draft History"]}),t.length>0&&i.jsxs("button",{onClick:n,className:"flex items-center gap-1 text-sm text-gray-400 hover:text-primary transition-colors",children:[i.jsx(Ug,{className:"w-4 h-4"}),"Undo"]})]}),r.length===0?i.jsx("p",{className:"text-gray-500 text-sm italic",children:"No picks yet"}):i.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:r.map((o,l)=>i.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg bg-gray-800 
                ${l===0?"ring-1 ring-primary":""}`,children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"font-medium text-sm",children:[o.player.name,i.jsxs("span",{className:"ml-2 text-xs text-gray-400",children:[o.player.position," - ",o.player.team]})]}),i.jsxs("div",{className:"text-xs text-gray-500",children:[a(o.team)," • ",s(o.timestamp)]})]}),i.jsx("div",{className:"text-right",children:i.jsxs("div",{className:"text-lg font-bold text-primary",children:["$",o.price]})})]},`${o.player.id}_${o.timestamp}`))}),t.length>0&&i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-800",children:i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400",children:"Total Picks"}),i.jsx("div",{className:"font-semibold",children:t.length})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400",children:"Total Spent"}),i.jsxs("div",{className:"font-semibold text-primary",children:["$",t.reduce((o,l)=>o+l.price,0)]})]})]})})]})}const pp=({valuations:t,draftHistory:e,onPriceUpdate:n})=>{const{teams:s}=pt(),[a,r]=D.useState([]),[o,l]=D.useState({overallInflation:0,positionInflation:{},recentTrend:"neutral",bargains:0,overpays:0,expectedInflation:0,inflationMultiplier:1});D.useEffect(()=>{const p=e.filter(v=>v.price&&v.player).map(v=>{const w=t.find(S=>S.playerId===v.player.id);return{playerId:v.player.id,playerName:v.player.name,position:v.player.position,actualPrice:v.price,predictedValue:(w==null?void 0:w.auctionValue)||v.price,edge:((w==null?void 0:w.auctionValue)||v.price)-v.price,teamId:v.team,timestamp:v.timestamp||Date.now()}});if(r(p),p.length>0){const v=c(p);l(v),n&&p.forEach(w=>n(w.playerId,w.actualPrice))}},[e,t,n]);const c=p=>{const v=p.reduce((O,V)=>O+V.actualPrice,0),w=p.reduce((O,V)=>O+V.predictedValue,0),S=w>0?(v-w)/w*100:0,y=s.length||12,g=y*200,x=y*16,N=p.reduce((O,V)=>O+V.actualPrice,0),k=g-N,T=p.length,j=x-T,_=new Set(p.map(O=>O.playerId)),C=t.filter(O=>!_.has(O.playerId)).slice(0,j).reduce((O,V)=>O+V.auctionValue,0),E=C>0?k/C:1,M=(E-1)*100,W={};["QB","RB","WR","TE","DST","K"].forEach(O=>{const V=p.filter(R=>R.position===O);if(V.length>0){const R=V.reduce(($,L)=>$+L.actualPrice,0),b=V.reduce(($,L)=>$+L.predictedValue,0);W[O]=b>0?(R-b)/b*100:0}});const H=p.slice(-5),J=H.length>0?H.reduce((O,V)=>O+(V.actualPrice-V.predictedValue),0)/H.length:0,U=J>2?"hot":J<-2?"cold":"neutral",I=p.filter(O=>O.edge>=5).length,A=p.filter(O=>O.edge<=-5).length;return{overallInflation:S,positionInflation:W,recentTrend:U,bargains:I,overpays:A,expectedInflation:M,inflationMultiplier:E}},u=D.useMemo(()=>a.sort((p,v)=>v.timestamp-p.timestamp).slice(0,5),[a]),d=D.useMemo(()=>[...a].sort((p,v)=>v.edge-p.edge).slice(0,3),[a]),m=D.useMemo(()=>[...a].sort((p,v)=>p.edge-v.edge).slice(0,3),[a]),f=p=>{switch(p){case"hot":return i.jsx(Vn,{className:"w-4 h-4 text-red-400"});case"cold":return i.jsx(Hg,{className:"w-4 h-4 text-blue-400"});default:return i.jsx(pi,{className:"w-4 h-4 text-gray-400"})}},h=p=>p>10?"text-red-400":p>5?"text-orange-400":p<-10?"text-blue-400":p<-5?"text-cyan-400":"text-gray-400";return i.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm rounded-xl p-4 border border-gray-800",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[i.jsx(ys,{className:"w-5 h-5 text-green-400"}),"Market Tracker"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[f(o.recentTrend),i.jsx("span",{className:"text-sm text-gray-400",children:o.recentTrend==="hot"?"Prices Running Hot":o.recentTrend==="cold"?"Bargain Territory":"Market Normal"})]})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3 mb-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Fg,{className:"w-4 h-4 text-purple-400"}),i.jsx("span",{className:"text-sm font-semibold text-purple-400",children:"Market Inflation"})]}),i.jsxs("div",{className:"text-xs text-gray-400",children:["x",o.inflationMultiplier.toFixed(2)," multiplier"]})]}),i.jsxs("div",{className:"relative h-6 bg-gray-700 rounded-full overflow-hidden mb-2",children:[i.jsx("div",{className:`absolute inset-y-0 left-0 transition-all duration-500 ${o.expectedInflation>20?"bg-gradient-to-r from-red-600 to-red-400":o.expectedInflation>10?"bg-gradient-to-r from-orange-600 to-orange-400":o.expectedInflation>0?"bg-gradient-to-r from-yellow-600 to-yellow-400":o.expectedInflation>-10?"bg-gradient-to-r from-cyan-600 to-cyan-400":"bg-gradient-to-r from-blue-600 to-blue-400"}`,style:{width:`${Math.min(100,Math.max(0,(o.expectedInflation+50)*1))}%`},children:i.jsx("div",{className:"h-full flex items-center justify-center",children:i.jsxs("span",{className:"text-xs font-bold text-white px-2",children:[o.expectedInflation>0?"+":"",o.expectedInflation.toFixed(1),"%"]})})}),i.jsx("div",{className:"absolute inset-y-0 left-1/2 w-0.5 bg-gray-900 opacity-50"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Expected: "}),i.jsxs("span",{className:`font-bold ${h(o.expectedInflation)}`,children:[o.expectedInflation>0?"+":"",o.expectedInflation.toFixed(1),"%"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Actual: "}),i.jsxs("span",{className:`font-bold ${h(o.overallInflation)}`,children:[o.overallInflation>0?"+":"",o.overallInflation.toFixed(1),"%"]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[i.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Trend"}),i.jsx("div",{className:`text-sm font-bold ${o.recentTrend==="hot"?"text-red-400":o.recentTrend==="cold"?"text-blue-400":"text-gray-400"}`,children:o.recentTrend.toUpperCase()})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Bargains"}),i.jsx("div",{className:"text-lg font-bold text-green-400",children:o.bargains})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Overpays"}),i.jsx("div",{className:"text-lg font-bold text-red-400",children:o.overpays})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Position Markets"}),i.jsx("div",{className:"grid grid-cols-6 gap-1",children:["QB","RB","WR","TE","DST","K"].map(p=>i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-gray-400",children:p}),i.jsx("div",{className:`text-sm font-bold ${h(o.positionInflation[p]||0)}`,children:o.positionInflation[p]?`${o.positionInflation[p]>0?"+":""}${o.positionInflation[p].toFixed(0)}%`:"-"})]},p))})]}),u.length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Recent Picks"}),i.jsx("div",{className:"space-y-1",children:u.map((p,v)=>i.jsxs("div",{className:"flex justify-between items-center text-xs",children:[i.jsxs("span",{className:"text-gray-300",children:[p.playerName," (",p.position,")"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("span",{className:"text-gray-400",children:["$",p.actualPrice]}),i.jsxs("span",{className:p.edge>=0?"text-green-400":"text-red-400",children:[p.edge>=0?"+":"",p.edge]})]})]},`${p.playerId}-${v}`))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[d.length>0&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Best Values"}),d.map((p,v)=>i.jsxs("div",{className:"text-xs flex justify-between",children:[i.jsx("span",{className:"text-gray-300 truncate",children:p.playerName}),i.jsxs("span",{className:"text-green-400",children:["+$",p.edge]})]},`value-${v}`))]}),m.length>0&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Overpays"}),m.map((p,v)=>i.jsxs("div",{className:"text-xs flex justify-between",children:[i.jsx("span",{className:"text-gray-300 truncate",children:p.playerName}),i.jsxs("span",{className:"text-red-400",children:["-$",Math.abs(p.edge)]})]},`overpay-${v}`))]})]}),Math.abs(o.expectedInflation)>15&&i.jsxs("div",{className:`mt-3 p-2 rounded-lg flex items-center gap-2 ${o.expectedInflation>15?"bg-red-900/20 border border-red-700/50":"bg-blue-900/20 border border-blue-700/50"}`,children:[i.jsx(Ln,{className:`w-4 h-4 ${o.expectedInflation>15?"text-red-400":"text-blue-400"}`}),i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:`text-xs font-semibold ${o.expectedInflation>15?"text-red-400":"text-blue-400"}`,children:o.expectedInflation>15?`High Inflation Alert (${o.expectedInflation.toFixed(0)}%)`:`Deflation Opportunity (${o.expectedInflation.toFixed(0)}%)`}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:o.expectedInflation>15?`Multiply remaining player values by ${o.inflationMultiplier.toFixed(2)}x. Be aggressive on must-have targets.`:"Values are depressed. Look for bargains and be patient with nominations."})]})]})]})},Tv={stars_and_scrubs:"Spend big on elite players, fill with $1 players",balanced:"Spread budget evenly across all positions",zero_rb:"Ignore RBs early, load up on WR/TE",hero_rb:"One elite RB, then WRs",robust_rb:"Prioritize RBs heavily"},Ev={QB:1,RB:2,WR:2,TE:1,DST:1,K:1,FLEX:1,BENCH:7},hp=({remainingBudget:t,spotsLeft:e,myRoster:n,valuations:s,draftHistory:a})=>{const[r,o]=D.useState("balanced"),[l,c]=D.useState(!1),u=D.useMemo(()=>{const p=new Map;return["QB","RB","WR","TE","DST","K"].forEach(w=>{const S=a.filter(g=>{var x;return((x=g.player)==null?void 0:x.position)===w}),y=s.filter(g=>g.position===w);if(S.length>0&&y.length>0){const g=S.reduce((N,k)=>N+(k.price||0),0)/S.length,x=y.slice(0,S.length).reduce((N,k)=>N+k.auctionValue,0)/Math.min(S.length,y.length);p.set(w,g/Math.max(x,1))}else p.set(w,1)}),p},[a,s]),d=D.useMemo(()=>{const p={},v={};n.forEach(y=>{const g=y.position;v[g]=(v[g]||0)+1}),Object.entries(Ev).forEach(([y,g])=>{y==="FLEX"||y==="BENCH"||(p[y]=Math.max(0,g-(v[y]||0)))});const w=Object.values(p).reduce((y,g)=>y+g,0),S=16-n.length;return p["FLEX/BENCH"]=S-w,p},[n]),m=D.useMemo(()=>{if(e===0)return null;const p={};if(r==="stars_and_scrubs")if(e<=2)Object.keys(d).forEach(v=>{d[v]>0&&(p[v]=Math.floor(t/e))});else{const v=Math.max(e-2,0),w=t-v;let S=0;["RB","WR"].forEach(y=>{d[y]>0&&S<2&&(p[y]=Math.floor(w/2),S++)})}else if(r==="balanced"){const v={QB:.8,RB:1.2,WR:1.1,TE:.7,DST:.3,K:.2,"FLEX/BENCH":.5};let w=0;Object.entries(d).forEach(([S,y])=>{if(y>0){const g=v[S]||.5;w+=g*y}}),Object.entries(d).forEach(([S,y])=>{if(y>0){const g=v[S]||.5;p[S]=Math.floor(g*y/w*t)}})}else if(r==="zero_rb"){const v=d.RB>0?d.RB*2:0,w=t-v;["WR","TE","QB"].forEach(S=>{d[S]>0&&(p[S]=Math.floor(w*.3))}),d.RB>0&&(p.RB=v)}else if(r==="hero_rb"){d.RB>0&&(p.RB=Math.floor(t*.4));const v=t-(p.RB||0);["WR","TE"].forEach(w=>{d[w]>0&&(p[w]=Math.floor(v*.25))})}else if(r==="robust_rb"){d.RB>0&&(p.RB=Math.floor(t*.5));const v=t-(p.RB||0);["WR","QB","TE"].forEach(w=>{d[w]>0&&(p[w]=Math.floor(v*.15))})}return p},[t,e,d,r]),f=D.useMemo(()=>{const p=[];return t/e<3&&p.push("Budget very tight - may need all $1-2 players"),e<=5&&Object.values(d).some(v=>v>2)&&p.push("Multiple starters still needed with few spots left"),u.get("RB")>1.15&&d.RB>0&&p.push("RB market inflated - consider pivoting strategy"),p},[t,e,d,u]),h=e>1?t-(e-1):t;return i.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm rounded-xl p-4 border border-gray-800",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[i.jsx(cn,{className:"w-5 h-5 text-green-400"}),"Budget Allocator"]}),i.jsxs("button",{onClick:()=>c(!l),className:"text-xs text-gray-400 hover:text-white",children:[l?"Hide":"Show"," Details"]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[i.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Remaining"}),i.jsxs("div",{className:"text-lg font-bold text-green-400",children:["$",t]})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Spots Left"}),i.jsx("div",{className:"text-lg font-bold text-blue-400",children:e})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Max Bid"}),i.jsxs("div",{className:"text-lg font-bold text-orange-400",children:["$",h]})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Draft Strategy"}),i.jsx("select",{value:r,onChange:p=>o(p.target.value),className:"w-full bg-gray-800 text-white px-3 py-2 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:Object.entries(Tv).map(([p,v])=>i.jsxs("option",{value:p,children:[p.replace(/_/g," ").toUpperCase()," - ",v]},p))})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Recommended Allocation"}),i.jsx("div",{className:"space-y-2",children:Object.entries(d).map(([p,v])=>{if(v===0)return null;const w=(m==null?void 0:m[p])||0,S=w/Math.max(v,1);return i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-gray-300",children:p}),i.jsxs("span",{className:"text-xs text-gray-500",children:["(",v," needed)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-sm font-bold text-yellow-400",children:["$",w]}),i.jsxs("span",{className:"text-xs text-gray-500",children:["(~$",S.toFixed(0),"/player)"]})]})]},p)})})]}),l&&i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Market Conditions"}),i.jsx("div",{className:"grid grid-cols-6 gap-1",children:Array.from(u.entries()).map(([p,v])=>i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-gray-400",children:p}),i.jsxs("div",{className:`text-sm font-bold ${v>1.1?"text-red-400":v<.9?"text-green-400":"text-gray-400"}`,children:[v>1?"+":"",((v-1)*100).toFixed(0),"%"]})]},p))})]}),f.length>0&&i.jsx("div",{className:"space-y-1",children:f.map((p,v)=>i.jsxs("div",{className:"flex items-center gap-2 text-xs text-yellow-400",children:[i.jsx(Ln,{className:"w-3 h-3"}),i.jsx("span",{children:p})]},v))}),i.jsx("div",{className:"mt-3 p-2 bg-blue-900/20 border border-blue-700/50 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-400",children:[i.jsx(ps,{className:"w-3 h-3"}),i.jsx("span",{children:e<=3?"Final picks - prioritize filling starters!":t/e>15?"Budget healthy - can target a star":"Stay disciplined - look for values"})]})})]})},Dv=({summary:t,valuations:e,isDraftActive:n,onStartDraft:s})=>{const{draftHistory:a}=pt(),r=new Set(a.map(p=>{var v;return(v=p.player)==null?void 0:v.id})),o=e.filter(p=>!r.has(p.playerId)),l=[...o].sort((p,v)=>(v.edge||0)-(p.edge||0)).slice(0,4),c=o.filter(p=>p.position==="RB").sort((p,v)=>(p.rank||999)-(v.rank||999)).slice(0,4),u=o.filter(p=>p.position==="WR").sort((p,v)=>(p.rank||999)-(v.rank||999)).slice(0,4),d=o.filter(p=>p.adp&&p.adp>50&&p.points&&p.points>200).sort((p,v)=>(v.points||0)-(p.points||0)).slice(0,4),m=o.filter(p=>p.position==="QB"&&p.adp&&p.adp>80).sort((p,v)=>(v.points||0)-(p.points||0)).slice(0,4),f=o.filter(p=>p.points&&p.points>150&&p.adp&&p.adp>60).sort((p,v)=>{const w=(p.points||0)/(p.adp||1);return(v.points||0)/(v.adp||1)-w}).slice(0,4),h=({player:p,showStat:v,statLabel:w,showPosition:S=!1})=>{const y=v==="edge"?p.edge:v==="value"?p.value:v==="points"?p.points:p.adp,g=()=>v==="edge"||v==="value"?`$${y}`:v==="adp"?`ADP: ${Math.round(y||0)}`:`${Math.round(y||0)} pts`;return i.jsxs("div",{className:"flex justify-between items-center text-xs py-0.5",children:[i.jsxs("span",{className:"text-gray-300 truncate flex-1 mr-1",children:[p.name,S&&i.jsx("span",{className:"text-gray-500 ml-1",children:p.position})]}),i.jsx("span",{className:"text-gray-400 text-right whitespace-nowrap",children:g()})]})};return i.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-3 mb-4",children:i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-3",children:[i.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",title:"Players with highest edge (Our Value - Market Price). These are undervalued by the market.",children:[i.jsx(Vn,{className:"w-4 h-4 text-green-400"}),i.jsx("span",{className:"text-xs font-semibold text-green-400",children:"LARGEST EDGE"})]}),i.jsx("div",{className:"space-y-0.5",children:l.map((p,v)=>i.jsx(h,{player:p,showStat:"value",showPosition:!0},v))})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",title:"Best available running backs sorted by overall rank.",children:[i.jsx(Qf,{className:"w-4 h-4 text-purple-400"}),i.jsx("span",{className:"text-xs font-semibold text-purple-400",children:"BEST RBs"})]}),i.jsx("div",{className:"space-y-0.5",children:c.map((p,v)=>i.jsx(h,{player:p,showStat:"value"},v))})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",title:"Best available wide receivers sorted by overall rank.",children:[i.jsx(qg,{className:"w-4 h-4 text-blue-400"}),i.jsx("span",{className:"text-xs font-semibold text-blue-400",children:"BEST WRs"})]}),i.jsx("div",{className:"space-y-0.5",children:u.map((p,v)=>i.jsx(h,{player:p,showStat:"value"},v))})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",title:"High-scoring players (200+ pts) with lower ADPs (50+). Potential league-winners being overlooked by the market.",children:[i.jsx($g,{className:"w-4 h-4 text-orange-400"}),i.jsx("span",{className:"text-xs font-semibold text-orange-400",children:"BREAKOUTS"})]}),i.jsx("div",{className:"space-y-0.5",children:d.map((p,v)=>i.jsx(h,{player:p,showStat:"value",showPosition:!0},v))})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",title:"Late-round QBs (ADP 80+) with strong projected points. Perfect for late-round QB strategy.",children:[i.jsx(ys,{className:"w-4 h-4 text-red-400"}),i.jsx("span",{className:"text-xs font-semibold text-red-400",children:"VALUE QBs"})]}),i.jsx("div",{className:"space-y-0.5",children:m.map((p,v)=>i.jsx(h,{player:p,showStat:"value"},v))})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",title:"Players with high projected points (150+) and high ADP (60+). Late round values with strong upside.",children:[i.jsx(ps,{className:"w-4 h-4 text-yellow-400"}),i.jsx("span",{className:"text-xs font-semibold text-yellow-400",children:"BEST VALUE"})]}),i.jsx("div",{className:"space-y-0.5",children:f.map((p,v)=>i.jsx(h,{player:p,showStat:"value",showPosition:!0},v))})]})]})})},Av=({player:t,isOpen:e,onClose:n})=>{const{completeAuction:s,teams:a,myTeamId:r}=pt(),[o,l]=D.useState("My Team"),[c,u]=D.useState(""),[d,m]=D.useState("stats");if(!e)return null;const f=()=>{const w=parseInt(c)||0;if(w<=0){alert("Please enter a valid purchase price");return}const S=o==="My Team"?r:`team_${parseInt(o.replace("Team ",""))-1}`,y={id:t.playerId,name:t.playerName,position:t.position,team:t.team,projectedPoints:t.projectedPoints,value:t.auctionValue,tier:t.tier||"replacement"};s(y,w,S),n()},h=()=>({QB:"from-red-500 to-red-700",RB:"from-green-500 to-green-700",WR:"from-blue-500 to-blue-700",TE:"from-orange-500 to-orange-700",DST:"from-purple-500 to-purple-700",K:"from-yellow-500 to-yellow-700"})[t.position]||"from-gray-500 to-gray-700",p=w=>({elite:"S+",tier1:"S",tier2:"A",tier3:"B",replacement:"C"})[w||"replacement"]||"C",v=w=>{switch(w){case"elite":return"text-purple-400";case"tier1":return"text-blue-400";case"tier2":return"text-green-400";case"tier3":return"text-yellow-400";default:return"text-gray-400"}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-gray-900 rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden",children:[i.jsxs("div",{className:`bg-gradient-to-r ${h()} p-6 relative`,children:[i.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-white hover:text-gray-200 transition-colors",children:i.jsx(un,{className:"w-6 h-6"})}),i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:t.playerName||t.name||"Unknown Player"}),i.jsxs("div",{className:"flex items-center gap-4 text-white/90",children:[i.jsx("span",{className:"font-semibold",children:t.position}),i.jsx("span",{children:t.team}),i.jsxs("span",{className:`px-2 py-1 rounded ${v(t.tier)} font-bold`,children:["Tier ",p(t.tier)]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",t.auctionValue]}),i.jsx("div",{className:"text-sm text-white/80",children:"Recommended Value"})]})]})]}),i.jsxs("div",{className:"flex border-b border-gray-700",children:[i.jsx("button",{onClick:()=>m("stats"),className:`px-6 py-3 font-medium transition-colors ${d==="stats"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,children:"Stats & Metrics"}),i.jsx("button",{onClick:()=>m("projections"),className:`px-6 py-3 font-medium transition-colors ${d==="projections"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,children:"Projections"}),i.jsx("button",{onClick:()=>m("analysis"),className:`px-6 py-3 font-medium transition-colors ${d==="analysis"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,children:"Analysis"})]}),i.jsxs("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 300px)"},children:[d==="stats"&&i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Projected Points"}),i.jsx("div",{className:"text-2xl font-bold text-white",children:(t.projectedPoints||t.points||0).toFixed(1)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"VORP"}),i.jsx("div",{className:"text-xl font-semibold text-green-400",children:(t.vorp||t.vbd||0).toFixed(1)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Overall Rank"}),i.jsxs("div",{className:"text-xl font-semibold text-white",children:["#",t.rank]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Position Rank"}),i.jsxs("div",{className:"text-xl font-semibold text-white",children:[t.position,t.positionRank]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"ADP"}),i.jsx("div",{className:"text-xl font-semibold text-white",children:t.adp?t.adp.toFixed(1):"N/A"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Market Value"}),i.jsxs("div",{className:"text-xl font-semibold text-yellow-400",children:["$",t.marketValue]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Edge vs Market"}),i.jsxs("div",{className:`text-xl font-semibold ${t.edge>=0?"text-green-400":"text-red-400"}`,children:[t.edge>0?"+":"","$",t.edge.toFixed(0)]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Bye Week"}),i.jsx("div",{className:"text-xl font-semibold text-white",children:t.byeWeek||"N/A"})]})]})]}),d==="projections"&&i.jsxs("div",{className:"space-y-4",children:[t.position==="QB"&&i.jsx(i.Fragment,{children:i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Pass Yards"}),i.jsx("div",{className:"text-lg font-semibold text-white",children:t.passYds||0})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Pass TDs"}),i.jsx("div",{className:"text-lg font-semibold text-white",children:t.passTd||0})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"INTs"}),i.jsx("div",{className:"text-lg font-semibold text-white",children:t.passInt||0})]})]})}),(t.position==="RB"||t.position==="WR"||t.position==="TE")&&i.jsxs(i.Fragment,{children:[t.position==="RB"&&i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Rush Yards"}),i.jsx("div",{className:"text-lg font-semibold text-white",children:t.rushYds||0})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Rush TDs"}),i.jsx("div",{className:"text-lg font-semibold text-white",children:t.rushTd||0})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Rush Att"}),i.jsx("div",{className:"text-lg font-semibold text-white",children:t.rushAtt||0})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Receptions"}),i.jsx("div",{className:"text-lg font-semibold text-white",children:t.recvReceptions||0})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Rec Yards"}),i.jsx("div",{className:"text-lg font-semibold text-white",children:t.recvYds||0})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Rec TDs"}),i.jsx("div",{className:"text-lg font-semibold text-white",children:t.recvTd||0})]})]})]})]}),d==="analysis"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsxs("h3",{className:"text-white font-semibold mb-2 flex items-center gap-2",children:[i.jsx(Vn,{className:"w-4 h-4 text-blue-400"}),"Value Analysis"]}),i.jsx("p",{className:"text-gray-300 text-sm",children:t.edge>=10?`Excellent value! Projected ${t.edge} points above market price.`:t.edge>=0?`Fair value with slight edge of ${t.edge} points.`:`Potentially overvalued by ${Math.abs(t.edge)} points.`})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsxs("h3",{className:"text-white font-semibold mb-2 flex items-center gap-2",children:[i.jsx($f,{className:"w-4 h-4 text-yellow-400"}),"Tier Analysis"]}),i.jsx("p",{className:"text-gray-300 text-sm",children:t.tier==="elite"?"Elite tier player - a potential league winner.":t.tier==="tier1"?"Top tier starter with consistent production.":t.tier==="tier2"?"Solid starter with good upside.":t.tier==="tier3"?"Flex option or depth player.":"Replacement level - consider for late rounds only."})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsxs("h3",{className:"text-white font-semibold mb-2 flex items-center gap-2",children:[i.jsx(Ag,{className:"w-4 h-4 text-green-400"}),"SOS Analysis"]}),i.jsxs("p",{className:"text-gray-300 text-sm",children:["Strength of Schedule: ",t.teamSeasonSOS?t.teamSeasonSOS.toFixed(1):"N/A",t.teamSeasonSOS&&t.teamSeasonSOS<5?" - Easy schedule could boost production.":t.teamSeasonSOS&&t.teamSeasonSOS>5?" - Difficult schedule may limit upside.":" - Average difficulty schedule."]})]})]})]}),i.jsx("div",{className:"border-t border-gray-700 p-6 bg-gray-800/50",children:i.jsxs("div",{className:"flex items-end gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Select Team"}),i.jsxs("select",{value:o,onChange:w=>l(w.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-400",children:[i.jsx("option",{children:"My Team"}),i.jsx("option",{children:"Team 2"}),i.jsx("option",{children:"Team 3"}),i.jsx("option",{children:"Team 4"}),i.jsx("option",{children:"Team 5"}),i.jsx("option",{children:"Team 6"}),i.jsx("option",{children:"Team 7"}),i.jsx("option",{children:"Team 8"}),i.jsx("option",{children:"Team 9"}),i.jsx("option",{children:"Team 10"}),i.jsx("option",{children:"Team 11"}),i.jsx("option",{children:"Team 12"})]})]}),i.jsxs("div",{className:"w-32",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Price ($)"}),i.jsx("input",{type:"number",value:c,onChange:w=>u(w.target.value),placeholder:"0",min:"0",max:"200",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-400"})]}),i.jsx("button",{onClick:f,disabled:!c||parseInt(c)<=0,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 disabled:from-gray-600 disabled:to-gray-700 text-white rounded-lg font-semibold transition-colors",children:"Draft Player"})]})})]})})};class Mv{calculatePPRScore(e){if(["QB","DST","K"].includes(e.position))return null;let n=0;const s={};switch(e.position){case"WR":n=this.calculateWRScore(e,s);break;case"RB":n=this.calculateRBScore(e,s);break;case"TE":n=this.calculateTEScore(e,s);break;default:return null}n=Math.max(0,Math.min(100,n));const a=n,{tier:r,color:o,hexColor:l}=this.getTierAndColor(n);return{score:n,percentile:a,components:s,tier:r,color:o,hexColor:l}}calculateWRScore(e,n){let s=0,a=0;if(e.targets&&e.games){const r=e.targets/e.games;n.targetsPerGame=r;const o=Math.min(100,r/10*100);s+=o*.4,a+=.4}else if(e.targetShare){n.targetShare=e.targetShare*100;const r=Math.min(100,e.targetShare*100/28*100);s+=r*.4,a+=.4}if(e.receptions&&e.games){const r=e.receptions/e.games;n.receptionsPerGame=r;const o=Math.min(100,r/7*100);s+=o*.3,a+=.3}if(e.receptions&&e.targets&&e.targets>0){const r=e.receptions/e.targets*100;n.catchRate=r;const o=Math.min(100,r/72*100);s+=o*.15,a+=.15}else if(e.catchRate){n.catchRate=e.catchRate*100;const r=Math.min(100,e.catchRate*100/72*100);s+=r*.15,a+=.15}if(e.redZoneTargets!==void 0&&e.games){const r=e.redZoneTargets/e.games;n.redZoneTargets=r;const o=Math.min(100,r/2*100);s+=o*.15,a+=.15}return a>0&&a<1&&(s=s/a),s}calculateRBScore(e,n){let s=0,a=0;if(e.targets&&e.games){const r=e.targets/e.games;n.targetsPerGame=r;const o=Math.min(100,r/5*100);s+=o*.4,a+=.4}if(e.receptions&&e.games){const r=e.receptions/e.games;n.receptionsPerGame=r;const o=Math.min(100,r/4*100);s+=o*.35,a+=.35}if(e.receptions&&e.targets&&e.targets>0){const r=e.receptions/e.targets*100;n.catchRate=r;const o=Math.min(100,r/75*100);s+=o*.15,a+=.15}else if(e.catchRate){n.catchRate=e.catchRate*100;const r=Math.min(100,e.catchRate*100/75*100);s+=r*.15,a+=.15}if(e.receivingYards&&e.games){const r=e.receivingYards/e.games;n.receivingYardsPerGame=r;const o=Math.min(100,r/40*100);s+=o*.1,a+=.1}return a>0&&a<1&&(s=s/a),s}calculateTEScore(e,n){let s=0,a=0;if(e.targets&&e.games){const r=e.targets/e.games;n.targetsPerGame=r;const o=Math.min(100,r/6*100);s+=o*.45,a+=.45}else if(e.targetShare){n.targetShare=e.targetShare*100;const r=Math.min(100,e.targetShare*100/18*100);s+=r*.45,a+=.45}if(e.receptions&&e.games){const r=e.receptions/e.games;n.receptionsPerGame=r;const o=Math.min(100,r/4.5*100);s+=o*.35,a+=.35}if(e.redZoneTargets!==void 0&&e.games){const r=e.redZoneTargets/e.games;n.redZoneTargets=r;const o=Math.min(100,r/1.2*100);s+=o*.2,a+=.2}return a>0&&a<1&&(s=s/a),s}getTierAndColor(e){return e>=80?{tier:"elite",color:"text-green-600 dark:text-green-400",hexColor:"#16a34a"}:e>=60?{tier:"high",color:"text-green-500 dark:text-green-500",hexColor:"#22c55e"}:e>=40?{tier:"average",color:"text-yellow-500 dark:text-yellow-400",hexColor:"#eab308"}:e>=20?{tier:"below",color:"text-orange-500 dark:text-orange-400",hexColor:"#f97316"}:{tier:"low",color:"text-red-500 dark:text-red-400",hexColor:"#ef4444"}}updatePercentiles(e){const n={};e.forEach(s=>{s.pprMetrics&&(n[s.position]||(n[s.position]=[]),n[s.position].push(s.pprMetrics.score))}),Object.keys(n).forEach(s=>{const a=n[s].sort((r,o)=>r-o);e.forEach(r=>{if(r.pprMetrics&&r.position===s){const o=a.indexOf(r.pprMetrics.score);r.pprMetrics.percentile=Math.round(o/a.length*100)}})})}}const Ac=new Mv,Bv=({players:t,onPlayerSelect:e,onPlayerDraft:n})=>{const{draftHistory:s}=pt(),[a,r]=D.useState(new Set),[o,l]=D.useState("playerRank"),[c,u]=D.useState("asc"),[d,m]=D.useState(600),[f,h]=D.useState(""),[p,v]=D.useState("ALL"),[w,S]=D.useState(null);vi.useEffect(()=>{if(t.length>0){const R=t.find(b=>b.playerName==="Bijan Robinson")||t[0];console.log("[PlayerDataTable] Players updated:",{totalPlayers:t.length,samplePlayer:R.playerName,sampleValue:R.auctionValue,timestamp:new Date().toISOString()})}},[t]);const y={elite:5,tier1:4,tier2:3,tier3:2,replacement:1,repl:1},g=D.useMemo(()=>(console.log("[PlayerDataTable] Sample players:",t.slice(0,3).map(R=>{var b;return{name:R.playerName||R.name,targets:R.targets,receptions:R.receptions,hasPprMetrics:!!R.pprMetrics,pprScore:(b=R.pprMetrics)==null?void 0:b.score}})),t.map(R=>{if(R.pprMetrics)return R;const b={position:R.position,targets:R.targets,receptions:R.receptions,targetShare:R.targetShare,catchRate:R.catchRate,games:R.games||16,teamTargets:R.teamTargets,catchableTargets:R.catchableTargets||R.targets,yardsPerRouteRun:R.yardsPerRouteRun,redZoneTargets:R.redZoneTargets,routesRun:R.routesRun,teamPassPlays:R.teamPassPlays,receivingYards:R.receivingYards,teamReceivingYards:R.teamReceivingYards,dropRate:R.dropRate},$=Ac.calculatePPRScore(b);return{...R,pprMetrics:$}})),[t]),x=D.useMemo(()=>[...g].sort((b,$)=>{var Y,K;let L=b[o],q=$[o];if(o==="tier"){const X=b.tier||"replacement",de=$.tier||"replacement";L=y[X]||1,q=y[de]||1}else o==="playerRank"?(L=b.rank||999,q=$.rank||999):o==="maxBid"?(L=b.value||0,q=$.value||0):o==="edgePercent"?(L=b.edge&&b.marketValue?b.edge/b.marketValue*100:0,q=$.edge&&$.marketValue?$.edge/$.marketValue*100:0):o==="vorp"?(L=b.vbd||0,q=$.vbd||0):o==="projectedPoints"?(L=b.points||0,q=$.points||0):o==="sos"?(L=b.teamSeasonSOS||0,q=$.teamSeasonSOS||0):o==="ppr"&&(L=((Y=b.pprMetrics)==null?void 0:Y.score)||0,q=((K=$.pprMetrics)==null?void 0:K.score)||0);return L==null&&(L=0),q==null&&(q=0),L<q?c==="asc"?-1:1:L>q?c==="asc"?1:-1:0}),[g,o,c]),N=D.useMemo(()=>{let R=x;const b=new Set(s.map($=>{var L;return(L=$.player)==null?void 0:L.id}));if(R=R.filter($=>!b.has($.playerId)),p!=="ALL"&&(R=R.filter($=>$.position===p)),f.trim()){const $=f.toLowerCase().trim();R=R.filter(L=>{var q,Y,K;return((q=L.name)==null?void 0:q.toLowerCase().includes($))||((Y=L.team)==null?void 0:Y.toLowerCase().includes($))||((K=L.position)==null?void 0:K.toLowerCase().includes($))})}return R},[x,f,p,s]),k=D.useMemo(()=>N.slice(0,d),[N,d]),T=R=>{o===R?u(c==="asc"?"desc":"asc"):(l(R),u("asc"))},j=R=>{const b=new Set(a);b.has(R)?b.delete(R):b.add(R),r(b)},_=R=>{switch(R){case"elite":return"S+";case"tier1":return"S";case"tier2":return"A";case"tier3":return"B";case"replacement":return"C";case"repl":return"C";default:return"C"}},C=R=>{switch(R){case"elite":return"text-green-500 font-bold";case"tier1":return"text-green-400";case"tier2":return"text-yellow-400";case"tier3":return"text-orange-400";default:return"text-red-400"}},E=R=>R?R<=10?"text-green-500 font-bold":R<=30?"text-green-400":R<=60?"text-yellow-400":R<=100?"text-orange-400":"text-red-400":"text-gray-500",M=R=>R>=50?"text-red-400 font-bold":R>=30?"text-orange-400 font-semibold":R>=15?"text-yellow-400":R>=5?"text-green-400":"text-green-500 font-bold",W=R=>R>=20?"text-green-400 font-bold":R>=10?"text-green-300 font-semibold":R>=5?"text-yellow-400":R>=0?"text-gray-300":R>=-5?"text-orange-400":"text-red-400",B=R=>R>=50?"text-green-400 font-bold":R>=25?"text-green-300 font-semibold":R>=10?"text-yellow-400":R>=0?"text-gray-300":R>=-10?"text-orange-400":"text-red-400",H=R=>R>=100?"text-green-500 font-bold":R>=50?"text-green-400":R>=20?"text-yellow-400":R>=0?"text-orange-400":"text-red-400",J=R=>R?R<=12?"text-green-500 font-bold":R<=36?"text-green-400":R<=72?"text-yellow-400":R<=120?"text-orange-400":"text-red-400":"text-gray-500",U=R=>R?R>=300?"text-green-500 font-bold":R>=250?"text-green-400":R>=200?"text-yellow-400":R>=150?"text-orange-400":"text-red-400":"text-gray-400",I=R=>R?R>=9&&R<=11?"text-green-500 font-semibold":R===7||R===8||R===12?"text-green-400":R===6||R===13?"text-yellow-400":R===5||R===14?"text-orange-400":"text-red-400":"text-gray-500",A=R=>!R&&R!==0?"text-gray-500":R>=8?"text-red-500 font-semibold":R>=6?"text-red-400":R>=4?"text-orange-400":R>=2?"text-yellow-400":R>=1?"text-green-400":"text-green-500 font-semibold",O=R=>({QB:"text-red-400",RB:"text-green-400",WR:"text-blue-400",TE:"text-orange-400",DST:"text-purple-400",K:"text-yellow-400"})[R]||"text-gray-400",V=({field:R})=>o!==R?i.jsx("div",{className:"w-4 h-4 opacity-30",children:"⇅"}):c==="asc"?i.jsx(Vf,{className:"w-4 h-4 text-blue-400"}):i.jsx(If,{className:"w-4 h-4 text-blue-400"});return i.jsxs("div",{className:"w-full bg-gray-900 rounded-lg",children:[i.jsx("div",{className:"relative",style:{scrollbarWidth:"thin"},children:i.jsxs("table",{className:"w-full min-w-[1200px] relative",children:[i.jsx("thead",{className:"sticky top-0 z-50",style:{backgroundColor:"#1f2937",boxShadow:"0 2px 8px rgba(0,0,0,0.5)"},children:i.jsxs("tr",{className:"border-b border-gray-700",children:[i.jsx("th",{className:"px-1 py-2 text-center",colSpan:2,style:{maxWidth:"80px",width:"80px"},children:i.jsxs("select",{value:p,onChange:R=>v(R.target.value),className:"w-full px-1 py-1 text-xs bg-gray-700 border border-gray-600 rounded text-gray-200 focus:outline-none focus:border-blue-400",children:[i.jsx("option",{value:"ALL",children:"All"}),i.jsx("option",{value:"QB",children:"QB"}),i.jsx("option",{value:"RB",children:"RB"}),i.jsx("option",{value:"WR",children:"WR"}),i.jsx("option",{value:"TE",children:"TE"}),i.jsx("option",{value:"DST",children:"DST"}),i.jsx("option",{value:"K",children:"K"})]})}),i.jsx("th",{className:"px-2 py-1 text-left text-xs font-medium min-w-[120px]",style:{position:"sticky",left:0,backgroundColor:"#1f2937",zIndex:20},children:i.jsx("input",{type:"text",value:f,onChange:R=>h(R.target.value),placeholder:"Search...",className:"w-full px-2 py-1 text-xs bg-gray-700 border border-gray-600 rounded text-gray-200 placeholder-gray-400 focus:outline-none focus:border-blue-400"})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>T("position"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Pos ",i.jsx(V,{field:"position"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>T("team"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Team ",i.jsx(V,{field:"team"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>T("tier"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Tier ",i.jsx(V,{field:"tier"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>T("ppr"),title:"PPR Reception Value Score (0-100)",children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["PPR ",i.jsx(V,{field:"ppr"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>T("playerRank"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Rank ",i.jsx(V,{field:"playerRank"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>T("maxBid"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Max Bid ",i.jsx(V,{field:"maxBid"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>T("intrinsicValue"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Intrinsic ",i.jsx(V,{field:"intrinsicValue"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>T("marketValue"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Market ",i.jsx(V,{field:"marketValue"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>T("edge"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Edge ",i.jsx(V,{field:"edge"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>T("edgePercent"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Edge% ",i.jsx(V,{field:"edgePercent"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>T("vorp"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["VORP ",i.jsx(V,{field:"vorp"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>T("adp"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["ADP ",i.jsx(V,{field:"adp"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>T("projectedPoints"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Proj Pts ",i.jsx(V,{field:"projectedPoints"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>T("byeWeek"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Bye ",i.jsx(V,{field:"byeWeek"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>T("sos"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["SOS ",i.jsx(V,{field:"sos"})]})})]})}),i.jsx("tbody",{className:"divide-y divide-gray-800",children:k.map((R,b)=>{var K,X,de;const $=R.edge||0,L=R.marketValue||1,q=L>0?$/L*100:0,Y=R.id||`${R.name}_${R.team}_${R.position}_${b}`;return i.jsxs("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[i.jsx("td",{className:"px-1 py-1 text-center",style:{maxWidth:"30px",width:"30px"},children:i.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded bg-gray-700 border-gray-600",checked:a.has(Y),onChange:()=>j(Y)})}),i.jsx("td",{className:"px-1 py-1 text-center",style:{maxWidth:"30px",width:"30px"},children:i.jsx("button",{onClick:()=>S(R),className:"p-0.5 hover:bg-gray-700 rounded transition-colors",title:"View Details",children:i.jsx(Of,{className:"w-3 h-3 text-gray-400 hover:text-white"})})}),i.jsx("td",{className:"px-2 py-1 min-w-[120px]",style:{position:"sticky",left:0,backgroundColor:"#111827",zIndex:10},children:i.jsx("div",{style:{color:"white",fontWeight:"500"},className:"hover:text-blue-400 cursor-pointer truncate text-left",children:(()=>{const Z=R.name||R.playerName||"Unknown";return b===0&&(console.log("First player name rendering:",Z),console.log("First player object keys:",Object.keys(R)),console.log("First player intrinsicValue:",R.intrinsicValue),console.log("First player auctionValue:",R.auctionValue),console.log("First player marketValue:",R.marketValue)),Z})()})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsx("span",{className:`font-semibold ${O(R.position)}`,children:R.position})}),i.jsx("td",{className:"px-2 py-1 text-gray-300 text-center",children:(()=>{const Z=R.team||"FA";return b===0&&console.log("First player team:",R.team,"from player:",R),Z})()}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsx("span",{className:C(R.tier),children:_(R.tier)})}),i.jsx("td",{className:"px-2 py-1 text-center",children:R.pprMetrics?i.jsxs("div",{className:"flex items-center justify-center gap-1",children:[i.jsx("span",{className:`font-semibold ${R.pprMetrics.color}`,title:`PPR Score: ${R.pprMetrics.score.toFixed(1)}/100`,children:R.pprMetrics.score.toFixed(0)}),i.jsx("div",{className:"w-8 h-1.5 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full transition-all duration-300",style:{width:`${R.pprMetrics.score}%`,backgroundColor:R.pprMetrics.hexColor}})})]}):i.jsx("span",{className:"text-gray-600",children:"-"})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsx("span",{className:E(R.rank),children:R.rank||"-"})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsxs("span",{className:"text-white",children:["$",R.value||0]})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsxs("span",{className:M(R.intrinsicValue||0),children:["$",(()=>{const Z=R.intrinsicValue||0;return(R.name==="Bijan Robinson"||R.playerName==="Bijan Robinson")&&console.log("[PlayerDataTable] Intrinsic value for Bijan:",Z,"Full player:",R),Z.toFixed(0)})()]})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsxs("span",{className:M(R.marketValue||0),children:["$",R.marketValue||0]})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsxs("span",{className:W($),children:[$>0?"+":"","$",Math.abs($).toFixed(0)]})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsxs("span",{className:B(q),children:[q>0?"+":"",q.toFixed(0),"%"]})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsx("span",{className:H(R.vbd||0),children:((K=R.vbd)==null?void 0:K.toFixed(0))||"0"})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsx("span",{className:J(R.adp),children:((X=R.adp)==null?void 0:X.toFixed(1))||"-"})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsx("span",{className:U(R.points||0),children:(R.points||0).toFixed(0)})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsx("span",{className:I(R.byeWeek),children:R.byeWeek||"-"})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsx("span",{className:A(R.teamSeasonSOS),children:((de=R.teamSeasonSOS)==null?void 0:de.toFixed(2))||"-"})})]},Y)})})]})}),i.jsxs("div",{className:"bg-gray-800 border-t border-gray-700 px-4 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",k.length," of ",x.length," players"]}),i.jsxs("div",{className:"flex gap-2",children:[d>50&&i.jsxs("button",{onClick:()=>m(Math.max(50,d-50)),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg flex items-center gap-2 transition-colors",children:[i.jsx(qf,{className:"w-4 h-4"}),"Show 50 Less"]}),d<N.length&&i.jsxs("button",{onClick:()=>m(Math.min(N.length,d+50)),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2 transition-colors",children:[i.jsx(Hf,{className:"w-4 h-4"}),"Show 50 More"]})]})]}),w&&i.jsx(Av,{player:w,isOpen:!!w,onClose:()=>S(null)})]})},gp=({isOpen:t,onClose:e})=>{const[n,s]=D.useState("projections");if(!t)return null;const a=[{id:"projections",label:"Projected Points",icon:Vn},{id:"vorp",label:"VORP",icon:pi},{id:"auction",label:"Auction Value",icon:ys},{id:"invariants",label:"Invariant Tests",icon:Rc},{id:"tiers",label:"Tiers",icon:Wf},{id:"edge",label:"Edge",icon:cn},{id:"confidence",label:"Confidence",icon:$f},{id:"ranges",label:"Bid Ranges",icon:Ya},{id:"data",label:"Data Sources",icon:zf}],r=()=>{switch(n){case"projections":return i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Projected Points Aggregation"}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Weighted Average Formula:"}),i.jsx("code",{className:"block bg-gray-900 p-3 rounded text-green-400",children:"projectedPoints = (FantasyPros × 0.40) + (CBS × 0.35) + (baseline × 0.25)"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-semibold text-gray-300",children:"Data Sources & Weights:"}),i.jsxs("ul",{className:"space-y-2 text-gray-400",children:[i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:"• FantasyPros (4 position files)"}),i.jsx("span",{className:"text-blue-400 font-mono",children:"40%"})]}),i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:"• CBS Sports (4 position files)"}),i.jsx("span",{className:"text-blue-400 font-mono",children:"35%"})]}),i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:"• Baseline projections_2025.csv"}),i.jsx("span",{className:"text-blue-400 font-mono",children:"25%"})]})]})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Player Matching Process:"}),i.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-gray-400",children:[i.jsx("li",{children:"Normalize names (lowercase, remove special chars)"}),i.jsx("li",{children:"Remove suffixes (Jr, Sr, II, III, etc.)"}),i.jsx("li",{children:"Match by normalized_name + position"}),i.jsx("li",{children:"Calculate weighted average across all sources"}),i.jsx("li",{children:"Round to 1 decimal place"})]})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"PPR Scoring Formula (if calculated from stats):"}),i.jsx("code",{className:"block bg-gray-900 p-3 rounded text-green-400 text-sm",children:"points = passYds/25 + passTD×4 - INT×2 + rushYds/10 + rushTD×6 + receptions×1 + recYds/10 + recTD×6"})]})]});case"vorp":return i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"VORP (Value Over Replacement Player)"}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Formula:"}),i.jsx("code",{className:"block bg-gray-900 p-3 rounded text-green-400",children:"VORP = projectedPoints - replacementPoints"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-semibold text-gray-300",children:"Replacement Level by Position:"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[i.jsx("span",{className:"text-gray-400",children:"QB:"}),i.jsx("span",{className:"text-blue-400 font-mono ml-2",children:"QB15"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Most teams roster 1-2 QBs"})]}),i.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[i.jsx("span",{className:"text-gray-400",children:"RB:"}),i.jsx("span",{className:"text-blue-400 font-mono ml-2",children:"RB48"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"12 teams × 4 RBs average"})]}),i.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[i.jsx("span",{className:"text-gray-400",children:"WR:"}),i.jsx("span",{className:"text-blue-400 font-mono ml-2",children:"WR60"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"12 teams × 5 WRs average"})]}),i.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[i.jsx("span",{className:"text-gray-400",children:"TE:"}),i.jsx("span",{className:"text-blue-400 font-mono ml-2",children:"TE18"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Most teams roster 1-2 TEs"})]}),i.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[i.jsx("span",{className:"text-gray-400",children:"DST:"}),i.jsx("span",{className:"text-blue-400 font-mono ml-2",children:"DST14"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Some teams stream DST"})]}),i.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[i.jsx("span",{className:"text-gray-400",children:"K:"}),i.jsx("span",{className:"text-blue-400 font-mono ml-2",children:"K13"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Few roster backup kickers"})]})]})]}),i.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Why VORP Matters:"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"VORP measures how much better a player is than what's freely available. A QB with 350 points might seem valuable, but if replacement QBs score 320 points, the VORP is only 30. This helps compare value across positions fairly."})]})]});case"auction":return i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Auction Value Calculation (Calibrated Model)"}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Calibrated Formula:"}),i.jsxs("code",{className:"block bg-gray-900 p-3 rounded text-green-400 text-sm",children:["baseValue = (vorp / totalVORP) × discretionaryBudget",i.jsx("br",{}),"tierAdjusted = baseValue × tierMultiplier",i.jsx("br",{}),"calibrated = tierAdjusted × calibrationFactor",i.jsx("br",{}),"finalValue = Math.max(1, Math.round(calibrated))"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-semibold text-gray-300",children:"Position-Specific Calibration:"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[i.jsx("span",{className:"text-gray-400 font-semibold",children:"RB:"}),i.jsx("span",{className:"text-green-400 font-mono ml-2",children:"45-50% of budget"}),i.jsx("p",{className:"text-xs text-gray-500",children:"High value on workhorse backs"})]}),i.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[i.jsx("span",{className:"text-gray-400 font-semibold",children:"WR:"}),i.jsx("span",{className:"text-blue-400 font-mono ml-2",children:"35-40% of budget"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Deep position but elite matters"})]}),i.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[i.jsx("span",{className:"text-gray-400 font-semibold",children:"QB:"}),i.jsx("span",{className:"text-yellow-400 font-mono ml-2",children:"5-10% of budget"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Streaming viable"})]}),i.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[i.jsx("span",{className:"text-gray-400 font-semibold",children:"TE:"}),i.jsx("span",{className:"text-purple-400 font-mono ml-2",children:"5-10% of budget"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Premium for elite TEs"})]})]}),i.jsx("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:i.jsxs("p",{className:"text-sm text-gray-400",children:[i.jsx("span",{className:"font-semibold text-blue-400",children:"Calibrated Model:"})," Dynamic calibration ensures budget conservation (top 192 = ~$2400) and proper position distribution based on market conditions"]})})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Discretionary Budget:"}),i.jsxs("p",{className:"text-gray-400 text-sm",children:["Total Budget ($2400 for 12 teams) - Minimum Roster Cost ($192 = 12 teams × 16 players × $1) = ",i.jsx("span",{className:"text-green-400 font-mono",children:"$2208 discretionary"})]})]}),i.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-green-400 mb-2",children:"✅ Model Validation:"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Our calibrated model automatically adjusts to ensure fair valuations based on current projections and market data. Values are dynamically calibrated to match historical spending patterns."})]})]});case"invariants":return i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Model Validation Tests"}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"What Are Invariants?"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Validation tests ensure our valuation model produces fair, balanced, and realistic auction values. The calibrated model dynamically adjusts to maintain these constraints."})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-semibold text-gray-300",children:"Current Test Results:"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 rounded p-3",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-green-400 font-semibold",children:"✅ Budget Conservation"}),i.jsx("span",{className:"text-green-400 font-mono",children:"PASSED"})]}),i.jsxs("p",{className:"text-gray-400 text-sm",children:["Top 192 players: ",i.jsx("span",{className:"text-green-400",children:"$2,338"})," (97.4% of $2,400 target)"]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ensures the total auction budget is properly distributed across all roster spots"})]}),i.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 rounded p-3",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-green-400 font-semibold",children:"✅ Position Distribution"}),i.jsx("span",{className:"text-green-400 font-mono",children:"PASSED"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-xs",children:[i.jsxs("div",{className:"text-gray-400",children:["RB: ",i.jsx("span",{className:"text-green-400",children:"45.3%"})," (45-50%)"]}),i.jsxs("div",{className:"text-gray-400",children:["WR: ",i.jsx("span",{className:"text-green-400",children:"39.9%"})," (35-40%)"]}),i.jsxs("div",{className:"text-gray-400",children:["QB: ",i.jsx("span",{className:"text-green-400",children:"6.6%"})," (5-10%)"]}),i.jsxs("div",{className:"text-gray-400",children:["TE: ",i.jsx("span",{className:"text-green-400",children:"7.1%"})," (5-10%)"]}),i.jsxs("div",{className:"text-gray-400",children:["DST: ",i.jsx("span",{className:"text-green-400",children:"0.6%"})," (0.5-2%)"]}),i.jsxs("div",{className:"text-gray-400",children:["K: ",i.jsx("span",{className:"text-green-400",children:"0.6%"})," (0.5-1%)"]})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Matches historical auction spending patterns by position"})]}),i.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 rounded p-3",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-green-400 font-semibold",children:"✅ No Negative Values"}),i.jsx("span",{className:"text-green-400 font-mono",children:"PASSED"})]}),i.jsx("p",{className:"text-gray-400 text-sm",children:"All 572 players have positive or $1 minimum values"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Every rosterable player must have at least $1 value"})]}),i.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 rounded p-3",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-green-400 font-semibold",children:"✅ Reasonable Value Ranges"}),i.jsx("span",{className:"text-green-400 font-mono",children:"PASSED"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[i.jsxs("div",{className:"text-gray-400",children:["Max RB: ",i.jsx("span",{className:"text-green-400",children:"$75"})," (limit: $80)"]}),i.jsxs("div",{className:"text-gray-400",children:["Max WR: ",i.jsx("span",{className:"text-green-400",children:"$59"})," (limit: $75)"]}),i.jsxs("div",{className:"text-gray-400",children:["Max QB: ",i.jsx("span",{className:"text-green-400",children:"$24"})," (limit: $45)"]}),i.jsxs("div",{className:"text-gray-400",children:["Max TE: ",i.jsx("span",{className:"text-green-400",children:"$36"})," (limit: $40)"]})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Prevents unrealistic player valuations"})]})]})]}),i.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Calibration Approach:"}),i.jsxs("div",{className:"space-y-1 text-sm",children:[i.jsx("p",{className:"text-gray-400",children:"The model uses a dynamic calibration factor (typically 0.55-0.65) that automatically adjusts based on the total VORP to ensure proper budget distribution."}),i.jsx("p",{className:"text-gray-400",children:"This approach maintains flexibility while ensuring consistent results across different projection sets and scoring systems."})]})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Testing Command:"}),i.jsx("code",{className:"block bg-gray-900 p-3 rounded text-green-400 text-sm",children:"npm run test:valuations"}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Run this command to verify all validation tests pass after any model changes"})]})]});case"tiers":return i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Tier Classification"}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Tier Assignment Logic:"}),i.jsxs("code",{className:"block bg-gray-900 p-3 rounded text-green-400 text-sm",children:["if (positionRank ≤ 3) tier = 'elite'",i.jsx("br",{}),"else if (positionRank ≤ 8) tier = 'tier1'",i.jsx("br",{}),"else if (positionRank ≤ 20) tier = 'tier2'",i.jsx("br",{}),"else if (auctionValue > 5) tier = 'tier3'",i.jsx("br",{}),"else tier = 'replacement'"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-semibold text-gray-300",children:"Base Tier Multipliers:"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between bg-purple-900/30 rounded p-3",children:[i.jsx("span",{className:"text-purple-400 font-semibold",children:"Elite (Ranks 1-3)"}),i.jsx("span",{className:"text-green-400 font-mono",children:"1.15× (+15%)"})]}),i.jsxs("div",{className:"flex justify-between bg-blue-900/30 rounded p-3",children:[i.jsx("span",{className:"text-blue-400 font-semibold",children:"Tier 1 (Ranks 4-8)"}),i.jsx("span",{className:"text-green-400 font-mono",children:"1.08× (+8%)"})]}),i.jsxs("div",{className:"flex justify-between bg-gray-800 rounded p-3",children:[i.jsx("span",{className:"text-gray-300",children:"Tier 2 (Ranks 9-16)"}),i.jsx("span",{className:"text-gray-400 font-mono",children:"1.00× (base)"})]}),i.jsxs("div",{className:"flex justify-between bg-gray-800 rounded p-3",children:[i.jsx("span",{className:"text-gray-400",children:"Tier 3 (Ranks 17-24)"}),i.jsx("span",{className:"text-orange-400 font-mono",children:"0.92× (-8%)"})]}),i.jsxs("div",{className:"flex justify-between bg-gray-900 rounded p-3",children:[i.jsx("span",{className:"text-gray-500",children:"Replacement (25+)"}),i.jsx("span",{className:"text-red-400 font-mono",children:"0.75× (-25%)"})]})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"* Position-specific adjustments are applied on top of base multipliers"})]}),i.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Position Rank Calculation:"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Players are ranked within their position based on projected points (descending). The #1 RB has positionRank = 1, regardless of overall rank."})]})]});case"edge":return i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Edge Calculation"}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Edge Formula:"}),i.jsxs("code",{className:"block bg-gray-900 p-3 rounded text-green-400",children:["edge = auctionValue - marketPrice",i.jsx("br",{}),"edge% = (edge / marketValue) × 100"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-semibold text-gray-300",children:"Understanding Edge Values:"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between bg-green-900/30 rounded p-3",children:[i.jsx("span",{className:"text-green-400",children:"Edge ≥ $20"}),i.jsx("span",{className:"text-gray-300",children:"Exceptional value - priority target"})]}),i.jsxs("div",{className:"flex justify-between bg-green-900/20 rounded p-3",children:[i.jsx("span",{className:"text-green-300",children:"Edge $10-19"}),i.jsx("span",{className:"text-gray-300",children:"Strong value - recommended"})]}),i.jsxs("div",{className:"flex justify-between bg-yellow-900/20 rounded p-3",children:[i.jsx("span",{className:"text-yellow-400",children:"Edge $5-9"}),i.jsx("span",{className:"text-gray-300",children:"Good value - consider"})]}),i.jsxs("div",{className:"flex justify-between bg-gray-800 rounded p-3",children:[i.jsx("span",{className:"text-gray-400",children:"Edge $0-4"}),i.jsx("span",{className:"text-gray-300",children:"Fair value - market price"})]}),i.jsxs("div",{className:"flex justify-between bg-orange-900/20 rounded p-3",children:[i.jsx("span",{className:"text-orange-400",children:"Edge -$5 to -$1"}),i.jsx("span",{className:"text-gray-300",children:"Slight overpay - be cautious"})]}),i.jsxs("div",{className:"flex justify-between bg-red-900/20 rounded p-3",children:[i.jsx("span",{className:"text-red-400",children:"Edge < -$5"}),i.jsx("span",{className:"text-gray-300",children:"Significant overpay - avoid"})]})]})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Market Price Source:"}),i.jsxs("p",{className:"text-gray-400 text-sm",children:["Market prices come from actual Average Auction Values (AAV) in the ESPN_AAV column from adp1_2025.csv. If no AAV data exists, we estimate conservatively:",i.jsx("code",{className:"text-green-400",children:"min(2, max(1, round(auctionValue × 0.5)))"})]})]})]});case"confidence":return i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Confidence Score"}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Confidence Calculation:"}),i.jsxs("code",{className:"block bg-gray-900 p-3 rounded text-green-400 text-sm",children:["baseFactor = min(1, numSources / 3)",i.jsx("br",{}),"agreementFactor = based on coefficient of variation",i.jsx("br",{}),"confidence = baseFactor × 0.5 + agreementFactor",i.jsx("br",{}),"final = min(0.95, max(0.3, confidence))"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-semibold text-gray-300",children:"Agreement Factors (Coefficient of Variation):"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between bg-green-900/30 rounded p-3",children:[i.jsx("span",{className:"text-green-400",children:"CV < 0.1"}),i.jsx("span",{className:"text-gray-300",children:"Very high agreement (+0.4)"})]}),i.jsxs("div",{className:"flex justify-between bg-green-900/20 rounded p-3",children:[i.jsx("span",{className:"text-green-300",children:"CV 0.1-0.2"}),i.jsx("span",{className:"text-gray-300",children:"High agreement (+0.3)"})]}),i.jsxs("div",{className:"flex justify-between bg-yellow-900/20 rounded p-3",children:[i.jsx("span",{className:"text-yellow-400",children:"CV 0.2-0.3"}),i.jsx("span",{className:"text-gray-300",children:"Moderate agreement (+0.2)"})]}),i.jsxs("div",{className:"flex justify-between bg-orange-900/20 rounded p-3",children:[i.jsx("span",{className:"text-orange-400",children:"CV 0.3-0.5"}),i.jsx("span",{className:"text-gray-300",children:"Low agreement (+0.1)"})]}),i.jsxs("div",{className:"flex justify-between bg-red-900/20 rounded p-3",children:[i.jsx("span",{className:"text-red-400",children:"CV > 0.5"}),i.jsx("span",{className:"text-gray-300",children:"Poor agreement (+0.0)"})]})]})]}),i.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"What Confidence Means:"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Higher confidence (0.8+) means projection sources agree closely. Lower confidence (0.3-0.6) indicates disagreement between sources or limited data. Use confidence to gauge risk when making draft decisions."})]})]});case"ranges":return i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Bid Range Calculations"}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Bid Range Formulas:"}),i.jsxs("code",{className:"block bg-gray-900 p-3 rounded text-green-400",children:["maxBid = Math.max(1, Math.round(auctionValue × 1.15))",i.jsx("br",{}),"targetBid = auctionValue",i.jsx("br",{}),"minBid = Math.max(1, Math.round(auctionValue × 0.85))"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-semibold text-gray-300",children:"Understanding Bid Ranges:"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{className:"text-green-400 font-semibold",children:"Max Bid"}),i.jsx("span",{className:"text-gray-400",children:"Up to 15% over value"})]}),i.jsx("p",{className:"text-gray-500 text-sm",children:"The absolute maximum you should pay. Going beyond this significantly overpays relative to the player's projected contribution."})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{className:"text-blue-400 font-semibold",children:"Target Bid"}),i.jsx("span",{className:"text-gray-400",children:"Fair auction value"})]}),i.jsx("p",{className:"text-gray-500 text-sm",children:"The calculated fair value based on VORP and market adjustments. Aim to get players at or below this price."})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{className:"text-yellow-400 font-semibold",children:"Min Bid"}),i.jsx("span",{className:"text-gray-400",children:"15% under value"})]}),i.jsx("p",{className:"text-gray-500 text-sm",children:"The bargain threshold. Getting a player at this price represents excellent value and should be prioritized."})]})]})]}),i.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Floor/Ceiling Points:"}),i.jsxs("code",{className:"block bg-gray-900 p-2 rounded text-green-400 text-sm mb-2",children:["floorPoints = projectedPoints × 0.75",i.jsx("br",{}),"ceilingPoints = projectedPoints × 1.25"]}),i.jsx("p",{className:"text-gray-400 text-sm",children:"If not provided by data sources, we estimate floor at 75% and ceiling at 125% of projected points to represent reasonable variance ranges."})]})]});case"data":return i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Data Processing Pipeline"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"1. ETL Pipeline (Python)"}),i.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"robust_loader.py → artifacts/clean_data/"}),i.jsxs("ul",{className:"text-gray-500 text-sm space-y-1",children:[i.jsx("li",{children:"• Validates and cleans canonical data"}),i.jsx("li",{children:"• Removes duplicates"}),i.jsx("li",{children:"• Handles nulls and validates types"})]})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"2. Data Loading (TypeScript)"}),i.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"cleanDataLoader.ts"}),i.jsxs("ul",{className:"text-gray-500 text-sm space-y-1",children:[i.jsx("li",{children:"• Loads CSV files from clean_data/"}),i.jsx("li",{children:"• Applies team code mappings (ARZ→ARI, BLT→BAL)"}),i.jsx("li",{children:"• Builds SOS lookup from sos_2025.csv"})]})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"3. Aggregation & Normalization"}),i.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"projectionAggregator.ts & playerResolver.ts"}),i.jsxs("ul",{className:"text-gray-500 text-sm space-y-1",children:[i.jsx("li",{children:"• Weights multiple projection sources"}),i.jsx("li",{children:"• Normalizes player names across sources"}),i.jsx("li",{children:'• Handles DST variations ("Bills D/ST" vs "Buffalo DST")'})]})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"4. Valuation Calculation"}),i.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"calibratedValuationModel.ts"}),i.jsxs("ul",{className:"text-gray-500 text-sm space-y-1",children:[i.jsx("li",{children:"• Calculates VORP for each player"}),i.jsx("li",{children:"• Applies market and tier adjustments"}),i.jsx("li",{children:"• Generates auction values and bid ranges"})]})]})]}),i.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Impact Chain:"}),i.jsxs("div",{className:"text-gray-400 text-sm space-y-1",children:[i.jsx("div",{children:"Projected Points (aggregated)"}),i.jsx("div",{className:"ml-4",children:"↓"}),i.jsx("div",{children:"VORP (points - replacement)"}),i.jsx("div",{className:"ml-4",children:"↓"}),i.jsx("div",{children:"Auction Value (VORP share × budget)"}),i.jsx("div",{className:"ml-4",children:"↓"}),i.jsx("div",{children:"Max/Target/Min Bids"}),i.jsx("div",{className:"ml-4",children:"↓"}),i.jsx("div",{children:"Edge (value vs market)"}),i.jsx("div",{className:"ml-4",children:"↓"}),i.jsx("div",{children:"Tier (based on position rank)"})]})]})]});default:return null}};return i.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-gray-900 rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ya,{className:"w-6 h-6 text-blue-400"}),i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Methodology"})]}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(un,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"flex overflow-x-auto border-b border-gray-700 px-6",children:a.map(o=>{const l=o.icon;return i.jsxs("button",{onClick:()=>s(o.id),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-all whitespace-nowrap ${n===o.id?"border-blue-400 text-blue-400":"border-transparent text-gray-400 hover:text-white"}`,children:[i.jsx(l,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm font-medium",children:o.label})]},o.id)})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r()})]})})},Zn=class Zn{constructor(){Q(this,"config",null);Q(this,"CONFIG_PATH","/canonical_data/config")}static getInstance(){return Zn.instance||(Zn.instance=new Zn),Zn.instance}async loadConfiguration(){try{P.info("Loading configuration files...");const[e,n,s,a,r,o,l,c]=await Promise.all([this.loadLeagueSettings(),this.loadScoringSystem(),this.loadReplacementLevels(),this.loadMarketAdjustments(),this.loadTierMultipliers(),this.loadProjectionWeights(),this.loadBudgetAllocations(),this.loadBidRanges()]);return this.config={leagueSettings:e,scoringSystem:n,replacementLevels:s,marketAdjustments:a,tierMultipliers:r,projectionWeights:o,budgetAllocations:l,bidRanges:c},P.info("Configuration loaded successfully"),this.config}catch(e){return P.error("Failed to load configuration:",e),this.getDefaultConfiguration()}}getConfiguration(){return this.config?this.config:this.getDefaultConfiguration()}updateConfiguration(e){return this.config={...this.config,...e},window.dispatchEvent(new CustomEvent("configurationUpdated",{detail:this.config})),this.config}exportConfiguration(){return JSON.stringify(this.config,null,2)}importConfiguration(e){try{const n=JSON.parse(e);return this.config=n,window.dispatchEvent(new CustomEvent("configurationUpdated",{detail:this.config})),this.config}catch(n){throw P.error("Failed to import configuration:",n),new Error("Invalid configuration format")}}async loadLeagueSettings(){const e=await this.loadCSV("league_settings.csv"),n={};return e.forEach(s=>{const a=parseFloat(s.value);switch(s.setting_category){case"league_structure":s.setting_name==="num_teams"&&(n.numTeams=a),s.setting_name==="auction_budget"&&(n.auctionBudget=a),s.setting_name==="roster_size"&&(n.rosterSize=a),s.setting_name==="bench_spots"&&(n.benchSpots=a),s.setting_name==="regular_season_weeks"&&(n.regularSeasonWeeks=a),s.setting_name==="playoff_weeks"&&(n.playoffWeeks=a);break;case"starting_lineup":n.starters||(n.starters={});const r=s.setting_name.replace("_starters","").toUpperCase();n.starters[r==="FLEX"?"FLEX":r]=a;break;case"roster_limits":n.rosterLimits||(n.rosterLimits={});const o=s.setting_name.replace("max_","").toUpperCase();n.rosterLimits[o]=a;break;case"minimum_bid":n.minBid=a;break}}),n}async loadScoringSystem(){const e=await this.loadCSV("scoring_system.csv"),n={passing:{},rushing:{},receiving:{},misc:{}};return e.forEach(s=>{const a=parseFloat(s.points_value);switch(s.category){case"passing":s.stat_name==="passing_yards"&&(n.passing.yards=a),s.stat_name==="passing_touchdowns"&&(n.passing.touchdowns=a),s.stat_name==="interceptions"&&(n.passing.interceptions=a);break;case"rushing":s.stat_name==="rushing_yards"&&(n.rushing.yards=a),s.stat_name==="rushing_touchdowns"&&(n.rushing.touchdowns=a),s.stat_name==="rushing_attempts"&&(n.rushing.attempts=a);break;case"receiving":s.stat_name==="receptions"&&(n.receiving.receptions=a),s.stat_name==="receiving_yards"&&(n.receiving.yards=a),s.stat_name==="receiving_touchdowns"&&(n.receiving.touchdowns=a),s.stat_name==="receiving_targets"&&(n.receiving.targets=a);break;case"misc":s.stat_name==="two_point_conversions"&&(n.misc.twoPointConversions=a),s.stat_name==="fumbles_lost"&&(n.misc.fumblesLost=a),s.stat_name==="fumble_recovery_td"&&(n.misc.fumbleRecoveryTd=a);break}}),n}async loadReplacementLevels(){const e=await this.loadCSV("replacement_levels.csv"),n={};return e.forEach(s=>{n[s.position]=parseInt(s.replacement_rank)}),n}async loadMarketAdjustments(){const e=await this.loadCSV("market_adjustments.csv"),n={};return e.forEach(s=>{n[s.position]=parseFloat(s.market_adjustment)}),n}async loadTierMultipliers(){return(await this.loadCSV("tier_multipliers.csv")).map(n=>({name:n.tier_name,rankStart:parseInt(n.rank_start),rankEnd:parseInt(n.rank_end),multiplier:parseFloat(n.multiplier)}))}async loadProjectionWeights(){return(await this.loadCSV("projection_weights.csv")).map(n=>({source:n.source_name,weight:parseFloat(n.weight),enabled:n.enabled==="true"}))}async loadBudgetAllocations(){return(await this.loadCSV("budget_allocation.csv")).map(n=>({position:n.position,minPercent:parseFloat(n.min_percent),maxPercent:parseFloat(n.max_percent),targetPercent:parseFloat(n.target_percent)}))}async loadBidRanges(){const e=await this.loadCSV("bid_ranges.csv"),n={};return e.forEach(s=>{const a=parseFloat(s.multiplier);switch(s.range_type){case"max_bid":n.maxBidMultiplier=a;break;case"target_bid":n.targetBidMultiplier=a;break;case"min_bid":n.minBidMultiplier=a;break;case"aggressive_max":n.aggressiveMax=a;break;case"aggressive_min":n.aggressiveMin=a;break;case"conservative_max":n.conservativeMax=a;break;case"conservative_min":n.conservativeMin=a;break}}),n}async loadCSV(e){try{const s=await(await fetch(`${this.CONFIG_PATH}/${e}`)).text();return Sl(s,{header:!0,dynamicTyping:!1,skipEmptyLines:"greedy"}).data}catch{return P.warn(`Could not load ${e}, using defaults`),[]}}getDefaultConfiguration(){return{leagueSettings:{numTeams:12,auctionBudget:200,rosterSize:16,benchSpots:7,regularSeasonWeeks:18,playoffWeeks:3,starters:{QB:1,RB:2,WR:2,TE:1,FLEX:1,DST:1,K:1},rosterLimits:{QB:3,RB:8,WR:8,TE:3,DST:2,K:2},minBid:1},scoringSystem:{passing:{yards:.04,touchdowns:4,interceptions:-2},rushing:{yards:.1,touchdowns:6,attempts:0},receiving:{receptions:1,yards:.1,touchdowns:6,targets:0},misc:{twoPointConversions:2,fumblesLost:-2,fumbleRecoveryTd:6}},replacementLevels:{QB:15,RB:48,WR:60,TE:18,DST:14,K:13},marketAdjustments:{QB:.85,RB:1.15,WR:1,TE:.9,DST:.5,K:.45},tierMultipliers:[{name:"elite",rankStart:1,rankEnd:3,multiplier:1.2},{name:"tier1",rankStart:4,rankEnd:8,multiplier:1.1},{name:"tier2",rankStart:9,rankEnd:20,multiplier:1},{name:"tier3",rankStart:21,rankEnd:36,multiplier:.92},{name:"tier4",rankStart:37,rankEnd:60,multiplier:.85},{name:"replacement",rankStart:61,rankEnd:999,multiplier:.75}],projectionWeights:[{source:"fantasypros",weight:.4,enabled:!0},{source:"cbs",weight:.35,enabled:!0},{source:"projections_2025",weight:.25,enabled:!0}],budgetAllocations:[{position:"QB",minPercent:5,maxPercent:10,targetPercent:7},{position:"RB",minPercent:45,maxPercent:50,targetPercent:48},{position:"WR",minPercent:35,maxPercent:40,targetPercent:37},{position:"TE",minPercent:5,maxPercent:10,targetPercent:7},{position:"DST",minPercent:.5,maxPercent:1.5,targetPercent:1},{position:"K",minPercent:.5,maxPercent:1,targetPercent:.5}],bidRanges:{maxBidMultiplier:1.15,targetBidMultiplier:1,minBidMultiplier:.85,aggressiveMax:1.25,aggressiveMin:.9,conservativeMax:1.1,conservativeMin:.8}}}};Q(Zn,"instance");let _l=Zn;const Cr=_l.getInstance(),yp=({isOpen:t,onClose:e,onApply:n})=>{const[s,a]=D.useState("league"),[r,o]=D.useState(null),[l,c]=D.useState(!1),[u,d]=D.useState(!1);D.useEffect(()=>{t&&m()},[t]);const m=async()=>{const g=await Cr.loadConfiguration();o(g),c(!1)},f=(g,x)=>{if(!r)return;const N={...r};let k=N;for(let T=0;T<g.length-1;T++)k=k[g[T]];k[g[g.length-1]]=x,o(N),c(!0)},h=async()=>{if(r){d(!0);try{Cr.updateConfiguration(r),await n(r),ge.success("Settings applied successfully! Values recalculated."),c(!1)}catch(g){ge.error("Failed to apply settings"),console.error("Error applying settings:",g)}finally{d(!1)}}},p=()=>{m(),ge.success("Settings reset to saved values")},v=()=>{const g=Cr.exportConfiguration(),x=new Blob([g],{type:"application/json"}),N=URL.createObjectURL(x),k=document.createElement("a");k.href=N,k.download="fftool_settings.json",k.click(),URL.revokeObjectURL(N),ge.success("Settings exported successfully")},w=g=>{var k;const x=(k=g.target.files)==null?void 0:k[0];if(!x)return;const N=new FileReader;N.onload=T=>{var j;try{const _=Cr.importConfiguration((j=T.target)==null?void 0:j.result);o(_),c(!0),ge.success("Settings imported successfully")}catch{ge.error("Failed to import settings")}},N.readAsText(x)};if(!t||!r)return null;const S=[{id:"league",label:"League Settings",icon:rr},{id:"scoring",label:"Scoring",icon:Qf},{id:"replacement",label:"VORP Levels",icon:cn},{id:"market",label:"Market Adjustments",icon:ys},{id:"tiers",label:"Tier Values",icon:Wf},{id:"projections",label:"Projections",icon:Ya},{id:"bidding",label:"Bid Ranges",icon:cn}],y=()=>{switch(s){case"league":return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"League Structure"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Number of Teams"}),i.jsx("input",{type:"number",value:r.leagueSettings.numTeams,onChange:g=>f(["leagueSettings","numTeams"],parseInt(g.target.value)),min:"8",max:"16",className:"w-full bg-gray-800 text-white px-3 py-2 rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Auction Budget"}),i.jsx("input",{type:"number",value:r.leagueSettings.auctionBudget,onChange:g=>f(["leagueSettings","auctionBudget"],parseInt(g.target.value)),min:"100",max:"500",className:"w-full bg-gray-800 text-white px-3 py-2 rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Roster Size"}),i.jsx("input",{type:"number",value:r.leagueSettings.rosterSize,onChange:g=>f(["leagueSettings","rosterSize"],parseInt(g.target.value)),min:"12",max:"20",className:"w-full bg-gray-800 text-white px-3 py-2 rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Bench Spots"}),i.jsx("input",{type:"number",value:r.leagueSettings.benchSpots,onChange:g=>f(["leagueSettings","benchSpots"],parseInt(g.target.value)),min:"5",max:"10",className:"w-full bg-gray-800 text-white px-3 py-2 rounded-lg"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Starting Lineup"}),i.jsx("div",{className:"grid grid-cols-3 gap-4",children:Object.entries(r.leagueSettings.starters).map(([g,x])=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:g}),i.jsx("input",{type:"number",value:x,onChange:N=>f(["leagueSettings","starters",g],parseInt(N.target.value)),min:"0",max:"4",className:"w-full bg-gray-800 text-white px-3 py-2 rounded-lg"})]},g))})]})]});case"scoring":return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-yellow-900/20 border border-yellow-600/30 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Ta,{className:"w-5 h-5 text-yellow-400 mt-0.5"}),i.jsx("p",{className:"text-sm text-yellow-200",children:"Scoring system changes affect player valuations. Apply changes to recalculate all values."})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Passing"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Yards (per yard)"}),i.jsx("input",{type:"number",value:r.scoringSystem.passing.yards,onChange:g=>f(["scoringSystem","passing","yards"],parseFloat(g.target.value)),step:"0.01",className:"w-full bg-gray-800 text-white px-3 py-2 rounded-lg"}),i.jsx("span",{className:"text-xs text-gray-500",children:"1pt/25yds = 0.04"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Touchdowns"}),i.jsx("input",{type:"number",value:r.scoringSystem.passing.touchdowns,onChange:g=>f(["scoringSystem","passing","touchdowns"],parseInt(g.target.value)),className:"w-full bg-gray-800 text-white px-3 py-2 rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Interceptions"}),i.jsx("input",{type:"number",value:r.scoringSystem.passing.interceptions,onChange:g=>f(["scoringSystem","passing","interceptions"],parseInt(g.target.value)),className:"w-full bg-gray-800 text-white px-3 py-2 rounded-lg"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Rushing"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Yards (per yard)"}),i.jsx("input",{type:"number",value:r.scoringSystem.rushing.yards,onChange:g=>f(["scoringSystem","rushing","yards"],parseFloat(g.target.value)),step:"0.01",className:"w-full bg-gray-800 text-white px-3 py-2 rounded-lg"}),i.jsx("span",{className:"text-xs text-gray-500",children:"1pt/10yds = 0.1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Touchdowns"}),i.jsx("input",{type:"number",value:r.scoringSystem.rushing.touchdowns,onChange:g=>f(["scoringSystem","rushing","touchdowns"],parseInt(g.target.value)),className:"w-full bg-gray-800 text-white px-3 py-2 rounded-lg"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Receiving"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Receptions (PPR)"}),i.jsx("input",{type:"number",value:r.scoringSystem.receiving.receptions,onChange:g=>f(["scoringSystem","receiving","receptions"],parseFloat(g.target.value)),step:"0.5",className:"w-full bg-gray-800 text-white px-3 py-2 rounded-lg"}),i.jsx("span",{className:"text-xs text-gray-500",children:"1=PPR, 0.5=Half, 0=Standard"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Yards (per yard)"}),i.jsx("input",{type:"number",value:r.scoringSystem.receiving.yards,onChange:g=>f(["scoringSystem","receiving","yards"],parseFloat(g.target.value)),step:"0.01",className:"w-full bg-gray-800 text-white px-3 py-2 rounded-lg"}),i.jsx("span",{className:"text-xs text-gray-500",children:"1pt/10yds = 0.1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Touchdowns"}),i.jsx("input",{type:"number",value:r.scoringSystem.receiving.touchdowns,onChange:g=>f(["scoringSystem","receiving","touchdowns"],parseInt(g.target.value)),className:"w-full bg-gray-800 text-white px-3 py-2 rounded-lg"})]})]})]})]});case"replacement":return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-blue-900/20 border border-blue-600/30 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Ta,{className:"w-5 h-5 text-blue-400 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-blue-200 mb-2",children:"VORP (Value Over Replacement Player) is the foundation of player valuation."}),i.jsx("p",{className:"text-xs text-gray-400",children:"Lower replacement ranks = fewer valuable players = higher scarcity value"})]})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Replacement Level by Position"}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(r.replacementLevels).map(([g,x])=>i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("label",{className:"text-sm font-medium text-white",children:g}),i.jsxs("span",{className:"text-xs text-gray-400",children:["Rank #",x]})]}),i.jsx("input",{type:"range",value:x,onChange:N=>f(["replacementLevels",g],parseInt(N.target.value)),min:g==="QB"?12:g==="RB"?36:g==="WR"?48:12,max:g==="QB"?24:g==="RB"?60:g==="WR"?72:24,className:"w-full"}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[i.jsx("span",{children:"More Scarce"}),i.jsx("span",{children:"Less Scarce"})]})]},g))})]})]});case"market":return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-green-900/20 border border-green-600/30 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Ta,{className:"w-5 h-5 text-green-400 mt-0.5"}),i.jsx("p",{className:"text-sm text-green-200",children:"Market adjustments reflect how actual auctions differ from pure VORP calculations. RBs typically go for more, while QBs and DSTs go for less than their VORP suggests."})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Position Market Adjustments"}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(r.marketAdjustments).map(([g,x])=>{const N=((x-1)*100).toFixed(0),k=x>1,T=Math.abs(x-1)<.01;return i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("label",{className:"text-sm font-medium text-white",children:g}),i.jsxs("span",{className:`text-sm font-mono ${T?"text-gray-400":k?"text-green-400":"text-red-400"}`,children:[k&&"+",N,"%"]})]}),i.jsx("input",{type:"range",value:x,onChange:j=>f(["marketAdjustments",g],parseFloat(j.target.value)),min:"0.3",max:"1.3",step:"0.05",className:"w-full"}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[i.jsx("span",{children:"-70%"}),i.jsx("span",{children:"Fair Value"}),i.jsx("span",{children:"+30%"})]})]},g)})})]})]});case"tiers":return i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Tier Value Multipliers"}),r.tierMultipliers.map((g,x)=>i.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:i.jsxs("div",{className:"grid grid-cols-4 gap-4 items-center",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-400",children:"Tier Name"}),i.jsx("p",{className:"text-white font-medium capitalize",children:g.name})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-400",children:"Ranks"}),i.jsxs("p",{className:"text-white",children:[g.rankStart,"-",g.rankEnd]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-400",children:"Multiplier"}),i.jsx("input",{type:"number",value:g.multiplier,onChange:N=>{const k=[...r.tierMultipliers];k[x].multiplier=parseFloat(N.target.value),f(["tierMultipliers"],k)},step:"0.05",min:"0.5",max:"1.5",className:"w-full bg-gray-700 text-white px-2 py-1 rounded"})]}),i.jsx("div",{className:"text-right",children:i.jsxs("span",{className:`text-sm font-mono ${g.multiplier>1?"text-green-400":g.multiplier<1?"text-red-400":"text-gray-400"}`,children:[g.multiplier>1?"+":"",((g.multiplier-1)*100).toFixed(0),"%"]})})]})},g.name))]})});case"projections":return i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Projection Source Weights"}),r.projectionWeights.filter(g=>g.enabled).map((g,x)=>i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("label",{className:"text-sm font-medium text-white capitalize",children:g.source.replace("_"," ")}),i.jsxs("span",{className:"text-sm font-mono text-blue-400",children:[(g.weight*100).toFixed(0),"%"]})]}),i.jsx("input",{type:"range",value:g.weight,onChange:N=>{const k=[...r.projectionWeights],T=r.projectionWeights.findIndex(_=>_.source===g.source);k[T].weight=parseFloat(N.target.value);const j=k.filter(_=>_.enabled).reduce((_,C)=>_+C.weight,0);j>0&&k.forEach(_=>{_.enabled&&(_.weight=_.weight/j)}),f(["projectionWeights"],k)},min:"0",max:"1",step:"0.05",className:"w-full"})]},g.source)),i.jsx("div",{className:"bg-blue-900/20 border border-blue-600/30 rounded-lg p-3",children:i.jsx("p",{className:"text-xs text-blue-200",children:"Weights are automatically normalized to sum to 100%"})})]})});case"bidding":return i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Bid Range Settings"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Maximum Bid"}),i.jsx("input",{type:"number",value:(r.bidRanges.maxBidMultiplier*100).toFixed(0),onChange:g=>f(["bidRanges","maxBidMultiplier"],parseFloat(g.target.value)/100),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg"}),i.jsx("span",{className:"text-xs text-gray-500",children:"% of calculated value"})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Minimum Bid"}),i.jsx("input",{type:"number",value:(r.bidRanges.minBidMultiplier*100).toFixed(0),onChange:g=>f(["bidRanges","minBidMultiplier"],parseFloat(g.target.value)/100),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg"}),i.jsx("span",{className:"text-xs text-gray-500",children:"% of calculated value"})]})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Strategy Presets"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("button",{onClick:()=>{f(["bidRanges","maxBidMultiplier"],1.25),f(["bidRanges","minBidMultiplier"],.9)},className:"px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm",children:"Aggressive"}),i.jsx("button",{onClick:()=>{f(["bidRanges","maxBidMultiplier"],1.15),f(["bidRanges","minBidMultiplier"],.85)},className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm",children:"Balanced"}),i.jsx("button",{onClick:()=>{f(["bidRanges","maxBidMultiplier"],1.1),f(["bidRanges","minBidMultiplier"],.8)},className:"px-3 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg text-sm",children:"Conservative"}),i.jsx("button",{onClick:()=>{f(["bidRanges","maxBidMultiplier"],1.05),f(["bidRanges","minBidMultiplier"],.75)},className:"px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm",children:"Value Hunter"})]})]})]})});default:return null}};return i.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-gray-900 rounded-lg w-full max-w-5xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(_c,{className:"w-6 h-6 text-blue-400"}),i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Valuation Settings"}),l&&i.jsx("span",{className:"text-sm text-yellow-400 bg-yellow-900/30 px-2 py-1 rounded",children:"Unsaved Changes"})]}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(un,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"flex overflow-x-auto border-b border-gray-700 px-6",children:S.map(g=>{const x=g.icon;return i.jsxs("button",{onClick:()=>a(g.id),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-all whitespace-nowrap ${s===g.id?"border-blue-400 text-blue-400":"border-transparent text-gray-400 hover:text-white"}`,children:[i.jsx(x,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm font-medium",children:g.label})]},g.id)})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:y()}),i.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-700",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:[i.jsx(Bg,{className:"w-4 h-4"}),"Export"]}),i.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors cursor-pointer",children:[i.jsx(Qg,{className:"w-4 h-4"}),"Import",i.jsx("input",{type:"file",accept:".json",onChange:w,className:"hidden"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:p,disabled:!l,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${l?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-800 text-gray-500 cursor-not-allowed"}`,children:[i.jsx(zg,{className:"w-4 h-4"}),"Reset"]}),i.jsx("button",{onClick:h,disabled:!l||u,className:`flex items-center gap-2 px-6 py-2 rounded-lg transition-colors ${l&&!u?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-800 text-gray-500 cursor-not-allowed"}`,children:u?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-white"}),"Applying..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ff,{className:"w-4 h-4"}),"Apply Changes"]})})]})]})]})})},xp=()=>{const{teams:t,myTeamId:e,updateTeamName:n}=pt(),[s,a]=D.useState(null),[r,o]=D.useState(""),l=t.filter(f=>f.id!==e),c=f=>({QB:"text-red-400",RB:"text-green-400",WR:"text-blue-400",TE:"text-orange-400",DST:"text-purple-400",K:"text-yellow-400"})[f]||"text-gray-400",u=(f,h)=>{a(f),o(h)},d=()=>{s&&r.trim()&&n(s,r.trim()),a(null),o("")},m=()=>{a(null),o("")};return i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:[i.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx(rr,{className:"w-5 h-5 text-blue-400"}),"Other Teams"]}),i.jsx("div",{className:"space-y-3 max-h-[calc(100vh-150px)] overflow-y-auto",children:l.map(f=>i.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("div",{className:"flex items-center gap-2",children:s===f.id?i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"text",value:r,onChange:h=>o(h.target.value),onKeyDown:h=>{h.key==="Enter"&&d(),h.key==="Escape"&&m()},className:"px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm",autoFocus:!0}),i.jsx("button",{onClick:d,className:"text-green-400 hover:text-green-300",children:i.jsx(Ff,{className:"w-4 h-4"})}),i.jsx("button",{onClick:m,className:"text-red-400 hover:text-red-300",children:i.jsx(un,{className:"w-4 h-4"})})]}):i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold text-white",children:f.name}),i.jsx("button",{onClick:()=>u(f.id,f.name),className:"text-gray-400 hover:text-white",children:i.jsx(Og,{className:"w-3 h-3"})})]})}),i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Spent: "}),i.jsxs("span",{className:"text-green-400 font-semibold",children:["$",f.spent]}),i.jsxs("span",{className:"text-gray-400",children:[" / $",f.budget]})]})]}),f.roster.length===0?i.jsx("p",{className:"text-gray-500 text-sm italic",children:"No players drafted"}):i.jsx("div",{className:"space-y-1",children:f.roster.map((h,p)=>i.jsxs("div",{className:"flex justify-between items-center text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`font-medium ${c(h.player.position)}`,children:h.player.position}),i.jsx("span",{className:"text-gray-300 truncate max-w-[150px]",children:h.player.name})]}),i.jsxs("span",{className:"text-gray-400",children:["$",h.price||0]})]},p))}),i.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700 flex justify-between text-xs",children:[i.jsxs("span",{className:"text-gray-400",children:["Players: ",f.roster.length,"/16"]}),i.jsxs("span",{className:"text-gray-400",children:["Remaining: $",f.budget-f.spent]})]})]},f.id))})]})})},vp=({valuations:t})=>{const{draftHistory:e,teams:n,myTeamId:s}=pt(),[a,r]=D.useState("balanced"),o=D.useMemo(()=>{const S=e.length,g=(n.length||12)*16,x=g>0?S/g*100:0;return x<25?"early":x<75?"mid":"late"},[e,n]),l=D.useMemo(()=>new Set(e.map(S=>{var y;return(y=S.player)==null?void 0:y.id})),[e]),c=D.useMemo(()=>t.filter(S=>!l.has(S.playerId)),[t,l]),u=D.useMemo(()=>{const S=new Map;return n.forEach(y=>{const g=e.filter(x=>x.team===y.id).reduce((x,N)=>x+(N.price||0),0);S.set(y.id,200-g)}),S},[n,e]),d=D.useMemo(()=>{let S=0,y=0;return u.forEach((g,x)=>{x!==s&&(S+=g,y++)}),y>0?Math.round(S/y):0},[u,s]),m=D.useMemo(()=>{const S=e.filter(g=>g.team===s).map(g=>g.player),y={QB:0,RB:0,WR:0,TE:0,DST:0,K:0};return S.forEach(g=>{g&&y[g.position]!==void 0&&y[g.position]++}),y},[e,s]),f=D.useMemo(()=>{const S={};return["QB","RB","WR","TE"].forEach(g=>{const x=c.filter(k=>k.position===g),N=x.filter(k=>k.tier==="elite"||k.tier==="tier1");S[g]={remaining:x.length,tier1Remaining:N.length}}),S},[c]),h=D.useMemo(()=>{const S=[];return c.length===0?S:(a==="aggressive"?c.filter(g=>g.auctionValue>=25).sort((g,x)=>x.auctionValue-g.auctionValue).slice(0,3).forEach(g=>{S.push({player:g,reason:`High-value ${g.position} to force spending`,priority:"high",type:"trap"})}):a==="value"&&c.filter(g=>g.edge>=5).sort((g,x)=>x.edge-g.edge).slice(0,3).forEach(g=>{S.push({player:g,reason:`Undervalued by $${Math.round(g.edge)}`,priority:"high",type:"value"})}),o==="early"||a==="balanced"?(c.filter(x=>x.auctionValue>=30).sort((x,N)=>N.auctionValue-x.auctionValue).slice(0,3).forEach(x=>{(m[x.position]>=(x.position==="QB"||x.position==="TE"?1:2)||x.edge<-5)&&S.push({player:x,reason:`Expensive ${x.position} to drain budgets`,priority:"high",type:"trap"})}),c.filter(x=>x.edge<-10&&x.auctionValue>=15).sort((x,N)=>x.edge-N.edge).slice(0,2).forEach(x=>{S.push({player:x,reason:`Overvalued by market ($${Math.abs(x.edge)} above fair value)`,priority:"high",type:"trap"})})):o==="mid"?(["RB","WR"].forEach(g=>{if(f[g].tier1Remaining<=3&&f[g].tier1Remaining>0){const x=c.filter(N=>N.position===g&&(N.tier==="elite"||N.tier==="tier1")).sort((N,k)=>k.auctionValue-N.auctionValue)[0];x&&m[g]>=2&&S.push({player:x,reason:`Last elite ${g} - will trigger bidding war`,priority:"high",type:"scarcity"})}}),Object.entries(m).filter(([g,x])=>g==="QB"||g==="TE"?x>=1:g==="RB"||g==="WR"?x>=3:!1).map(([g])=>g).forEach(g=>{c.filter(N=>N.position===g&&N.auctionValue>=10&&N.auctionValue<=25).sort((N,k)=>k.auctionValue-N.auctionValue).slice(0,2).forEach(N=>{S.push({player:N,reason:`Mid-tier ${g} (position already filled)`,priority:"medium",type:"trap"})})})):(c.filter(x=>x.edge>=5&&x.auctionValue<=10).sort((x,N)=>N.edge-x.edge).slice(0,5).forEach(x=>{S.push({player:x,reason:`High value target (+$${x.edge} edge)`,priority:"high",type:"value"})}),e.filter(x=>{var N;return x.team===s&&((N=x.player)==null?void 0:N.position)==="RB"}).map(x=>x.player),c.filter(x=>x.position==="RB"&&x.auctionValue<=5).slice(0,2).forEach(x=>{S.push({player:x,reason:"Potential handcuff/lottery ticket",priority:"low",type:"handcuff"})})),S.slice(0,5))},[c,o,m,f,e,s,a]),p=()=>{switch(o){case"early":return"Nominate expensive players you DON'T want to drain opponent budgets";case"mid":return"Target position scarcity and create bidding wars";case"late":return"Nominate your value targets and sleepers";default:return""}},v=S=>{switch(S){case"high":return"text-red-400";case"medium":return"text-yellow-400";case"low":return"text-gray-400";default:return"text-gray-400"}},w=S=>{switch(S){case"trap":return i.jsx(Ln,{className:"w-3 h-3 text-red-400"});case"value":return i.jsx(Vn,{className:"w-3 h-3 text-green-400"});case"scarcity":return i.jsx(Lf,{className:"w-3 h-3 text-yellow-400"});case"handcuff":return i.jsx(cn,{className:"w-3 h-3 text-blue-400"});default:return null}};return i.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:[i.jsx(Ig,{className:"w-5 h-5 text-purple-400"}),"Nomination Strategy"]}),i.jsx("span",{className:`text-xs px-2 py-1 rounded ${o==="early"?"bg-blue-900 text-blue-300":o==="mid"?"bg-yellow-900 text-yellow-300":"bg-green-900 text-green-300"}`,children:o.toUpperCase()})]}),i.jsx("div",{className:"flex gap-1 mb-3",children:["aggressive","balanced","value"].map(S=>i.jsx("button",{onClick:()=>r(S),className:`flex-1 px-2 py-1 text-xs rounded ${a===S?"bg-purple-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:S.charAt(0).toUpperCase()+S.slice(1)},S))}),i.jsxs("div",{className:"bg-gray-800 rounded p-2 mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(Eg,{className:"w-4 h-4 text-purple-400"}),i.jsx("span",{className:"text-xs font-semibold text-purple-400",children:"Current Strategy"})]}),i.jsx("p",{className:"text-xs text-gray-300",children:p()})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[i.jsxs("div",{className:"bg-gray-800 rounded p-2",children:[i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx(ys,{className:"w-3 h-3 text-green-400"}),i.jsx("span",{className:"text-xs text-gray-400",children:"My Budget"})]}),i.jsxs("span",{className:"text-sm font-bold text-green-400",children:["$",u.get(s)||0]})]}),i.jsxs("div",{className:"bg-gray-800 rounded p-2",children:[i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx(rr,{className:"w-3 h-3 text-yellow-400"}),i.jsx("span",{className:"text-xs text-gray-400",children:"Avg Opp"})]}),i.jsxs("span",{className:"text-sm font-bold text-yellow-400",children:["$",d]})]})]}),Object.entries(f).some(([S,y])=>y.tier1Remaining<=2&&y.tier1Remaining>0)&&i.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded p-2 mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(Ln,{className:"w-4 h-4 text-red-400"}),i.jsx("span",{className:"text-xs font-semibold text-red-400",children:"Position Scarcity Alert"})]}),i.jsx("div",{className:"text-xs text-red-300",children:Object.entries(f).filter(([S,y])=>y.tier1Remaining<=2&&y.tier1Remaining>0).map(([S,y])=>`${S}: ${y.tier1Remaining} elite left`).join(", ")})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-xs font-semibold text-gray-300 mb-1",children:"Suggested Nominations:"}),h.length===0?i.jsx("p",{className:"text-xs text-gray-500 italic",children:"No suggestions available"}):h.map((S,y)=>i.jsxs("div",{className:"bg-gray-800 rounded p-2",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[w(S.type),i.jsx("span",{className:"text-sm font-medium text-white",children:S.player.playerName}),i.jsxs("span",{className:"text-xs text-gray-400",children:[S.player.position," - $",S.player.auctionValue]})]}),i.jsx("span",{className:`text-xs ${v(S.priority)}`,children:S.priority==="high"?"!":S.priority==="medium"?"!!":"!!!"})]}),i.jsx("p",{className:"text-xs text-gray-400",children:S.reason})]},y))]})]})};function $v(){const[t,e]=D.useState(!0),[n,s]=D.useState(null),[a,r]=D.useState([]),[o,l]=D.useState([]),[c,u]=D.useState(null),[d,m]=D.useState(!1),[f,h]=D.useState(!1),[p,v]=D.useState(!1),[w,S]=D.useState({checked:!1,passed:!1,message:"Checking..."}),{isDraftActive:y,initializeDraft:g,updatePlayerValuations:x,draftHistory:N,myTeamId:k,teams:T}=pt();D.useEffect(()=>{j()},[]),D.useEffect(()=>{if(console.log("[Valuation Update Trigger]",{baseValuationsCount:o.length,isDynamicMode:p,draftHistoryLength:N.length,loading:t,teamsLength:T.length}),!o.length||t){console.log("[Valuation Update] Skipping - no base valuations or loading");return}if(kn.setDynamicMode(p),p){console.log("[Dynamic Mode Active] Building context...",{teamsLength:T.length,draftHistoryLength:N.length});const C=new Set(N.map(b=>{var $;return($=b.player)==null?void 0:$.id}).filter(Boolean)),E=T.length||12,M=E*200,W=N.reduce((b,$)=>b+($.price||0),0),B=M-W,H={},J={QB:E*1,RB:E*3,WR:E*3,TE:E*1,DST:E*1,K:E*1};N.forEach(b=>{var $;($=b.player)!=null&&$.position&&(H[b.player.position]=(H[b.player.position]||0)+1,J[b.player.position]=Math.max(0,(J[b.player.position]||0)-1))});const U=new Map;if(T.length>0)T.forEach(b=>{const $=N.filter(L=>L.team===b.id).reduce((L,q)=>L+(q.price||0),0);U.set(b.id,200-$)});else for(let b=0;b<E;b++)U.set(`team_${b}`,200);const I=N.slice(-5).map(b=>{var L,q;const $=o.find(Y=>{var K;return Y.playerId===((K=b.player)==null?void 0:K.id)});return{playerId:((L=b.player)==null?void 0:L.id)||"",actualPrice:b.price||0,expectedPrice:($==null?void 0:$.auctionValue)||b.price||0,position:((q=b.player)==null?void 0:q.position)||""}}),A={totalBudget:M,moneySpent:W,moneyRemaining:B,playersPickedCount:N.length,playersRemainingCount:E*16-N.length,positionsFilled:H,positionsNeeded:J,recentPicks:I,teamBudgets:U};console.log("[Before getDynamicValuations]",{contextMoneyRemaining:A.moneyRemaining,contextPlayersRemaining:A.playersRemainingCount,draftedIdsSize:C.size,isDynamicMode:kn.isDynamic()});const O=kn.getDynamicValuations(A,C);if(O.length>0&&o.length>0){const b=O.find(L=>L.playerName==="Bijan Robinson")||O[0],$=o.find(L=>L.playerId===b.playerId);console.log("[Dynamic Values Update]",{player:b.playerName,baseValue:($==null?void 0:$.value)||($==null?void 0:$.auctionValue),dynamicValue:b.value||b.auctionValue,samplePlayerObject:b,inflation:A.moneyRemaining>0?(A.moneyRemaining/(O.length*10)).toFixed(2):0,draftedCount:C.size})}else console.log("[Dynamic Values Update] No values to compare",{dynamicValsLength:O.length,baseValuationsLength:o.length});if(N.length>0&&O.length>0){const b=O[0],$=o[0];console.log("[Value Comparison]",{playerName:b.playerName,baseValue:$.value,dynamicValue:b.value,isDifferent:$.value!==b.value})}const V=O[0],R=o[0];console.log("[Dynamic Values Set]",{playerName:V==null?void 0:V.playerName,dynamicValue:V==null?void 0:V.value,baseValue:R==null?void 0:R.value,changed:(V==null?void 0:V.value)!==(R==null?void 0:R.value)}),r(O),x(O)}else{console.log("[Static Mode] Using base valuations");const C=o[0];console.log("[Static Values Set]",{playerName:C==null?void 0:C.playerName,value:C==null?void 0:C.value}),r(o),x(o)}},[p,N,o,T,t,x]),D.useEffect(()=>{if(!y&&!t)try{g({teams:12,budget:200,scoring:"PPR",rosterPositions:[{position:"QB",required:1},{position:"RB",required:2},{position:"WR",required:2},{position:"TE",required:1},{position:"FLEX",required:1},{position:"DST",required:1},{position:"K",required:1},{position:"BE",required:7}]})}catch(C){console.error("Failed to initialize draft:",C)}},[y,t]);const j=async()=>{try{e(!0),console.log("[AppCalibrated] Loading data...");const C=await Ec.getData(),E=new Set(C.projections.map(A=>A.team).filter(Boolean));console.log("[AppCalibrated] Data loaded:",{projections:C.projections.length,adp:C.adpData.length,uniqueTeamsInProjections:E.size,teamsInProjections:Array.from(E).sort()});const M=C.adpData.find(A=>A.name==="Breece Hall");M&&(console.log("[DEBUG] Breece Hall ADP data from dataService:",M),console.log("[DEBUG] Breece Hall auctionValue specifically:",M.auctionValue));const W=C.projections.filter(A=>A.team==="NYJ").slice(0,2),B=C.projections.filter(A=>A.team==="SF").slice(0,2);console.log("[SOS DEBUG] NYJ players with SOS:",W.map(A=>({name:A.name,team:A.team,teamSeasonSOS:A.teamSeasonSOS}))),console.log("[SOS DEBUG] SF players with SOS:",B.map(A=>({name:A.name,team:A.team,teamSeasonSOS:A.teamSeasonSOS})));const{valuations:H,summary:J}=yi.processPlayers(C.projections,C.adpData),U=new Set(H.map(A=>A.team).filter(Boolean));console.log("[AppCalibrated] Valuations calculated:",{count:H.length,budgetPercentage:J.budgetPercentage.toFixed(1)+"%",uniqueTeamsCount:U.size,teams:Array.from(U).sort()}),r(H),l(H),u(J),x(H),kn.setBaseValuations(H);const I=Dc.verifyDataIntegrity(C.projections,H);S({checked:!0,passed:I.passed,message:I.passed?"✓":"⚠"}),console.log("[Data Integrity Check]",{passed:I.passed,sourceTeams:I.sourceTeams.size,renderedTeams:I.renderedTeams.size,performanceMs:I.performanceMs.toFixed(2)}),ge.success("Calibrated valuations loaded successfully!")}catch(C){console.error("[AppCalibrated] Error loading data:",C),s(C instanceof Error?C.message:"Failed to load data"),ge.error("Failed to load data")}finally{e(!1)}},_=async()=>{await j()};return t?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-400 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Loading"})]})}):n?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-red-900 to-gray-900 flex items-center justify-center",children:i.jsxs("div",{className:"bg-red-900/50 border border-red-500 rounded-lg p-6 max-w-md",children:[i.jsx(Ln,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Error Loading Data"}),i.jsx("p",{className:"text-red-200 mb-4",children:n}),i.jsxs("button",{onClick:j,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 mx-auto",children:[i.jsx(Uf,{className:"w-4 h-4"}),"Retry"]})]})}):i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900",children:[i.jsx(tp,{position:"top-right"}),i.jsx("header",{className:"bg-black/50 backdrop-blur-lg border-b border-blue-500/30 z-50 flex-shrink-0",children:i.jsx("div",{className:"px-6 lg:px-8 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"FFTool"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("button",{onClick:()=>{console.log("[Toggle Dynamic Mode]",{currentMode:p?"Dynamic":"Static",switchingTo:p?"Static":"Dynamic",draftHistoryLength:N.length}),v(!p)},className:`px-3 py-1 rounded-lg text-sm flex items-center gap-2 transition-colors ${p?"bg-purple-600 hover:bg-purple-700 text-white":"bg-gray-700 hover:bg-gray-600 text-white"}`,title:p?"Dynamic valuations active":"Using static valuations",children:[i.jsx(ps,{className:"w-4 h-4"}),p?"Dynamic":"Static",p&&N.length>0&&i.jsxs("span",{className:"text-xs bg-purple-800 px-1 rounded",children:[N.length," picks"]})]}),i.jsxs("button",{onClick:()=>h(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-lg text-sm flex items-center gap-2",title:"Adjust valuation settings",children:[i.jsx(_c,{className:"w-4 h-4"}),"Settings"]}),i.jsxs("button",{onClick:()=>m(!0),className:"bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded-lg text-sm flex items-center gap-2",title:"Learn how values are calculated",children:[i.jsx(Ya,{className:"w-4 h-4"}),"Methodology"]}),w.checked&&i.jsx("div",{className:`px-3 py-1 rounded-lg border ${w.passed?"bg-green-900/50 border-green-500":"bg-red-900/50 border-red-500"}`,title:w.passed?"Data integrity verified - All teams present":"Data integrity check failed - Some teams missing",children:i.jsx("span",{className:`text-sm font-medium ${w.passed?"text-green-400":"text-red-400"}`,children:w.message})})]})]})})}),i.jsx("main",{className:"px-6 lg:px-8 py-6",children:c&&i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx(Dv,{summary:c,valuations:a,isDraftActive:y,onStartDraft:()=>g({teams:12,budget:200,scoring:"PPR",rosterPositions:[]})}),i.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[i.jsxs("div",{className:"col-span-12 lg:col-span-2 space-y-4",children:[i.jsx(mp,{teamId:k}),i.jsx(vp,{valuations:a}),i.jsx(hp,{remainingBudget:200-N.reduce((C,E)=>E.team===k?C+(E.price||0):C,0),spotsLeft:16-N.filter(C=>C.team===k).length,myRoster:N.filter(C=>C.team===k).map(C=>C.player),valuations:a,draftHistory:N})]}),i.jsx("div",{className:"col-span-12 lg:col-span-8",children:i.jsx(Bv,{players:a,onPlayerSelect:C=>{console.log("Player selected:",C)}})}),i.jsxs("div",{className:"col-span-12 lg:col-span-2 space-y-4",children:[i.jsx(pp,{valuations:a,draftHistory:N,onPriceUpdate:(C,E)=>{yi.updateMarketPrice(C,E)}}),i.jsx(fp,{}),i.jsx(xp,{})]})]})]})}),i.jsx(gp,{isOpen:d,onClose:()=>m(!1)}),i.jsx(yp,{isOpen:f,onClose:()=>h(!1),onApply:_})]})}const Fv=({players:t,onPlayerSelect:e,onPlayerDraft:n,searchQuery:s,onSearchChange:a})=>{const{draftHistory:r}=pt(),[o,l]=D.useState(new Set),[c,u]=D.useState("adp"),[d,m]=D.useState("asc"),[f,h]=D.useState(600),[p,v]=D.useState(""),[w,S]=D.useState("ALL"),y=s!==void 0?s:p,g=a||v;vi.useEffect(()=>{if(t.length>0){const b=t.find($=>$.playerName==="Bijan Robinson")||t[0];console.log("[PlayerDataTable] Players updated:",{totalPlayers:t.length,samplePlayer:b.playerName,sampleValue:b.auctionValue,timestamp:new Date().toISOString()})}},[t]);const x={elite:5,tier1:4,tier2:3,tier3:2,replacement:1,repl:1},N=D.useMemo(()=>[...t].sort(($,L)=>{var K,X;let q=$[c],Y=L[c];if(c==="tier"){const de=$.tier||"replacement",Z=L.tier||"replacement";q=x[de]||1,Y=x[Z]||1}else c==="playerRank"?(q=$.rank||999,Y=L.rank||999):c==="maxBid"?(q=$.value||0,Y=L.value||0):c==="edgePercent"?(q=$.edge&&$.marketValue?$.edge/$.marketValue*100:0,Y=L.edge&&L.marketValue?L.edge/L.marketValue*100:0):c==="vorp"?(q=$.vbd||0,Y=L.vbd||0):c==="projectedPoints"?(q=$.points||0,Y=L.points||0):c==="sos"?(q=$.teamSeasonSOS||0,Y=L.teamSeasonSOS||0):c==="ppr"&&(q=((K=$.pprMetrics)==null?void 0:K.score)||0,Y=((X=L.pprMetrics)==null?void 0:X.score)||0);return q==null&&(q=0),Y==null&&(Y=0),q<Y?d==="asc"?-1:1:q>Y?d==="asc"?1:-1:0}),[t,c,d]),k=D.useMemo(()=>{let b=N;const $=new Set(r.map(L=>{var q;return(q=L.player)==null?void 0:q.id}));if(b=b.filter(L=>!$.has(L.playerId)),w!=="ALL"&&(b=b.filter(L=>L.position===w)),y.trim()){const L=y.toLowerCase().trim();b=b.filter(q=>{var Y,K,X;return((Y=q.name)==null?void 0:Y.toLowerCase().includes(L))||((K=q.team)==null?void 0:K.toLowerCase().includes(L))||((X=q.position)==null?void 0:X.toLowerCase().includes(L))})}return b},[N,y,w,r]),T=D.useMemo(()=>k.slice(0,f),[k,f]),j=b=>{c===b?m(d==="asc"?"desc":"asc"):(u(b),m("asc"))},_=b=>{const $=new Set(o);$.has(b)?$.delete(b):$.add(b),l($)},C=b=>{switch(b){case"elite":return"S+";case"tier1":return"S";case"tier2":return"A";case"tier3":return"B";case"replacement":return"C";case"repl":return"C";default:return"C"}},E=b=>{switch(b){case"elite":return"text-green-500 font-bold";case"tier1":return"text-green-400";case"tier2":return"text-yellow-400";case"tier3":return"text-orange-400";default:return"text-red-400"}},M=b=>b?b<=10?"text-green-500 font-bold":b<=30?"text-green-400":b<=60?"text-yellow-400":b<=100?"text-orange-400":"text-red-400":"text-gray-500",W=b=>b>=50?"text-red-400 font-bold":b>=30?"text-orange-400 font-semibold":b>=15?"text-yellow-400":b>=5?"text-green-400":"text-green-500 font-bold",B=b=>b>=20?"text-green-400 font-bold":b>=10?"text-green-300 font-semibold":b>=5?"text-yellow-400":b>=0?"text-gray-300":b>=-5?"text-orange-400":"text-red-400",H=b=>b>=50?"text-green-400 font-bold":b>=25?"text-green-300 font-semibold":b>=10?"text-yellow-400":b>=0?"text-gray-300":b>=-10?"text-orange-400":"text-red-400",J=b=>b>=100?"text-green-500 font-bold":b>=50?"text-green-400":b>=20?"text-yellow-400":b>=0?"text-orange-400":"text-red-400",U=b=>b?b<=12?"text-green-500 font-bold":b<=36?"text-green-400":b<=72?"text-yellow-400":b<=120?"text-orange-400":"text-red-400":"text-gray-500",I=b=>b?b>=300?"text-green-500 font-bold":b>=250?"text-green-400":b>=200?"text-yellow-400":b>=150?"text-orange-400":"text-red-400":"text-gray-400",A=b=>b?b>=9&&b<=11?"text-green-500 font-semibold":b===7||b===8||b===12?"text-green-400":b===6||b===13?"text-yellow-400":b===5||b===14?"text-orange-400":"text-red-400":"text-gray-500",O=b=>!b&&b!==0?"text-gray-500":b>=8?"text-red-500 font-semibold":b>=6?"text-red-400":b>=4?"text-orange-400":b>=2?"text-yellow-400":b>=1?"text-green-400":"text-green-500 font-semibold",V=b=>({QB:"text-red-400",RB:"text-green-400",WR:"text-blue-400",TE:"text-orange-400",DST:"text-purple-400",K:"text-yellow-400"})[b]||"text-gray-400",R=({field:b})=>c!==b?i.jsx("div",{className:"w-4 h-4 opacity-30",children:"⇅"}):d==="asc"?i.jsx(Vf,{className:"w-4 h-4 text-blue-400"}):i.jsx(If,{className:"w-4 h-4 text-blue-400"});return i.jsxs("div",{className:"w-full bg-gray-900 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"overflow-x-auto overflow-y-hidden relative",style:{scrollbarWidth:"thin"},children:i.jsxs("table",{className:"w-full min-w-[1200px] relative",children:[i.jsx("thead",{className:"sticky top-0 z-30",style:{backgroundColor:"#1f2937",boxShadow:"0 2px 8px rgba(0,0,0,0.5)"},children:i.jsxs("tr",{className:"border-b border-gray-700",children:[i.jsx("th",{className:"px-1 py-2 text-center",colSpan:2,style:{maxWidth:"80px",width:"80px"},children:i.jsxs("select",{value:w,onChange:b=>S(b.target.value),className:"w-full px-1 py-1 text-xs bg-gray-700 border border-gray-600 rounded text-gray-200 focus:outline-none focus:border-blue-400",children:[i.jsx("option",{value:"ALL",children:"All"}),i.jsx("option",{value:"QB",children:"QB"}),i.jsx("option",{value:"RB",children:"RB"}),i.jsx("option",{value:"WR",children:"WR"}),i.jsx("option",{value:"TE",children:"TE"}),i.jsx("option",{value:"DST",children:"DST"}),i.jsx("option",{value:"K",children:"K"})]})}),i.jsx("th",{className:"px-2 py-1 text-left text-xs font-medium min-w-[100px]",style:{position:"sticky",left:0,backgroundColor:"#1f2937",zIndex:40},children:s===void 0?i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",value:y,onChange:b=>g(b.target.value),placeholder:"Search...",className:"w-full px-2 py-1 pr-6 text-xs bg-gray-700 border border-gray-600 rounded text-gray-200 placeholder-gray-400 focus:outline-none focus:border-blue-400"}),y&&i.jsx("button",{onClick:()=>g(""),className:"absolute right-1 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:i.jsx(un,{className:"w-3 h-3"})})]}):i.jsx("span",{className:"text-gray-400",children:"Name"})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>j("position"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Pos ",i.jsx(R,{field:"position"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>j("team"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Team ",i.jsx(R,{field:"team"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>j("tier"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Tier ",i.jsx(R,{field:"tier"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>j("playerRank"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Rank ",i.jsx(R,{field:"playerRank"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>j("maxBid"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Max Bid ",i.jsx(R,{field:"maxBid"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>j("intrinsicValue"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Intrinsic ",i.jsx(R,{field:"intrinsicValue"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>j("marketValue"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Market ",i.jsx(R,{field:"marketValue"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>j("edge"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Edge ",i.jsx(R,{field:"edge"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>j("edgePercent"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Edge% ",i.jsx(R,{field:"edgePercent"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>j("vorp"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["VORP ",i.jsx(R,{field:"vorp"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>j("adp"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["ADP ",i.jsx(R,{field:"adp"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>j("projectedPoints"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Proj Pts ",i.jsx(R,{field:"projectedPoints"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>j("byeWeek"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Bye ",i.jsx(R,{field:"byeWeek"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>j("sos"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["SOS ",i.jsx(R,{field:"sos"})]})}),i.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-400 cursor-pointer hover:text-white",onClick:()=>j("ppr"),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["PPR ",i.jsx(R,{field:"ppr"})]})})]})}),i.jsx("tbody",{className:"divide-y divide-gray-800",children:T.map((b,$)=>{var X,de,Z;const L=b.edge||0,q=b.marketValue||1,Y=q>0?L/q*100:0,K=b.id||`${b.name}_${b.team}_${b.position}_${$}`;return i.jsxs("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[i.jsx("td",{className:"px-1 py-1 text-center",style:{maxWidth:"30px",width:"30px"},children:i.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded bg-gray-700 border-gray-600",checked:o.has(K),onChange:()=>_(K)})}),i.jsx("td",{className:"px-1 py-1 text-center",style:{maxWidth:"30px",width:"30px"},children:i.jsx("button",{onClick:()=>{e&&e(b)},className:"p-0.5 hover:bg-gray-700 rounded transition-colors",title:"View Details",children:i.jsx(Of,{className:"w-3 h-3 text-gray-400 hover:text-white"})})}),i.jsx("td",{className:"px-2 py-1 min-w-[100px]",style:{position:"sticky",left:0,backgroundColor:"#111827",zIndex:20},children:i.jsx("div",{style:{color:"white",fontWeight:"500"},className:"hover:text-blue-400 cursor-pointer truncate text-left",children:(()=>{const oe=b.name||b.playerName||"Unknown";return $===0&&(console.log("First player name rendering:",oe),console.log("First player object keys:",Object.keys(b)),console.log("First player intrinsicValue:",b.intrinsicValue),console.log("First player auctionValue:",b.auctionValue),console.log("First player marketValue:",b.marketValue)),oe})()})}),i.jsx("td",{className:"px-1 py-1 text-center",children:i.jsx("span",{className:`font-semibold ${V(b.position)}`,children:b.position})}),i.jsx("td",{className:"px-1 py-1 text-gray-300 text-center",children:(()=>{const oe=b.team||"FA";return $===0&&console.log("First player team:",b.team,"from player:",b),oe})()}),i.jsx("td",{className:"px-1 py-1 text-center",children:i.jsx("span",{className:E(b.tier),children:C(b.tier)})}),i.jsx("td",{className:"px-1 py-1 text-center",children:i.jsx("span",{className:M(b.rank),children:b.rank||"-"})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsxs("span",{className:"text-white",children:["$",b.value||0,b.dynamicValue&&b.dynamicValue!==b.value&&i.jsx("span",{className:"text-xs text-purple-400 ml-1",title:"Dynamic adjustment applied",children:"*"})]})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsxs("span",{className:W(b.intrinsicValue||0),children:["$",(()=>{const oe=b.intrinsicValue||0;return(b.name==="Bijan Robinson"||b.playerName==="Bijan Robinson")&&console.log("[PlayerDataTable] Intrinsic value for Bijan:",oe,"Full player:",b),oe.toFixed(0)})()]})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsxs("span",{className:W(b.marketValue||0),children:["$",b.marketValue||0]})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsxs("span",{className:B(L),children:[L>0?"+":"","$",Math.abs(L).toFixed(0)]})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsxs("span",{className:H(Y),children:[Y>0?"+":"",Y.toFixed(0),"%"]})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsx("span",{className:J(b.vbd||0),children:((X=b.vbd)==null?void 0:X.toFixed(0))||"0"})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsx("span",{className:U(b.adp),children:((de=b.adp)==null?void 0:de.toFixed(1))||"-"})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsx("span",{className:I(b.points||0),children:(b.points||0).toFixed(0)})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsx("span",{className:A(b.byeWeek),children:b.byeWeek||"-"})}),i.jsx("td",{className:"px-2 py-1 text-center",children:i.jsx("span",{className:O(b.teamSeasonSOS),children:((Z=b.teamSeasonSOS)==null?void 0:Z.toFixed(2))||"-"})}),i.jsx("td",{className:"px-2 py-1 text-center",children:b.pprMetrics?i.jsxs("div",{className:"flex items-center justify-center gap-1",children:[i.jsx("span",{className:`font-semibold ${b.pprMetrics.color}`,title:`PPR Score: ${b.pprMetrics.score.toFixed(1)}/100`,children:b.pprMetrics.score.toFixed(0)}),i.jsx("div",{className:"w-8 h-1.5 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full transition-all duration-300",style:{width:`${b.pprMetrics.score}%`,backgroundColor:b.pprMetrics.hexColor}})})]}):i.jsx("span",{className:"text-gray-600",children:"-"})})]},K)})})]})}),i.jsxs("div",{className:"bg-gray-800 border-t border-gray-700 px-4 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",T.length," of ",N.length," players"]}),i.jsxs("div",{className:"flex gap-2",children:[f>50&&i.jsxs("button",{onClick:()=>h(Math.max(50,f-50)),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg flex items-center gap-2 transition-colors",children:[i.jsx(qf,{className:"w-4 h-4"}),"Show 50 Less"]}),f<k.length&&i.jsxs("button",{onClick:()=>h(Math.min(k.length,f+50)),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2 transition-colors",children:[i.jsx(Hf,{className:"w-4 h-4"}),"Show 50 More"]})]})]})]})},Iv={QB:{min:1,max:2,optimal:1},RB:{min:2,max:5,optimal:5},WR:{min:2,max:6,optimal:5},TE:{min:1,max:2,optimal:1},DST:{min:1,max:1,optimal:1},K:{min:1,max:1,optimal:1},FLEX:{count:1,eligiblePositions:["RB","WR","TE"]},BENCH:7},Vv={enabled:!0,targetBudgetPercent:.55,eliteRBTarget:1,maxEliteRBs:1,firstFiveRounds:5,eliteRBBudget:50,tier1RBRange:{min:35,max:45},tier2RBRange:{min:20,max:30},inflationThreshold:1.35,totalRBTarget:5,totalWRTarget:5},Lv={targetBudgetPercent:.35,eliteRBTarget:1,maxSpendOnOne:65,pivotToWR:!0},Ov={targetBudgetPercent:.15,noEliteRBs:!0,waitUntilRound:7,loadWRs:!0};class zv{constructor(){Q(this,"rosterRequirements");Q(this,"originalValuations",new Map);Q(this,"robustRBConfig",Vv);Q(this,"heroRBConfig",Lv);Q(this,"zeroRBConfig",Ov);Q(this,"activeStrategy","robust-rb");Q(this,"strategyPivoted",!1);this.rosterRequirements=Iv}getRecommendation(e,n,s=0){const a=this.detectPositionRun(e.position,n),r=this.calculatePanicLevel(e.position,n),o=this.determineDraftStage(n),l=this.calculateValueScore(e,s,n),c=this.calculateNeedScore(e,n),u=this.calculateScarcityScore(e,n),d=this.calculateBudgetScore(e,s,n),m=this.calculateMarketInflation(n),f=this.calculateMaxBid(e,n,{valueScore:l,needScore:c,scarcityScore:u,budgetScore:d,marketInflation:m},{isPositionRun:a,panicLevel:r,draftStage:o}),h=this.determineAction(s,f,{valueScore:l,needScore:c,scarcityScore:u,budgetScore:d},e,n),p=this.calculateConfidence({valueScore:l,needScore:c,scarcityScore:u,budgetScore:d}),v=this.generatePrimaryReason(e,h,{valueScore:l,needScore:c,scarcityScore:u,budgetScore:d},n),w=this.generateWarnings(e,n,s),S=this.generateOpportunities(e,n,s),y=this.predictCompetitors(e,n),g=this.predictFinalPrice(e,n,m),x=this.determineNominationStrategy(e,n),N=this.determineBiddingStrategy(e,n,h),k=this.findAlternatives(e,n),T=this.analyzeCompetitors(e,n),j=this.analyzeByeWeekImpact(e,n),_=this.analyzeTeamStack(e,n),C=this.generateSmartAlternatives(e,n,h),E=this.calculateBudgetAdvantage(n),M=this.calculateDraftProgress(n),W=this.checkStrategyPivot(e,n,m);return W.shouldPivot&&(this.activeStrategy=W.newStrategy,this.strategyPivoted=!0),{action:h,maxBid:f,confidence:p,valueScore:l,needScore:c,scarcityScore:u,budgetScore:d,primaryReason:v,warnings:w,opportunities:S,marketInflation:m,expectedFinalPrice:g,likelyCompetitors:y,competitorAnalysis:T,nominationStrategy:x,biddingStrategy:N,alternativePlayers:k,byeWeekImpact:j,teamStackBonus:_,smartAlternatives:C,budgetAdvantage:E,draftProgress:M,activeStrategy:this.activeStrategy,strategyPivotAlert:W.alert}}calculateValueScore(e,n,s){const a=e.auctionValue||e.value||1,r=e.marketPrice||e.marketValue||a;n===0&&(n=Math.max(1,Math.floor(r*.5)));const l=(a-n)/Math.max(1,a)*100,c=Math.max(0,Math.min(100,50+l*1.67));return Math.round(c)}calculateNeedScore(e,n){const s=e.position,r=(n.myTeam.players||[]).filter(u=>u.position===s).length,o=this.rosterRequirements[s];if(!o||typeof o=="number")return 50;const l=o;let c=50;return r<l.min?c=100:r<l.optimal?c=75-(r-l.min)*10:r<l.max?c=40-(r-l.optimal)*10:c=10,e.tier==="elite"||e.tier==="tier1"?c=Math.min(100,c+20):e.tier==="tier2"&&(c=Math.min(100,c+10)),this.isFlexEligible(s)&&r>=l.optimal&&(c=Math.max(c,40)),Math.round(c)}calculateScarcityScore(e,n){const s=e.position,a=e.tier,r=n.availablePlayers.filter(h=>h.position===s&&h.tier===a).length,o=n.availablePlayers.filter(h=>h.position===s&&h.projectedPoints>0).length;let l=100;r>5?l=30:r>3?l=50:r>1?l=75:r===1&&(l=100),n.allTeams.length;const c=this.calculateTotalPositionNeeds(s,n),u=o/c;let d=50;u<.5?d=100:u<1?d=75:u<1.5?d=50:d=25;const m=a==="elite"||a==="tier1"?.7:.4,f=l*m+d*(1-m);return Math.round(f)}calculateBudgetScore(e,n,s){const a=s.myTeam.budget||200,r=this.calculateRemainingRosterSpots(s.myTeam),o=a-r+1;if(n>o)return 0;const c=a/r;let u=50;return n<c*.5?u=100:n<c?u=75:n<c*1.5?u=50:n<c*2?u=25:u=10,(e.tier==="elite"||e.tier==="tier1")&&(u=Math.min(100,u+15)),Math.round(u)}calculateMarketInflation(e){const n=e.draftHistory;if(n.length===0)return e.availablePlayers.forEach(o=>{const l=o.playerId||o.id;l&&!this.originalValuations.has(l)&&this.originalValuations.set(l,o.marketValue||o.auctionValue||1)}),0;let s=0,a=0;if(n.forEach(o=>{if(o.price&&o.player){const l=o.player.id||o.player.playerId,c=this.originalValuations.get(l);c&&(s+=c,a+=o.price)}}),s===0)return 0;const r=(a-s)/s*100;return Math.round(Math.max(-30,Math.min(30,r)))}calculateMaxBid(e,n,s,a){const r=e.auctionValue||e.value||1,o=e.marketPrice||e.marketValue||r;let l=e.maxBid||r;const c=n.myTeam.players||[],u=c.filter(C=>C.position==="RB"),d=u.filter(C=>{const E=n.draftHistory.find(M=>M.player&&C&&(M.player.id&&M.player.id===C.id||M.player.playerId&&M.player.playerId===C.id));return E&&E.price&&E.price>=40}).length,m=Math.floor(n.draftHistory.length/12)+1;let f=0,h=0;if(this.activeStrategy==="robust-rb"&&e.position==="RB"){const E=n.draftHistory.filter(M=>{var W;return M.team===n.myTeam.id&&((W=M.player)==null?void 0:W.position)==="RB"}).reduce((M,W)=>M+(W.price||0),0)/200;m<=this.robustRBConfig.firstFiveRounds&&E<.6?e.tier==="elite"&&d<1?(f=.05,console.log("[Robust RB] First elite RB bonus applied:",e.playerName,"Bonus:",f)):e.tier==="tier2"&&u.length<3?(f=.02,console.log("[Robust RB] Tier2 RB bonus applied:",e.playerName)):f=0:m<=8&&e.tier==="tier2"&&u.length<3&&E<.5&&(f=.02)}else this.activeStrategy==="hero-rb"?e.position==="RB"&&d===0&&e.tier==="elite"?(f=.4,console.log("[Hero RB] Elite RB bonus for anchor:",e.playerName)):e.position==="WR"&&(e.tier==="elite"||e.tier==="tier1")&&(h=.35,console.log("[Hero RB] Elite WR bonus:",e.playerName)):this.activeStrategy==="zero-rb"&&(e.position==="WR"&&(e.tier==="elite"||e.tier==="tier1")?(h=.45,console.log("[Zero RB] Elite WR maximum bonus:",e.playerName)):e.position==="RB"&&((e.tier==="tier3"||e.tier==="replacement")&&m>=8?(f=.15,console.log("[Zero RB] Value RB bonus:",e.playerName)):(f=-.2,console.log("[Zero RB] Avoiding expensive RB:",e.playerName))));const p=c.filter(C=>C.position==="WR");e.position==="WR"&&this.activeStrategy!=="zero-rb"&&(this.activeStrategy==="robust-rb"&&d>=2?e.tier==="elite"||e.tier==="tier1"?(h=.15,console.log("[WR Depth] Elite WR bonus after RB core:",e.playerName)):p.length<5&&(e.tier==="tier2"||e.tier==="tier3")&&(h=Math.max(h,.1),console.log("[WR Depth] Bonus applied:",e.playerName)):this.activeStrategy==="hero-rb"&&d>=1&&p.length<5&&(e.tier==="tier2"||e.tier==="tier3")&&(h=Math.max(h,.2),console.log("[WR Depth] Bonus applied:",e.playerName))),console.log("[MaxBid Calculation]",{playerName:e.playerName,startingMaxBid:l,auctionValue:e.auctionValue,marketPrice:o,edge:e.edge,tier:e.tier,robustRBBonus:f,wrDepthBonus:h});let v=0;v+=s.marketInflation/100,v+=s.needScore/100*.2,v+=s.scarcityScore/100*.15;const w=this.analyzeTeamStack(e,n);w&&w.synergyBonus>0&&(v+=w.synergyBonus/100),a.isPositionRun&&s.needScore>70&&(v+=.15);const S=Math.min(1,a.panicLevel);S>.5&&(v+=S*.2),a.draftStage==="late"&&(e.tier==="elite"||e.tier==="tier1"||e.tier==="tier2")&&(v+=.1),v+=f,v+=h;const g=n.draftHistory.length/(12*16)<.25;let x=.5;g&&(e.tier==="elite"?x=1:e.tier==="tier1"?x=.85:x=.7),this.robustRBConfig.enabled&&e.position==="RB"&&m<=5&&(x=Math.max(x,.9)),v=Math.max(-.3,Math.min(x,v)),l=l*(1+v);const N=n.myTeam.budget||200,k=this.calculateRemainingRosterSpots(n.myTeam),T=N-k+1,j=a.draftStage,_=this.calculateGlobalMaxBid(e,n,N,k,j);return l=Math.min(l,T,_),Math.round(l)}determineAction(e,n,s,a,r){var H;const o=r.draftHistory.length/192,l=o<.25,c=o>=.25&&o<.6,u=o>=.6,m=this.calculateMarketInflation(r)/100>.1,f=r.myTeam.budget;f/Math.max(1,16-(((H=r.myTeam.players)==null?void 0:H.length)||0));const h=f>100,p=f<50;let v=n;if(l?(a.tier==="elite"?v=n*1.15:a.tier==="tier1"&&(v=n*1.1),m&&h&&(v*=1.1)):c?(a.tier==="elite"||a.tier==="tier1")&&(v=n*1.05):u&&this.identifyCriticalNeeds(r).includes(a.position)&&(v=n*1.05),e>v*1.2)return"pass";const w=s.valueScore*.35+s.needScore*.3+s.scarcityScore*.2+s.budgetScore*.15,S=s.valueScore>=75,y=s.needScore>=90;s.scarcityScore>=90;const g=s.budgetScore>=60,x=(r.myTeam.players||[]).filter(J=>J.position===a.position).length,N=this.rosterRequirements[a.position],k=N&&typeof N!="number"&&x>=N.max,T=this.identifyCriticalNeeds(r),j=T.length>0&&!T.includes(a.position);if(k&&a.tier>2)return"pass";if(j&&r.myTeam.budget<50&&s.needScore<70)return"avoid";const _=Math.floor(r.draftHistory.length/12)+1,C=(r.myTeam.players||[]).filter(J=>J.position==="RB"),E=C.filter(J=>{const U=r.draftHistory.find(I=>I.player&&J&&(I.player.id&&I.player.id===J.id||I.player.playerId&&I.player.playerId===J.id));return U&&U.price&&U.price>=40}).length;if(this.robustRBConfig.enabled&&a.position==="RB"){if(a.tier==="elite"&&E<2){if(e<=v*1.5)return"strong-buy"}else if(a.tier==="tier1"&&C.length<3){if(e<=v*1.3||E===0)return"strong-buy";if(e<=v*1.4)return"consider"}else if(a.tier==="tier2"&&C.length<4&&e<=v*1.2)return _<=8?"strong-buy":"consider"}let M=75,W=55,B=35;return l?(M=65,W=45,B=25,(a.tier==="elite"||a.tier==="tier1")&&(M-=10,W-=10)):m&&h?(M=70,W=50,B=30):p&&(M=80,W=65,B=45),e<=v?w>=M||S&&y?"strong-buy":w>=W||S&&g?"consider":w>=B?"avoid":"pass":e<=v*1.1?w>=M+10||a.tier==="elite"&&l?"consider":"avoid":"pass"}calculateConfidence(e){const s=100-this.calculateVariance([e.valueScore,e.needScore,e.scarcityScore,e.budgetScore])/10;return Math.round(Math.max(0,Math.min(100,s)))}generatePrimaryReason(e,n,s,a){var f;const r=[],o=this.detectPositionRun(e.position,a),l=this.calculatePanicLevel(e.position,a),c=this.identifyCriticalNeeds(a),u=(a.myTeam.players||[]).filter(h=>h.position===e.position).length;s.valueScore>=80&&r.push({score:s.valueScore,reason:`Exceptional value - ${Math.round(100-s.valueScore)}% below market`}),s.needScore>=90&&r.push({score:s.needScore,reason:`Critical need - You have ${u} ${e.position}s and need more`}),s.scarcityScore>=85&&r.push({score:s.scarcityScore,reason:`Scarcity alert - Last quality ${e.position} available`}),o&&s.needScore>50&&r.push({score:95,reason:`${e.position} run happening NOW - prices inflating rapidly`}),l>.7&&r.push({score:98,reason:`PANIC BUY - Critical ${e.position} shortage, must secure now!`});const d=this.rosterRequirements[e.position],m=d&&typeof d!="number"&&u>=d.max;if(n==="pass"){if(m)return`Already at max capacity with ${u} ${e.position}s`;if(c.length>0&&!c.includes(e.position))return`Must save budget for critical needs at: ${c.join(", ")}`;const h=this.calculateRemainingRosterSpots(a.myTeam);return h>=10?`Too expensive - need balanced roster with ${h} spots to fill`:"Price exceeds maximum profitable bid given roster construction"}return n==="avoid"?a.myTeam.budget<40&&c.length>0?`Limited budget - prioritize ${c.join(", ")} instead`:"Better value plays available for roster balance":(r.sort((h,p)=>p.score-h.score),((f=r[0])==null?void 0:f.reason)||"Balanced opportunity for roster construction")}generateWarnings(e,n,s){const a=[],r=n.myTeam.budget||200,o=this.calculateRemainingRosterSpots(n.myTeam),l=this.identifyCriticalNeeds(n),c=this.determineDraftStage(n);s>r*.4&&a.push(`⚠️ Heavy spend: ${Math.round(s/r*100)}% of budget`),r-s<o*3&&a.push(`💰 Budget crunch: Only $${r-s} for ${o} spots`),l.length>0&&!l.includes(e.position)&&a.push(`🚨 Still need starters at: ${l.join(", ")}`);const u=(n.myTeam.players||[]).filter(f=>f.position===e.position).length,d=this.rosterRequirements[e.position];if(d&&typeof d!="number"){const f=d;u>=f.optimal&&l.length>0&&a.push(`📊 Already have ${u} ${e.position}s (optimal: ${f.optimal})`),u>=f.max&&a.push(`🛑 At maximum ${e.position} capacity (${f.max})`)}if(this.robustRBConfig.enabled){const f=(n.myTeam.players||[]).filter(w=>w.position==="RB"),h=f.filter(w=>{const S=n.draftHistory.find(y=>{var g,x;return((g=y.player)==null?void 0:g.id)===w.id||((x=y.player)==null?void 0:x.playerId)===w.id});return S&&S.price&&S.price>=40}).length,p=Math.floor(n.draftHistory.length/12)+1,v=f.reduce((w,S)=>{const y=n.draftHistory.find(g=>{var x;return((x=g.player)==null?void 0:x.id)===S.id});return w+((y==null?void 0:y.price)||0)},0);p>this.robustRBConfig.firstFiveRounds&&h<this.robustRBConfig.eliteRBTarget&&a.push(`🎯 Robust RB Alert: Only ${h}/${this.robustRBConfig.eliteRBTarget} elite RBs secured (target 2-3 in first 5 rounds)`),e.position!=="RB"&&h<2&&p<=3&&a.push("⚠️ Focus on RBs early - Robust RB strategy targets 50-60% budget on elite RBs"),v>120&&e.position==="RB"&&e.tier!=="elite"&&e.tier!=="tier1"&&a.push(`💰 Already spent $${v} on RBs - consider WR value`)}const m=n.availablePlayers.filter(f=>f.tier==="elite"||f.tier==="tier1").length;return m>5&&e.tier!=="elite"&&e.tier!=="tier1"&&e.tier!=="tier2"&&c==="early"&&a.push(`⭐ ${m} elite players still available`),this.detectPositionRun(e.position,n)&&a.push(`🔥 ${e.position} run in progress - prices inflating`),o>=10&&s>r*.25&&a.push(`📊 Consider balanced build - ${o} spots need filling`),c==="early"&&s>50&&a.push("💡 High early spend - commits to stars & scrubs strategy"),a}generateOpportunities(e,n,s){const a=[];if(this.robustRBConfig.enabled&&e.position==="RB"){const u=(n.myTeam.players||[]).filter(m=>m.position==="RB").filter(m=>{const f=n.draftHistory.find(h=>{var p,v;return((p=h.player)==null?void 0:p.id)===m.id||((v=h.player)==null?void 0:v.playerId)===m.id});return f&&f.price&&f.price>=40}).length,d=Math.floor(n.draftHistory.length/12)+1;(e.tier==="elite"||e.tier==="tier1")&&u<this.robustRBConfig.eliteRBTarget&&d<=this.robustRBConfig.firstFiveRounds&&a.push("🎯 Core Robust RB target - secure elite RB foundation"),e.tier==="tier2"&&u>=2&&a.push("✅ Strong RB3 to complete Robust RB build")}this.robustRBConfig.enabled&&e.position==="WR"&&(n.myTeam.players||[]).filter(d=>d.position==="RB").filter(d=>{const m=n.draftHistory.find(f=>{var h,p;return((h=f.player)==null?void 0:h.id)===d.id||((p=f.player)==null?void 0:p.playerId)===d.id});return m&&m.price&&m.price>=40}).length>=2&&(e.tier==="tier2"||e.tier==="tier3")&&s<=25&&a.push("💎 WR value play after securing RB foundation");const r=e.auctionValue-s;r>10&&a.push(`💰 $${r} discount from fair value`);const o=n.availablePlayers.filter(c=>c.position===e.position&&c.tier===e.tier);o.length<=2&&a.push(`One of last ${o.length} in tier`);const l=(n.myTeam.players||[]).filter(c=>c.team===e.team);if(l.length>0&&e.position==="WR"){const c=l.find(u=>u.position==="QB");c&&a.push(`Stack with ${c.name}`)}return this.isFlexEligible(e.position)&&(e.tier==="elite"||e.tier==="tier1"||e.tier==="tier2")&&a.push("🔥 Strong flex play potential"),a}predictCompetitors(e,n){const s=[],a=e.position;return n.allTeams.forEach(r=>{if(r.id===n.myTeam.id)return;const o=(r.players||[]).filter(c=>c.position===a).length,l=this.rosterRequirements[a];l&&typeof l!="number"&&o<l.optimal&&r.budget>=e.marketPrice&&s.push(r.name)}),s.slice(0,3)}predictFinalPrice(e,n,s){const a=e.marketPrice||e.auctionValue,r=1+s/100;let o=1;(e.tier==="elite"||e.tier===1)&&(o=1.1);const c=1+this.calculateScarcityScore(e,n)/100*.1,u=a*r*o*c;return Math.round(u)}determineNominationStrategy(e,n){const s=this.calculateNeedScore(e,n),a=this.calculateMarketInflation(n),r=this.determineDraftStage(n),o=this.analyzeCompetitors(e,n);return o.length>=3&&s<50?"nominate-early":s>=80&&o.length<=1?"nominate-late":r==="early"&&e.adp&&e.adp>100&&s>=70||e.auctionValue>40&&s<30||s>=70&&a<10?"nominate-early":e.adp&&e.adp>150&&s>=60?"nominate-late":s<40?"avoid-nominating":"nominate-late"}determineBiddingStrategy(e,n,s){if(s==="strong-buy")return"aggressive";if(s==="consider")return"patient";if(s==="avoid"){const a=e.marketPrice||e.auctionValue;if(n.currentBid<a*.8)return"price-enforce"}return"avoid"}findAlternatives(e,n){return n.availablePlayers.filter(a=>a.position===e.position&&a.playerId!==e.playerId&&Math.abs(a.auctionValue-e.auctionValue)<=5).sort((a,r)=>r.auctionValue-a.auctionValue).slice(0,3)}isFlexEligible(e){return this.rosterRequirements.FLEX.eligiblePositions.includes(e)}calculateRemainingRosterSpots(e){var s;return 16-(((s=e.players)==null?void 0:s.length)||0)}calculateTotalPositionNeeds(e,n){const s=this.rosterRequirements[e];if(!s||typeof s=="number")return n.allTeams.length;const a=s;return n.allTeams.length*a.optimal}calculateVariance(e){const n=e.reduce((r,o)=>r+o,0)/e.length,a=e.map(r=>Math.pow(r-n,2)).reduce((r,o)=>r+o,0)/e.length;return Math.sqrt(a)}calculateGlobalMaxBid(e,n,s,a,r){var d;let l={RB:85,WR:70,QB:45,TE:45,DST:5,K:2}[e.position]||50;if(this.robustRBConfig.enabled&&e.position==="RB"&&e.tier==="elite"&&n.draftHistory.length/192<.3&&(l=Math.min(90,s*.55)),a>=10?this.robustRBConfig.enabled&&e.position==="RB"&&(e.tier==="elite"||e.tier==="tier1")?l=Math.min(l,s*.5):l=Math.min(l,s*.3):a>=5?this.robustRBConfig.enabled&&e.position==="RB"&&(e.tier==="elite"||e.tier==="tier1")?l=Math.min(l,s*.6):l=Math.min(l,s*.4):a>=2?e.tier==="elite"||e.tier==="tier1"?l=Math.min(l,s*.6):l=Math.min(l,s*.45):l=Math.min(l,s-1),r==="early"){const m=200-s,f=((d=n.myTeam.players)==null?void 0:d.length)||0;if(f===0)if(this.robustRBConfig.enabled&&e.position==="RB"&&e.tier==="elite"){const h=n.totalBudget*.4;l=Math.min(l,h)}else{const h=n.totalBudget*.3;l=Math.min(l,h)}else f<=2&&(this.robustRBConfig.enabled&&e.position==="RB"&&(e.tier==="elite"||e.tier==="tier1")?l=Math.min(l,s*.45):m>n.totalBudget*.3&&(l=Math.min(l,s*.25)))}(e.tier==="tier3"||e.tier==="replacement")&&(l=Math.min(l,s*.2));const c=s-l,u=a-1;return u>0&&c<u&&(l=s-u),Math.max(1,Math.floor(l))}detectPositionRun(e,n){return n.draftHistory.length<5?!1:n.draftHistory.slice(-5).filter(r=>{var o;return((o=r.player)==null?void 0:o.position)===e}).length>=3}calculatePanicLevel(e,n){const a=(n.myTeam.players||[]).filter(m=>m.position===e).length,r=this.rosterRequirements[e];if(!r||typeof r=="number")return 0;const l=Math.max(0,r.min-a);if(l===0)return 0;const c=n.availablePlayers.filter(m=>m.position===e&&(m.tier==="elite"||m.tier==="tier1"||m.tier==="tier2")).length,u=n.allTeams.length,d=Math.floor(u/2);return l>0&&c<=d?Math.min(1,l/c):0}determineDraftStage(e){const n=e.allTeams.length*16,a=e.draftHistory.length/n;return a<.25?"early":a<.65?"middle":"late"}analyzeCompetitors(e,n){const s=[],a=e.position;return n.allTeams.forEach(r=>{var v;if(r.id===n.myTeam.id)return;const o=(r.players||[]).filter(w=>w.position===a).length,l=this.rosterRequirements[a],c=l&&typeof l!="number"&&o<l.optimal,u=r.budget||0,d=((v=r.players)==null?void 0:v.length)||0,m=16-d,f=Math.max(0,u-m+1),h=d>0?(200-u)/d:0;let p="medium";h>20?p="high":h<10&&(p="low"),c&&f>=e.auctionValue*.5&&s.push({teamName:r.name,remainingBudget:u,needsPosition:c,maxPossibleBid:f,aggressionLevel:p})}),s.sort((r,o)=>o.maxPossibleBid-r.maxPossibleBid).slice(0,5)}analyzeByeWeekImpact(e,n){if(!e.byeWeek)return;const s=n.myTeam.players||[],a={},r={};s.forEach(d=>{d.byeWeek&&(a[d.byeWeek]=(a[d.byeWeek]||0)+1,r[d.byeWeek]||(r[d.byeWeek]=[]),r[d.byeWeek].push(d.position))});const o=a[e.byeWeek]||0,l=o>=2,c=r[e.byeWeek]||[];let u;return o>=3?u=`CRITICAL: Would have ${o+1} players on Week ${e.byeWeek} bye`:l&&c.includes("QB")?u=`Warning: QB and ${e.position} both on Week ${e.byeWeek} bye`:l&&e.position==="RB"&&c.includes("RB")&&(u=`Warning: Multiple RBs on Week ${e.byeWeek} bye`),{playerByeWeek:e.byeWeek,currentByeWeekCounts:a,wouldCreateStack:l,affectedPositions:c,warning:u}}analyzeTeamStack(e,n){const a=(n.myTeam.players||[]).filter(d=>d.team===e.team);if(a.length===0)return;const r=a.map(d=>d.position),o=a.map(d=>d.name);let l="none",c=0,u;return r.includes("QB")&&(e.position==="WR"?(l="QB-WR",c=10):e.position==="TE"&&(l="QB-TE",c=8)),r.includes("RB")&&e.position==="DST"&&(l="RB-DEF",c=3),a.length>=3&&(u=`Already have ${a.length} ${e.team} players - consider diversifying`,c=Math.max(0,c-5)),a.length>=2&&(l="multiple"),{team:e.team,existingPlayers:o,stackType:l,synergyBonus:c,warning:u}}generateSmartAlternatives(e,n,s){const a=[],r=e.position;if(!n.availablePlayers||n.availablePlayers.length===0)return[];const o=n.availablePlayers.filter(d=>{if(d.position!==r||d.playerId===e.playerId)return!1;const m=e.tier==="elite"?0:e.tier,f=d.tier==="elite"?0:d.tier;return Math.abs(f-m)<=1}).sort((d,m)=>{const f=d.edge||0;return(m.edge||0)-f}).slice(0,2);s==="pass"||s==="avoid"?o.forEach(d=>{d.auctionValue<e.auctionValue&&a.push({player:d,reasoning:`Better value: $${d.auctionValue} for similar production`,targetPrice:Math.round(d.auctionValue*.9),availability:"likely-available"})}):o.forEach(d=>{a.push({player:d,reasoning:`Backup option: Similar tier ${r}`,targetPrice:Math.round(d.auctionValue*.95),availability:d.tier<=2?"risky":"likely-available"})});const l=this.identifyCriticalNeeds(n);l.length>0&&!l.includes(r)&&n.availablePlayers.filter(m=>l.includes(m.position)&&m.tier<=2&&m.auctionValue<=e.auctionValue).sort((m,f)=>f.vorp-m.vorp).slice(0,1).forEach(m=>{a.push({player:m,reasoning:`Pivot opportunity: Fill critical need at ${m.position}`,targetPrice:Math.round(m.auctionValue),availability:"immediate"})});const c=n.availablePlayers.filter(d=>d.position===r&&d.tier<=3).length;return c>10&&s!=="strong-buy"&&n.availablePlayers.filter(m=>{if(m.position!==r||m.playerId===e.playerId)return!1;const f=e.tier==="elite"?0:e.tier;return(m.tier==="elite"?0:m.tier)===f+1&&m.auctionValue<e.auctionValue*.7}).sort((m,f)=>f.vorp-m.vorp).slice(0,1).forEach(m=>{a.push({player:m,reasoning:`Wait for value: ${c} quality ${r}s remain`,targetPrice:Math.round(m.auctionValue*.85),availability:"likely-available"})}),a.filter((d,m,f)=>m===f.findIndex(h=>h.player.playerId===d.player.playerId)).slice(0,3)}identifyCriticalNeeds(e){const n=[],s=e.myTeam.players||[];for(const[a,r]of Object.entries(this.rosterRequirements)){if(typeof r=="number")continue;const o=r,l=s.filter(c=>c.position===a).length;l<o.min&&(l===0&&["QB","RB","WR","TE"].includes(a)||l<o.min)&&n.push(a)}return n}calculateBudgetAdvantage(e){var n;try{const s=((n=e.myTeam)==null?void 0:n.budget)||200,a=(e.allTeams||[]).filter(m=>{var f;return m.id!==((f=e.myTeam)==null?void 0:f.id)});if(!a||a.length===0)return{myBudget:s,averageBudget:s,advantage:0,percentile:50,canDominate:!1};const r=a.map(m=>m.budget||0),o=r.length>0?r.reduce((m,f)=>m+f,0)/r.length:s,l=s-o,c=r.filter(m=>m<s).length,u=r.length>0?Math.round(c/r.length*100):50,d=s>o*1.2;return{myBudget:s,averageBudget:Math.round(o),advantage:Math.round(l),percentile:u,canDominate:d}}catch(s){return console.error("[BudgetAdvantage Error]",s),{myBudget:200,averageBudget:200,advantage:0,percentile:50,canDominate:!1}}}calculateDraftProgress(e){try{const s=((e.allTeams||[]).length||12)*16,a=(e.draftHistory||[]).length,r=s>0?Math.round(a/s*100):0,o=a>=s/2;let l;return r<25?l="early":r<50?l="mid":r<75?l="late":l="end",{totalPicks:s,picksMade:a,percentComplete:r,isHalfway:o,phase:l}}catch(n){return console.error("[DraftProgress Error]",n),{totalPicks:192,picksMade:0,percentComplete:0,isHalfway:!1,phase:"early"}}}checkStrategyPivot(e,n,s){try{if(this.strategyPivoted)return{shouldPivot:!1,newStrategy:this.activeStrategy};const a=this.calculatePositionInflation("RB",n),r=n.availablePlayers.filter(h=>h.position==="RB"&&(h.tier==="elite"||h.tier==="tier1"));let o=0;if(r.length>0){const h=r.reduce((v,w)=>v+(w.marketValue||0),0)/r.length,p=r.reduce((v,w)=>v+(w.intrinsicValue||w.auctionValue||0),0)/r.length;p>0&&(o=(h-p)/p*100)}const l=Math.max(a,o),u=(n.myTeam.players||[]).filter(h=>h.position==="RB").filter(h=>{const p=n.draftHistory.find(v=>v.player&&h&&(v.player.id&&v.player.id===h.id||v.player.playerId&&v.player.playerId===h.id));return p&&p.price&&p.price>=40}).length,d=n.myTeam.budget||0,m=r.sort((h,p)=>(h.marketValue||0)-(p.marketValue||0))[0],f=m&&(m.marketValue||0)>d*.35;if(this.activeStrategy==="robust-rb"){const h=this.calculateDraftProgress(n);if(l>20&&u===0){if(h.percentComplete<25)return{shouldPivot:!0,newStrategy:"hero-rb",alert:`🔄 STRATEGY PIVOT: RBs inflated +${Math.round(l)}% - switching to Hero RB (one elite RB + WR depth)`};if(h.percentComplete<50)return{shouldPivot:!0,newStrategy:"zero-rb",alert:`🔄 STRATEGY PIVOT: RBs too expensive (+${Math.round(l)}%) - switching to Zero RB (load up on WRs)`}}if(f&&u===0&&h.percentComplete<40)return{shouldPivot:!0,newStrategy:"zero-rb",alert:"🔄 STRATEGY PIVOT: Priced out of elite RB market - switching to Zero RB for value"};const p=n.allTeams.filter(v=>{var y;return v.id===n.myTeam.id?!1:(((y=v.players)==null?void 0:y.filter(g=>g.position==="RB"))||[]).filter(g=>n.draftHistory.find(N=>{var k;return N.team===v.id&&((k=N.player)==null?void 0:k.position)==="RB"&&(N.price||0)>=40})!=null).length>=2}).length;if(p>=3&&u===0&&r.length<=2)return{shouldPivot:!0,newStrategy:"zero-rb",alert:`🚨 Market Alert: ${p} teams hoarding elite RBs - pivot to Zero RB for value`}}return{shouldPivot:!1,newStrategy:this.activeStrategy}}catch(a){return console.error("[StrategyPivot Error]",a),{shouldPivot:!1,newStrategy:this.activeStrategy}}}calculatePositionInflation(e,n){const s=n.draftHistory.filter(o=>{var l;return((l=o.player)==null?void 0:l.position)===e&&o.price});if(s.length===0)return 0;let a=0,r=0;return s.forEach(o=>{var u,d;const l=((u=o.player)==null?void 0:u.id)||((d=o.player)==null?void 0:d.playerId),c=this.originalValuations.get(l);c&&(a+=c,r+=o.price||0)}),a===0?0:Math.round((r-a)/a*100)}}const Mc=new zv,Wv=({player:t,currentBid:e=0,onBidChange:n,allPlayers:s=[],onDraft:a})=>{var g,x;const{teams:r,myTeamId:o,draftHistory:l,completeAuction:c}=pt(),[u,d]=D.useState(e||""),[m,f]=D.useState(((g=r.find(N=>N.id===o))==null?void 0:g.name)||"My Team"),h=D.useMemo(()=>{var W;const N=r.find(B=>B.id===o),k=((W=N==null?void 0:N.roster)==null?void 0:W.map(B=>B.player))||[],T=N?N.budget-N.spent:200,j={id:(N==null?void 0:N.id)||o||"team_0",name:(N==null?void 0:N.name)||"My Team",budget:T,players:k,isUser:!0,maxBid:(N==null?void 0:N.maxBid)||T,nominations:0},_=r.map(B=>{var H;return{id:B.id,name:B.name,budget:B.budget-B.spent,players:((H=B.roster)==null?void 0:H.map(J=>J.player))||[],isUser:B.id===o,maxBid:B.maxBid||B.budget-B.spent,nominations:0}}),C=new Set(l.map(B=>{var H,J;return((H=B.player)==null?void 0:H.id)||((J=B.player)==null?void 0:J.playerId)}).filter(Boolean)),E=s.filter(B=>{const H=B.playerId||B.id;return!C.has(H)});console.log("[BidAdvisor Debug]",{allPlayersCount:s.length,draftedCount:C.size,availableCount:E.length,currentPlayer:t.playerName,samplePlayer:E[0]});const M={myTeam:j,allTeams:_.length>0?_:[j],draftHistory:l||[],availablePlayers:E,currentBid:typeof u=="number"?u:0,totalBudget:200,rosterRequirements:{QB:{min:1,max:2,optimal:1},RB:{min:2,max:6,optimal:4},WR:{min:2,max:6,optimal:4},TE:{min:1,max:3,optimal:2},DST:{min:1,max:2,optimal:1},K:{min:1,max:2,optimal:1},FLEX:{count:1,eligiblePositions:["RB","WR","TE"]},BENCH:6}};return Mc.getRecommendation(t,M,u)},[t,u,r,o,l,s]),v=(()=>{switch(h.action){case"strong-buy":return{color:"bg-green-500",borderColor:"border-green-500",textColor:"text-green-400",bgLight:"bg-green-500/10",icon:i.jsx(Rc,{className:"w-5 h-5"}),label:"STRONG BUY",pulseAnimation:"animate-pulse"};case"consider":return{color:"bg-yellow-500",borderColor:"border-yellow-500",textColor:"text-yellow-400",bgLight:"bg-yellow-500/10",icon:i.jsx(zf,{className:"w-5 h-5"}),label:"CONSIDER",pulseAnimation:""};case"avoid":return{color:"bg-orange-500",borderColor:"border-orange-500",textColor:"text-orange-400",bgLight:"bg-orange-500/10",icon:i.jsx(Ln,{className:"w-5 h-5"}),label:"AVOID",pulseAnimation:""};case"pass":return{color:"bg-red-500",borderColor:"border-red-500",textColor:"text-red-400",bgLight:"bg-red-500/10",icon:i.jsx(Mg,{className:"w-5 h-5"}),label:"PASS",pulseAnimation:""}}})(),w=()=>{const N=typeof u=="number"?u:0;if(!u||N<=0){alert("Please enter a valid purchase price");return}const k=r.find(j=>j.name===m),T=(k==null?void 0:k.id)||o;if(a)a(N,T);else{const j={id:t.playerId||t.id,name:t.playerName||t.name,position:t.position,team:t.team,projectedPoints:t.projectedPoints,value:t.auctionValue,tier:t.tier||"replacement"};c(j,N,T)}},S=N=>{N.key==="Enter"&&w()},y=({label:N,score:k,icon:T})=>{const j=_=>_>=75?"bg-green-500":_>=50?"bg-yellow-500":_>=25?"bg-orange-500":"bg-red-500";return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1 w-20",children:[T,i.jsx("span",{className:"text-sm text-gray-400",children:N})]}),i.jsx("div",{className:"flex-1 bg-gray-700 rounded-full h-2 overflow-hidden",children:i.jsx("div",{className:`h-full transition-all duration-500 ${j(k)}`,style:{width:`${k}%`}})}),i.jsxs("span",{className:"text-sm text-gray-300 w-10 text-right",children:[k,"%"]})]})};return i.jsxs("div",{className:`border rounded-lg p-4 ${v.borderColor} ${v.bgLight}`,children:[i.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:`p-2 rounded-lg ${v.color} text-white`,children:v.icon}),i.jsxs("div",{children:[i.jsx("div",{className:`text-lg font-bold ${v.textColor}`,children:v.label}),i.jsxs("div",{className:"text-sm text-gray-300",children:["Conf: ",h.confidence,"%"]})]})]}),i.jsxs("div",{className:"p-2 bg-gray-800/50 rounded-lg mb-3",children:[i.jsx("div",{className:"text-sm font-medium text-gray-400 mb-1",children:"Primary Reason"}),i.jsx("div",{className:"text-base text-white",children:h.primaryReason})]}),(h.warnings.length>0||h.opportunities.length>0)&&i.jsxs("div",{className:"space-y-1.5 mb-3",children:[h.warnings.map((N,k)=>i.jsxs("div",{className:"flex items-start gap-1.5 text-sm",children:[i.jsx(Ln,{className:"w-4 h-4 text-orange-400 flex-shrink-0 mt-0.5"}),i.jsx("span",{className:"text-orange-300 leading-tight",children:N})]},k)),h.opportunities.map((N,k)=>i.jsxs("div",{className:"flex items-start gap-1.5 text-sm",children:[i.jsx(Vn,{className:"w-4 h-4 text-green-400 flex-shrink-0 mt-0.5"}),i.jsx("span",{className:"text-green-300 leading-tight",children:N})]},k))]}),i.jsxs("div",{className:"bg-purple-900/30 border border-purple-600/30 rounded-lg p-2",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(cn,{className:"w-4 h-4 text-purple-400"}),i.jsx("span",{className:"text-sm text-gray-400",children:"Nomination"})]}),i.jsx("div",{className:"text-sm font-bold text-purple-300",children:h.nominationStrategy?h.nominationStrategy.replace(/-/g," ").toUpperCase():"CONSIDER"})]})]}),i.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3",children:[i.jsx("div",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider mb-2",children:"Decision Factors"}),i.jsxs("div",{className:"space-y-1.5 mb-3",children:[i.jsx(y,{label:"Value",score:h.valueScore,icon:i.jsx(ys,{className:"w-3 h-3 text-gray-400"})}),i.jsx(y,{label:"Need",score:h.needScore,icon:i.jsx(cn,{className:"w-3 h-3 text-gray-400"})}),i.jsx(y,{label:"Scarcity",score:h.scarcityScore,icon:i.jsx(rr,{className:"w-3 h-3 text-gray-400"})}),i.jsx(y,{label:"Budget",score:h.budgetScore,icon:i.jsx(ps,{className:"w-3 h-3 text-gray-400"})})]}),(()=>{const N=new Set(l.map(B=>{var H;return(H=B.player)==null?void 0:H.id}).filter(Boolean)),k=s.filter(B=>B.position===t.position&&!N.has(B.playerId)),T={elite:k.filter(B=>B.tier==="elite"),tier1:k.filter(B=>B.tier==="tier1"),tier2:k.filter(B=>B.tier==="tier2"),tier3:k.filter(B=>B.tier==="tier3"),replacement:k.filter(B=>B.tier==="replacement")};let j="",_=[];T.elite.length>0?(j="Elite",_=T.elite):T.tier1.length>0?(j="Tier 1",_=T.tier1):T.tier2.length>0?(j="Tier 2",_=T.tier2):T.tier3.length>0?(j="Tier 3",_=T.tier3):T.replacement.length>0&&(j="Replacement",_=T.replacement),_.sort((B,H)=>(B.rank||999)-(H.rank||999));const C=B=>B?B>=9&&B<=11?"text-green-500 font-semibold":B===7||B===8||B===12?"text-green-400":B===6||B===13?"text-yellow-400":B===5||B===14?"text-orange-400":"text-red-400":"text-gray-500",E=B=>!B&&B!==0?"text-gray-500":B>=8?"text-red-500 font-semibold":B>=6?"text-red-400":B>=4?"text-orange-400":B>=2?"text-yellow-400":B>=1?"text-green-400":"text-green-500 font-semibold",M=_.slice(0,6),W=_.length===1;return _.some(B=>B.playerId===t.playerId),_.length===0?null:i.jsxs("div",{className:"mt-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Wg,{className:"w-5 h-5 text-purple-400"}),i.jsxs("span",{className:"text-base font-medium text-gray-400",children:[j," ",t.position,"s (",_.length,")"]})]}),W&&i.jsx("span",{className:"text-sm text-red-400 font-medium",children:"Last!"})]}),i.jsxs("div",{className:"space-y-1",children:[M.map((B,H)=>{var U;const J=B.playerId===t.playerId;return i.jsxs("div",{className:`flex items-center justify-between py-1 px-2 rounded text-sm ${J?"bg-purple-900/30 border border-purple-600/30":"bg-gray-900/30"}`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-gray-500",children:["#",B.rank||"-"]}),i.jsx("span",{className:`font-medium ${J?"text-purple-300":"text-white"}`,children:B.playerName})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:`${C(B.byeWeek)}`,children:["W",B.byeWeek||"-"]}),i.jsx("span",{className:`${E(B.teamSeasonSOS)}`,children:((U=B.teamSeasonSOS)==null?void 0:U.toFixed(1))||"-"})]})]},B.playerId)}),_.length>6&&i.jsxs("div",{className:"text-center text-sm text-gray-500",children:["+",_.length-6," more"]})]})]})})()]}),i.jsxs("div",{className:"bg-gray-800/50 border border-gray-600 rounded-lg p-3",children:[i.jsx("div",{className:"mb-2",children:i.jsx("label",{className:"text-sm text-gray-400 font-medium uppercase tracking-wider",children:"Draft Price"})}),i.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[i.jsx("button",{onClick:()=>d(Math.max(1,(typeof u=="number"?u:0)-5)),className:"px-2 py-1.5 bg-gray-700 hover:bg-gray-600 rounded text-white text-base",children:"-5"}),i.jsx("input",{type:"number",value:u,onChange:N=>{const k=N.target.value===""?"":Math.max(0,parseInt(N.target.value)||0);d(k),n&&typeof k=="number"&&n(k)},onKeyPress:S,className:"flex-1 px-2 py-1.5 bg-gray-900 border border-gray-600 rounded text-white text-center font-bold text-xl",placeholder:"$"}),i.jsx("button",{onClick:()=>d((typeof u=="number"?u:0)+5),className:"px-2 py-1.5 bg-gray-700 hover:bg-gray-600 rounded text-white text-base",children:"+5"})]}),i.jsx("div",{className:"grid grid-cols-2 gap-1 mb-3",children:[{label:"Min",value:1},{label:"25%",value:Math.floor(h.maxBid*.25)},{label:"50%",value:Math.floor(h.maxBid*.5)},{label:"75%",value:Math.floor(h.maxBid*.75)},{label:"Max",value:h.maxBid},{label:"Val",value:t.auctionValue||0}].map(({label:N,value:k})=>i.jsxs("button",{onClick:()=>d(k),className:`px-2 py-1.5 rounded text-sm ${u===k?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[N,": $",k]},N))}),i.jsx("select",{value:m,onChange:N=>f(N.target.value),className:"w-full px-2 py-1.5 bg-gray-900 border border-gray-600 rounded text-white text-base mb-3",children:r.map(N=>i.jsx("option",{value:N.name,children:N.name},N.id))}),i.jsxs("button",{onClick:w,disabled:!u||u<=0,className:`w-full px-3 py-2.5 rounded font-medium transition-colors text-base ${u&&u>0?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:["Draft for $",u||0]})]})]}),h.teamStackBonus&&h.teamStackBonus.synergyBonus>0&&i.jsxs("div",{className:"mb-3 p-2 bg-purple-900/30 border border-purple-600/30 rounded",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Lg,{className:"w-4 h-4 text-purple-400"}),i.jsxs("span",{className:"text-sm text-purple-300",children:[h.teamStackBonus.stackType==="QB-WR"&&"🎯 QB-WR Stack",h.teamStackBonus.stackType==="QB-TE"&&"🎯 QB-TE Stack",h.teamStackBonus.stackType==="multiple"&&"📊 Team Stack"," ","+",h.teamStackBonus.synergyBonus,"% bonus"]})]}),h.teamStackBonus.warning&&i.jsx("div",{className:"text-xs text-orange-300 mt-1",children:h.teamStackBonus.warning})]}),((x=h.byeWeekImpact)==null?void 0:x.warning)&&i.jsx("div",{className:"mb-3 p-2 bg-red-900/30 border border-red-600/30 rounded",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Dg,{className:"w-4 h-4 text-red-400"}),i.jsx("span",{className:"text-sm text-red-300",children:h.byeWeekImpact.warning})]})})]})},qv=({player:t,allPlayers:e=[],onClose:n})=>{var v;const{completeAuction:s,myTeamId:a,draftHistory:r,teams:o}=pt(),l=D.useMemo(()=>{if(!t)return null;const w={position:t.position,targets:t.targets,receptions:t.receptions,games:t.games||16,teamTargets:t.teamTargets,catchableTargets:t.catchableTargets||t.targets,yardsPerRouteRun:t.yardsPerRouteRun,redZoneTargets:t.redZoneTargets,routesRun:t.routesRun,teamPassPlays:t.teamPassPlays,receivingYards:t.receivingYards,teamReceivingYards:t.teamReceivingYards,dropRate:t.dropRate};return Ac.calculatePPRScore(w)},[t]),c=D.useMemo(()=>{var _;if(!t)return 0;const w=o.find(C=>C.id===a),S=((_=w==null?void 0:w.roster)==null?void 0:_.map(C=>C.player))||[],y=w?w.budget-w.spent:200,g={id:(w==null?void 0:w.id)||a||"team_0",name:(w==null?void 0:w.name)||"My Team",budget:y,players:S,isUser:!0,maxBid:(w==null?void 0:w.maxBid)||y,nominations:0},x=o.map(C=>{var E;return{id:C.id,name:C.name,budget:C.budget-C.spent,players:((E=C.roster)==null?void 0:E.map(M=>M.player))||[],isUser:C.id===a,maxBid:C.maxBid||C.budget-C.spent,nominations:0}}),N=new Set(r.map(C=>{var E,M;return((E=C.player)==null?void 0:E.id)||((M=C.player)==null?void 0:M.playerId)}).filter(Boolean)),k=e.filter(C=>{const E=C.playerId||C.id;return!N.has(E)}),T={myTeam:g,allTeams:x.length>0?x:[g],draftHistory:r||[],availablePlayers:k,currentBid:0,totalBudget:200,rosterRequirements:{QB:{min:1,max:2,optimal:1},RB:{min:2,max:6,optimal:4},WR:{min:2,max:6,optimal:4},TE:{min:1,max:3,optimal:2},DST:{min:1,max:2,optimal:1},K:{min:1,max:2,optimal:1},FLEX:{count:1,eligiblePositions:["RB","WR","TE"]},BENCH:6}};return Mc.getRecommendation(t,T,0).marketInflation},[t,o,a,r,e]);if(!t)return i.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-gray-700/50 rounded-xl p-3",children:i.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-500",children:[i.jsx(cn,{className:"w-5 h-5 opacity-40"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"No Player Selected"}),i.jsx("p",{className:"text-xs opacity-75",children:"Search or click the eye icon on any player"})]})]})});const u=(w,S)=>{const y={id:t.playerId,name:t.playerName,position:t.position,team:t.team,playerId:t.playerId,projectedPoints:t.projectedPoints||0,auctionValue:t.auctionValue||0,marketValue:t.marketValue||0,vorp:t.vorp||0,tier:t.tier||"replacement"};s(y,w,S),n&&n()},d=()=>({QB:"bg-red-500/20 text-red-400 border-red-500/30",RB:"bg-green-500/20 text-green-400 border-green-500/30",WR:"bg-blue-500/20 text-blue-400 border-blue-500/30",TE:"bg-orange-500/20 text-orange-400 border-orange-500/30",DST:"bg-purple-500/20 text-purple-400 border-purple-500/30",K:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"})[t.position]||"bg-gray-500/20 text-gray-400 border-gray-500/30",m=()=>{const w={elite:{label:"ELITE",color:"bg-gradient-to-r from-purple-600 to-pink-600 text-white"},tier1:{label:"T1",color:"bg-blue-600 text-white"},tier2:{label:"T2",color:"bg-green-600 text-white"},tier3:{label:"T3",color:"bg-yellow-600 text-white"},replacement:{label:"REP",color:"bg-gray-600 text-gray-300"}};return w[t.tier]||w.replacement},h=t.edge?t.edge>10?{text:"STRONG BUY",color:"text-green-400",bg:"bg-green-900/30",icon:i.jsx(Rc,{className:"w-3 h-3"})}:t.edge>5?{text:"BUY",color:"text-green-300",bg:"bg-green-900/20",icon:i.jsx(Vn,{className:"w-3 h-3"})}:t.edge>0?{text:"VALUE",color:"text-yellow-300",bg:"bg-yellow-900/20",icon:i.jsx(ps,{className:"w-3 h-3"})}:t.edge>-5?{text:"FAIR",color:"text-gray-300",bg:"bg-gray-800",icon:i.jsx(pi,{className:"w-3 h-3"})}:{text:"AVOID",color:"text-red-400",bg:"bg-red-900/20",icon:i.jsx(un,{className:"w-3 h-3"})}:{text:"HOLD",color:"text-gray-400",bg:"bg-gray-800",icon:i.jsx(Ta,{className:"w-3 h-3"})},p=m();return t.edge&&t.marketValue&&(t.edge/t.marketValue*100).toFixed(0),i.jsxs("div",{className:"bg-gray-900/90 backdrop-blur-md border border-gray-700/50 rounded-xl overflow-hidden shadow-2xl",children:[i.jsx("div",{className:"bg-gradient-to-r from-gray-800 to-gray-850 px-4 py-2.5 border-b border-gray-700/50",children:i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`px-2 py-1 rounded text-lg font-bold border-2 ${d()}`,children:t.position}),i.jsx("h2",{className:"text-2xl font-bold text-white",children:t.playerName}),i.jsx("span",{className:"text-gray-400 text-xl",children:t.team}),i.jsx("div",{className:`px-3 py-1.5 rounded text-lg font-bold ${p.color}`,children:p.label}),i.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 rounded-full ${h.bg} ${h.color}`,children:[h.icon,i.jsx("span",{className:"text-sm font-semibold",children:h.text})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[(()=>{const w=o.find(N=>N.id===a),S=w?w.budget-w.spent:200,y=o.filter(N=>N.id!==a),g=y.length>0?Math.round(y.reduce((N,k)=>N+(k.budget-k.spent),0)/y.length):200,x=S-g;return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ys,{className:"w-5 h-5 text-green-400"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"BUDGET"}),i.jsxs("div",{className:"text-2xl font-bold",children:[i.jsxs("span",{className:`${S>g?"text-green-400":S<g?"text-red-400":"text-gray-300"}`,children:["$",S]}),i.jsxs("span",{className:"text-lg text-gray-500 ml-2",children:["vs $",g]}),x!==0&&i.jsxs("span",{className:`text-base ml-2 ${x>0?"text-green-400":"text-red-400"}`,children:["(",x>0?"+":"",x,")"]})]})]})]})})(),i.jsxs("div",{className:"flex items-center gap-6 bg-gray-900/50 rounded px-4 py-2",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"VALUE"}),i.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",((v=t.intrinsicValue)==null?void 0:v.toFixed(0))||0]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"MARKET"}),i.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:["$",t.marketValue||0]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"EDGE"}),i.jsxs("div",{className:`text-2xl font-bold ${t.edge&&t.edge>0?"text-green-400":"text-red-400"}`,children:[t.edge&&t.edge>0?"+":"","$",Math.abs(t.edge||0).toFixed(0)]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"MAX"}),i.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:["$",t.value||0]})]})]}),l&&i.jsxs("div",{className:"flex items-center gap-2 bg-gray-900/50 rounded px-3 py-2",children:[i.jsx(cn,{className:"w-5 h-5 text-purple-400"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"PPR"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`text-2xl font-bold ${l.color}`,children:l.score.toFixed(0)}),i.jsx("div",{className:"w-12 h-2 bg-gray-700 rounded-full overflow-hidden",title:`PPR Score: ${l.score.toFixed(1)}/100`,children:i.jsx("div",{className:"h-full transition-all duration-300",style:{width:`${l.score}%`,backgroundColor:l.hexColor}})})]})]})]}),(()=>{const w=(o.length||12)*16,S=Math.round(r.length/w*100),y=S<25?"early":S<50?"early-mid":S<75?"late-mid":"late";return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(pi,{className:"w-5 h-5 text-blue-400"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"DRAFT"}),i.jsxs("div",{className:"text-2xl font-bold",children:[i.jsxs("span",{className:"text-white",children:[S,"%"]}),i.jsxs("span",{className:"text-lg text-gray-500 ml-2",children:["(",y,")"]})]})]})]})})(),i.jsxs("div",{className:"flex items-center gap-2 bg-gray-900/50 rounded px-3 py-2",children:[i.jsx(Vn,{className:"w-5 h-5 text-purple-400"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"INFLATION"}),i.jsxs("div",{className:`text-2xl font-bold ${c>10?"text-red-400":c>5?"text-orange-400":c<-10?"text-blue-400":c<-5?"text-cyan-400":"text-gray-400"}`,children:[c>0?"+":"",c,"%"]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-gray-900/50 rounded px-4 py-2",children:(()=>{const w=new Set(r.map(g=>{var x;return(x=g.player)==null?void 0:x.id}).filter(Boolean)),S=e.filter(g=>g.position===t.position&&!w.has(g.playerId)),y={elite:S.filter(g=>g.tier==="elite").length,tier1:S.filter(g=>g.tier==="tier1").length,tier2:S.filter(g=>g.tier==="tier2").length,tier3:S.filter(g=>g.tier==="tier3").length};return i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"ELITE"}),i.jsx("div",{className:`text-2xl font-bold ${y.elite>0?"text-purple-400":"text-gray-600"}`,children:y.elite})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"TIER 1"}),i.jsx("div",{className:`text-2xl font-bold ${y.tier1>0?"text-blue-400":"text-gray-600"}`,children:y.tier1})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"TIER 2"}),i.jsx("div",{className:`text-2xl font-bold ${y.tier2>0?"text-green-400":"text-gray-600"}`,children:y.tier2})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"TIER 3"}),i.jsx("div",{className:`text-2xl font-bold ${y.tier3>0?"text-yellow-400":"text-gray-600"}`,children:y.tier3})]})]})})()}),n&&i.jsx("button",{onClick:n,className:"text-gray-500 hover:text-white transition-colors p-0.5 hover:bg-gray-700 rounded",children:i.jsx(un,{className:"w-3 h-3"})})]})]})}),i.jsx("div",{className:"bg-gray-850/50 p-2",children:i.jsx("div",{className:"bg-gray-800/50 rounded-lg border border-gray-700/30 p-3",children:i.jsx(Wv,{player:t,allPlayers:e,onDraft:u})})})]})};class Sp{constructor(){Q(this,"allPlayers",[]);Q(this,"availablePlayers",[]);Q(this,"teams",[]);Q(this,"draftHistory",[]);Q(this,"pickNumber",0);Q(this,"nominationOrder",0);this.teams=Array.from({length:12},(e,n)=>({id:`team_${n}`,name:n===0?"User Team":`Team ${n+1}`,budget:200,spent:0,roster:[],strategy:n===0?"robust-rb":["balanced","stars","zero-rb"][n%3],isUser:n===0,nominations:0}))}async initialize(){let e=[];typeof window<"u"&&window.__playerValuations&&window.__playerValuations.length>0?(e=window.__playerValuations,console.log(`Loaded ${e.length} players from app data`)):e=this.createMockValuations(),this.allPlayers=e.filter(n=>n.value&&n.value>0).sort((n,s)=>(s.value||0)-(n.value||0)).slice(0,300),this.availablePlayers=[...this.allPlayers]}createMockValuations(){const e=[],n=[{playerName:"Christian McCaffrey",position:"RB",tier:"elite",value:75,marketValue:72,projectedPoints:320},{playerName:"Breece Hall",position:"RB",tier:"elite",value:68,marketValue:65,projectedPoints:305},{playerName:"Bijan Robinson",position:"RB",tier:"elite",value:65,marketValue:62,projectedPoints:300}],s=[{playerName:"Saquon Barkley",position:"RB",tier:"tier1",value:52,marketValue:48,projectedPoints:285},{playerName:"Jonathan Taylor",position:"RB",tier:"tier1",value:48,marketValue:45,projectedPoints:280},{playerName:"Jahmyr Gibbs",position:"RB",tier:"tier1",value:46,marketValue:43,projectedPoints:275},{playerName:"Travis Etienne",position:"RB",tier:"tier1",value:42,marketValue:40,projectedPoints:270}],a=[{playerName:"CeeDee Lamb",position:"WR",tier:"elite",value:55,marketValue:53,projectedPoints:290},{playerName:"Tyreek Hill",position:"WR",tier:"elite",value:52,marketValue:50,projectedPoints:285},{playerName:"Amon-Ra St. Brown",position:"WR",tier:"elite",value:50,marketValue:48,projectedPoints:280}],r=[{playerName:"Derrick Henry",position:"RB",tier:"tier2",value:38,marketValue:35,projectedPoints:250},{playerName:"James Cook",position:"RB",tier:"tier2",value:35,marketValue:32,projectedPoints:240},{playerName:"Kyren Williams",position:"RB",tier:"tier2",value:32,marketValue:30,projectedPoints:235},{playerName:"Rachaad White",position:"RB",tier:"tier2",value:28,marketValue:26,projectedPoints:230},{playerName:"Kenneth Walker",position:"RB",tier:"tier2",value:26,marketValue:24,projectedPoints:225}],o=[{playerName:"Mike Evans",position:"WR",tier:"tier2",value:38,marketValue:36,projectedPoints:255},{playerName:"Chris Olave",position:"WR",tier:"tier2",value:35,marketValue:33,projectedPoints:245},{playerName:"Nico Collins",position:"WR",tier:"tier2",value:32,marketValue:30,projectedPoints:240}],l=[{playerName:"Josh Allen",position:"QB",tier:"elite",value:35,marketValue:33,projectedPoints:380},{playerName:"Jalen Hurts",position:"QB",tier:"elite",value:32,marketValue:30,projectedPoints:370},{playerName:"Lamar Jackson",position:"QB",tier:"tier1",value:28,marketValue:26,projectedPoints:360},{playerName:"Dak Prescott",position:"QB",tier:"tier2",value:15,marketValue:13,projectedPoints:330}],c=[{playerName:"Travis Kelce",position:"TE",tier:"elite",value:35,marketValue:33,projectedPoints:220},{playerName:"T.J. Hockenson",position:"TE",tier:"tier1",value:22,marketValue:20,projectedPoints:180},{playerName:"Mark Andrews",position:"TE",tier:"tier1",value:20,marketValue:18,projectedPoints:175}],u=[{playerName:"Tony Pollard",position:"RB",tier:"tier3",value:18,marketValue:16,projectedPoints:200},{playerName:"Najee Harris",position:"RB",tier:"tier3",value:16,marketValue:14,projectedPoints:195},{playerName:"Joe Mixon",position:"RB",tier:"tier3",value:14,marketValue:12,projectedPoints:190},{playerName:"Alvin Kamara",position:"RB",tier:"tier3",value:12,marketValue:10,projectedPoints:185},{playerName:"Rhamondre Stevenson",position:"RB",tier:"tier3",value:10,marketValue:9,projectedPoints:180}],d=[{playerName:"Brian Robinson",position:"RB",tier:"tier4",value:8,marketValue:7,projectedPoints:160},{playerName:"Jaylen Warren",position:"RB",tier:"tier4",value:6,marketValue:5,projectedPoints:150},{playerName:"Tyjae Spears",position:"RB",tier:"tier4",value:5,marketValue:4,projectedPoints:140},{playerName:"Zach Charbonnet",position:"RB",tier:"tier4",value:4,marketValue:3,projectedPoints:130},{playerName:"Tank Bigsby",position:"RB",tier:"tier5",value:3,marketValue:2,projectedPoints:120},{playerName:"Roschon Johnson",position:"RB",tier:"tier5",value:2,marketValue:2,projectedPoints:110},{playerName:"Khalil Herbert",position:"RB",tier:"tier5",value:2,marketValue:1,projectedPoints:100},{playerName:"Chase Brown",position:"RB",tier:"tier5",value:1,marketValue:1,projectedPoints:90}],m=[{playerName:"Calvin Ridley",position:"WR",tier:"tier3",value:25,marketValue:23,projectedPoints:220},{playerName:"Terry McLaurin",position:"WR",tier:"tier3",value:22,marketValue:20,projectedPoints:210},{playerName:"DeAndre Hopkins",position:"WR",tier:"tier3",value:20,marketValue:18,projectedPoints:200},{playerName:"Amari Cooper",position:"WR",tier:"tier3",value:18,marketValue:16,projectedPoints:195},{playerName:"Christian Kirk",position:"WR",tier:"tier3",value:16,marketValue:14,projectedPoints:190}],f=[{playerName:"Diontae Johnson",position:"WR",tier:"tier4",value:12,marketValue:10,projectedPoints:180},{playerName:"Michael Pittman",position:"WR",tier:"tier4",value:10,marketValue:9,projectedPoints:175},{playerName:"Jaxon Smith-Njigba",position:"WR",tier:"tier4",value:8,marketValue:7,projectedPoints:170},{playerName:"Khalil Shakir",position:"WR",tier:"tier4",value:6,marketValue:5,projectedPoints:165},{playerName:"Rashid Shaheed",position:"WR",tier:"tier4",value:5,marketValue:4,projectedPoints:160},{playerName:"Josh Downs",position:"WR",tier:"tier5",value:4,marketValue:3,projectedPoints:150},{playerName:"Quentin Johnston",position:"WR",tier:"tier5",value:3,marketValue:2,projectedPoints:140},{playerName:"Romeo Doubs",position:"WR",tier:"tier5",value:2,marketValue:2,projectedPoints:130},{playerName:"Wan'Dale Robinson",position:"WR",tier:"tier5",value:2,marketValue:1,projectedPoints:120},{playerName:"Darnell Mooney",position:"WR",tier:"tier5",value:1,marketValue:1,projectedPoints:110}],h=[{playerName:"Ravens DST",position:"DST",tier:"tier1",value:3,marketValue:2,projectedPoints:120},{playerName:"Cowboys DST",position:"DST",tier:"tier2",value:2,marketValue:1,projectedPoints:110}],p=[{playerName:"Justin Tucker",position:"K",tier:"tier1",value:2,marketValue:1,projectedPoints:140},{playerName:"Harrison Butker",position:"K",tier:"tier1",value:1,marketValue:1,projectedPoints:135}];return e.push(...n,...s,...a,...r,...o,...u,...m,...l,...c,...d,...f,...h,...p),e.map((v,w)=>({...v,playerId:`player_${w}`,team:"TEAM",auctionValue:v.value,intrinsicValue:v.value,edge:(v.value||0)-(v.marketValue||0),vorp:v.value||0,maxBid:(v.value||0)*1.1,marketPrice:v.marketValue}))}getTeamNeeds(e){const n={};e.roster.forEach(r=>{n[r.position]=(n[r.position]||0)+1});const s=[],a=16-e.roster.length;return(n.QB||0)<1&&s.push("QB"),(n.RB||0)<2&&s.push("RB"),(n.WR||0)<2&&s.push("WR"),(n.TE||0)<1&&s.push("TE"),(n.DST||0)<1&&a>2&&s.push("DST"),(n.K||0)<1&&a>2&&s.push("K"),s.length===0&&((n.RB||0)<5&&s.push("RB"),(n.WR||0)<5&&s.push("WR"),(n.TE||0)<2&&s.push("TE"),(n.QB||0)<2&&s.push("QB")),s}nominatePlayer(e){if(this.availablePlayers.length===0)return null;const n=this.getTeamNeeds(e),s=this.pickNumber/192;if(e.isUser&&s<.3){const o=this.availablePlayers.filter(l=>l.position!=="RB"&&l.tier==="elite");if(o.length>0)return o[0]}if(n.length>0){const o=this.availablePlayers.filter(l=>n.includes(l.position));if(o.length>0)return o[0]}if(s>.7){const o=this.availablePlayers.filter(l=>(l.value||0)<=5);if(o.length>0)return o[Math.floor(Math.random()*Math.min(10,o.length))]}const a=Math.min(20,this.availablePlayers.length),r=Math.floor(Math.random()*a);return this.availablePlayers[r]}simulateAuction(e){let n=1,s=null;const a=e.value||1;let r=0;const o=10;for(;r<o;){let c=null,u=n;for(const d of this.teams){if(d===s)continue;const m=d.budget-d.spent,f=16-d.roster.length,h=m-(f-1);if(h<=n)continue;const v=this.getTeamNeeds(d).includes(e.position);let w=a;if(d.isUser){const g=this.buildContext(d),x=Mc.getRecommendation(e,g,n);if(x.action==="strong-buy")w=x.maxBid;else if(x.action==="consider")w=x.maxBid*.95;else continue}else{const g={};d.roster.forEach(x=>{g[x.position]=(g[x.position]||0)+1}),v&&f<=5?w=a*1.3:d.strategy==="stars"&&e.tier==="elite"?w=a*1.25:d.strategy==="zero-rb"&&e.position==="RB"?w=a*.6:d.strategy==="balanced"?w=a*(.95+Math.random()*.15):w=a*(.9+Math.random()*.25),e.position==="QB"&&(g.QB||0)===0&&(w*=1.15),e.position==="TE"&&(g.TE||0)===0&&e.tier!=="replacement"&&(w*=1.1)}const S=n<10?1:n<30?2:3,y=Math.min(n+S,Math.floor(w),h);y>u&&(u=y,c=d)}if(c)n=u,s=c,r++;else break}if(s)return{winner:s,price:n};const l=this.teams.filter(c=>c.roster.length<16&&c.budget-c.spent>=16-c.roster.length).sort((c,u)=>{const d=this.getTeamNeeds(c),m=this.getTeamNeeds(u);return d.includes(e.position)&&!m.includes(e.position)?-1:!d.includes(e.position)&&m.includes(e.position)?1:u.budget-u.spent-(c.budget-c.spent)});return l.length>0?{winner:l[0],price:1}:null}buildContext(e){return{myTeam:{id:e.id,name:e.name,budget:e.budget-e.spent,players:e.roster,isUser:e.isUser,maxBid:e.budget-e.spent-(16-e.roster.length-1),nominations:e.nominations},allTeams:this.teams.map(n=>({id:n.id,name:n.name,budget:n.budget-n.spent,players:n.roster,isUser:n.isUser,maxBid:n.budget-n.spent-(16-n.roster.length-1),nominations:n.nominations})),draftHistory:this.draftHistory,availablePlayers:this.availablePlayers,currentBid:0,totalBudget:200,rosterRequirements:{QB:{min:1,max:2,optimal:1},RB:{min:2,max:6,optimal:5},WR:{min:2,max:6,optimal:6},TE:{min:1,max:3,optimal:1},DST:{min:1,max:2,optimal:1},K:{min:1,max:2,optimal:1},FLEX:{count:1,eligiblePositions:["RB","WR","TE"]},BENCH:6}}}awardPlayer(e,n,s){const a={id:n.playerId||`${n.playerName}_${n.team}`,name:n.playerName,position:n.position,team:n.team,playerId:n.playerId,projectedPoints:n.projectedPoints||0,auctionValue:n.auctionValue||0,marketValue:n.marketValue||0,vorp:n.vorp||0,tier:n.tier||"replacement"};e.roster.push(a),e.spent+=s,this.draftHistory.push({pickNumber:++this.pickNumber,teamId:e.id,player:a,price:s,timestamp:new Date}),this.availablePlayers=this.availablePlayers.filter(r=>r.playerId!==n.playerId)}async runDraft(){for(;this.teams.some(e=>e.roster.length<16)&&this.availablePlayers.length>0;){const e=this.teams[this.nominationOrder%12],n=this.nominatePlayer(e);if(!n)break;const s=this.simulateAuction(n);s&&this.awardPlayer(s.winner,n,s.price),this.nominationOrder++}return this.analyzeResults()}analyzeResults(){const e=this.teams.find(h=>h.isUser),n={},s={};let a=0;e.roster.forEach(h=>{n[h.position]=(n[h.position]||0)+1,a+=h.projectedPoints||0;const p=this.draftHistory.find(v=>v.player.id===h.id);p&&(s[h.position]=(s[h.position]||0)+p.price)});const r=s.RB||0,o=e.spent>0?r/e.spent*100:0,l=(n.QB||0)>=1&&(n.RB||0)>=2&&(n.WR||0)>=2&&(n.TE||0)>=1&&(n.DST||0)>=1&&(n.K||0)>=1,c=e.spent>=190,u=o>=50,d=e.roster.filter(h=>h.position==="RB"&&(h.tier==="elite"||h.tier==="tier1")),m=this.teams.map(h=>{let p=0;return h.roster.forEach(v=>p+=v.projectedPoints||0),{team:h,points:p}});m.sort((h,p)=>p.points-h.points);const f=m.findIndex(h=>h.team.isUser)+1;return{userTeam:e,allTeams:this.teams,draftHistory:this.draftHistory,analysis:{meetsRequirements:l,budgetEfficient:c,rbHeavy:u,eliteRBCount:d.length,totalSpent:e.spent,rbSpend:r,rbSpendPercent:o,projectedPoints:a,leagueRank:f,positionCounts:n,positionSpend:s}}}}async function wp(t=3){const e=[];for(let n=0;n<t;n++){console.log(`Running simulation ${n+1}...`);const s=new Sp;await s.initialize();const a=await s.runDraft();e.push(a)}return e}async function Np(){console.log(`Starting draft simulations test...
`);const t=await wp(3),e={rbSpendTarget:{min:50,max:60},totalBudgetTarget:{min:190},rbCountTarget:{min:5,max:6},wrCountTarget:{min:6,max:7},eliteRBTarget:{min:2}};console.log(`========== SIMULATION RESULTS vs GUIDELINES ==========
`),console.log("GUIDELINES FROM strat.md:"),console.log("- 50-60% budget on 2-3 elite RBs"),console.log("- 70-80% on top 3-4 players total"),console.log("- 5-6 total RBs, 6-7 total WRs"),console.log("- Spend 95%+ of budget ($190+)"),console.log(`- Target 1 Tier 1 elite + 1 Tier 2 high-end RB
`);const n={budgetSpent:[],rbSpendPercent:[],eliteRBCount:[],leagueRank:[],rbCount:[],wrCount:[]};t.forEach((d,m)=>{console.log(`
============ SIMULATION ${m+1} ============`);const f=d.analysis,h=f.positionCounts;n.budgetSpent.push(f.totalSpent),n.rbSpendPercent.push(f.rbSpendPercent),n.eliteRBCount.push(f.eliteRBCount),n.leagueRank.push(f.leagueRank),n.rbCount.push(h.RB||0),n.wrCount.push(h.WR||0);const p={budgetEfficient:f.totalSpent>=e.totalBudgetTarget.min,rbSpendInRange:f.rbSpendPercent>=e.rbSpendTarget.min&&f.rbSpendPercent<=e.rbSpendTarget.max+10,rbCountGood:(h.RB||0)>=e.rbCountTarget.min&&(h.RB||0)<=e.rbCountTarget.max,wrCountGood:(h.WR||0)>=e.wrCountTarget.min&&(h.WR||0)<=e.wrCountTarget.max,eliteRBsGood:f.eliteRBCount>=e.eliteRBTarget.min,meetsRequirements:f.meetsRequirements},v=d.draftHistory.filter(k=>k.teamId===d.userTeam.id).sort((k,T)=>T.price-k.price),w=v.slice(0,4).reduce((k,T)=>k+T.price,0),S=f.totalSpent>0?w/f.totalSpent*100:0;console.log(`
📊 KEY METRICS:`),console.log(`Budget: $${f.totalSpent}/200 (${(f.totalSpent/200*100).toFixed(0)}%) ${p.budgetEfficient?"✅":"❌"}`),console.log(`RB Spend: $${f.rbSpend} (${f.rbSpendPercent.toFixed(1)}%) ${p.rbSpendInRange?"✅":"❌"} [Target: 50-60%]`),console.log(`Top 4 Players: $${w} (${S.toFixed(1)}%) ${S>=70?"✅":"⚠️"} [Target: 70-80%]`),console.log(`
📈 ROSTER COMPOSITION:`),console.log(`RBs: ${h.RB||0} ${p.rbCountGood?"✅":"❌"} [Target: 5-6]`),console.log(`WRs: ${h.WR||0} ${p.wrCountGood?"✅":"❌"} [Target: 6-7]`),console.log(`Elite/Tier1 RBs: ${f.eliteRBCount} ${p.eliteRBsGood?"✅":"❌"} [Target: 2-3]`),console.log(`
🏆 COMPETITIVE POSITION:`),console.log(`League Rank: #${f.leagueRank}/12 ${f.leagueRank<=3?"✅":"⚠️"}`),console.log(`Projected Points: ${f.projectedPoints.toFixed(0)}`),console.log(`
👥 FULL POSITION BREAKDOWN:`),console.log(`QB: ${h.QB||0}, RB: ${h.RB||0}, WR: ${h.WR||0}, TE: ${h.TE||0}, DST: ${h.DST||0}, K: ${h.K||0}`),console.log(`
💰 TOP 5 PLAYERS:`),v.slice(0,5).forEach((k,T)=>{const j=k.player;console.log(`  ${T+1}. ${j.name} (${j.position}/${j.tier}) - $${k.price}`)});const g=v.filter(k=>k.player.position==="RB"&&(k.player.tier==="elite"||k.player.tier==="tier1"));g.length>0&&(console.log(`
🌟 ELITE RBs ACQUIRED:`),g.forEach(k=>{console.log(`  ${k.player.name} (${k.player.tier}) - $${k.price}`)}));const x=Object.values(p).filter(k=>k).length,N=Object.values(p).length;console.log(`
📋 OVERALL: ${x}/${N} checks passed`),x===N?console.log("✅ EXCELLENT - Meets all guidelines!"):x>=N-1?console.log("👍 GOOD - Minor adjustments needed"):console.log("⚠️  NEEDS IMPROVEMENT - Multiple areas off target")}),console.log(`

========== AVERAGES ACROSS ALL SIMULATIONS ==========
`);const s=d=>d.reduce((m,f)=>m+f,0)/d.length,a=s(n.budgetSpent),r=s(n.rbSpendPercent),o=s(n.eliteRBCount),l=s(n.leagueRank),c=s(n.rbCount),u=s(n.wrCount);console.log(`Average Budget Spent: $${a.toFixed(0)} (${(a/200*100).toFixed(0)}%)`),console.log(`Average RB Spend: ${r.toFixed(1)}% ${r>=50&&r<=60?"✅":"❌"} [Target: 50-60%]`),console.log(`Average Elite RBs: ${o.toFixed(1)} ${o>=2?"✅":"❌"} [Target: 2-3]`),console.log(`Average RB Count: ${c.toFixed(1)} ${c>=5&&c<=6?"✅":"❌"} [Target: 5-6]`),console.log(`Average WR Count: ${u.toFixed(1)} ${u>=6&&u<=7?"✅":"❌"} [Target: 6-7]`),console.log(`Average League Rank: ${l.toFixed(1)} ${l<=3?"✅":"⚠️"} [Target: Top 3]`),console.log(`

========== RECOMMENDATIONS ==========
`),r<50?(console.log("❗ RB spending too low - Need to be more aggressive on elite RBs"),console.log("   - Increase bonuses for elite/tier1 RBs"),console.log("   - Consider raising max bid thresholds early in draft")):r>70?(console.log("❗ RB spending too high - May lack balance"),console.log("   - Ensure WR depth is maintained"),console.log("   - Set harder caps on non-elite RBs")):console.log("✅ RB spending in good range"),o<2&&(console.log("❗ Not acquiring enough elite RBs"),console.log("   - Increase aggressiveness on tier1/elite RBs"),console.log("   - Consider nominating non-RB elites early to drain budgets")),c<5&&(console.log("❗ Not enough RB depth"),console.log("   - Target more value RBs ($5-15 range)")),u<6&&(console.log("❗ Not enough WR depth"),console.log("   - Ensure filling WR spots after RB core secured")),l>3&&(console.log("⚠️  League competitiveness could be better"),console.log("   - May need to target higher ceiling players")),console.log(`
✅ Test complete!`)}typeof window<"u"&&(window.testSimulations=Np);async function kl(){console.log("=".repeat(80)),console.log("RUNNING 2 DETAILED DRAFT SIMULATIONS WITH FULL ROSTERS"),console.log("=".repeat(80)),console.log(`
Strategy: Robust RB (50-60% on RBs, 70-80% on top 3-4 players)`),console.log(`Targets: 5-6 RBs, 6-7 WRs, 2-3 elite RBs, $190+ spent
`),window.__playerValuations&&window.__playerValuations.length>0?console.log(`✅ Using real player data: ${window.__playerValuations.length} players loaded`):console.warn("⚠️ WARNING: Using mock data. For best results, wait for app data to load first.");for(let e=1;e<=2;e++){console.log(`
`+"#".repeat(80)),console.log(`SIMULATION ${e}`),console.log("#".repeat(80));const n=new Sp;await n.initialize();const s=await n.runDraft(),a=s.userTeam,r=s.analysis,o=r.positionCounts,l=s.draftHistory.filter(x=>x.teamId===a.id).sort((x,N)=>N.price-x.price),c=l.slice(0,4).reduce((x,N)=>x+N.price,0),u=r.totalSpent>0?c/r.totalSpent*100:0;console.log(`
`+"=".repeat(60)),console.log("ROSTER SUMMARY"),console.log("=".repeat(60)),console.log(`
Budget: $${r.totalSpent}/$200 (${(r.totalSpent/200*100).toFixed(0)}% spent)`),console.log(`Roster Size: ${a.roster.length}/16 players`),console.log(`League Rank: #${r.leagueRank}/12`),console.log(`Projected Points: ${r.projectedPoints.toFixed(0)}`),console.log(`
📊 KEY METRICS:`),console.log(`• RB Investment: $${r.rbSpend} (${r.rbSpendPercent.toFixed(1)}%) ${r.rbSpendPercent>=50&&r.rbSpendPercent<=60?"✅":r.rbSpendPercent>=45&&r.rbSpendPercent<=65?"⚠️":"❌"} [Target: 50-60%]`),console.log(`• Top 4 Players: $${c} (${u.toFixed(1)}%) ${u>=70?"✅":u>=60?"⚠️":"❌"} [Target: 70-80%]`),console.log(`• Elite/Tier1 RBs: ${r.eliteRBCount} ${r.eliteRBCount>=2?"✅":r.eliteRBCount===1?"⚠️":"❌"} [Target: 2-3]`),console.log(`
📈 POSITION BREAKDOWN:`),console.log(`• QB:  ${(o.QB||0).toString().padStart(2)} players | $${(r.positionSpend.QB||0).toString().padStart(3)}`),console.log(`• RB:  ${(o.RB||0).toString().padStart(2)} players | $${(r.positionSpend.RB||0).toString().padStart(3)} ${(o.RB||0)>=5&&(o.RB||0)<=6?"✅":"⚠️"} [Target: 5-6]`),console.log(`• WR:  ${(o.WR||0).toString().padStart(2)} players | $${(r.positionSpend.WR||0).toString().padStart(3)} ${(o.WR||0)>=6&&(o.WR||0)<=7?"✅":"⚠️"} [Target: 6-7]`),console.log(`• TE:  ${(o.TE||0).toString().padStart(2)} players | $${(r.positionSpend.TE||0).toString().padStart(3)}`),console.log(`• DST: ${(o.DST||0).toString().padStart(2)} players | $${(r.positionSpend.DST||0).toString().padStart(3)}`),console.log(`• K:   ${(o.K||0).toString().padStart(2)} players | $${(r.positionSpend.K||0).toString().padStart(3)}`),console.log(`
`+"=".repeat(60)),console.log("COMPLETE 16-PLAYER ROSTER (sorted by price)"),console.log("=".repeat(60)),console.log(`
#  | Player Name                  | Pos | Tier       | Price | Pts  `),console.log("-".repeat(70)),l.forEach((x,N)=>{const k=x.player,T=(N+1).toString().padStart(2),j=k.name.substring(0,28).padEnd(28),_=k.position.padEnd(3),C=(k.tier||"unknown").substring(0,10).padEnd(10),E=("$"+x.price).padStart(5),M=k.projectedPoints.toFixed(0).padStart(4),B=k.position==="RB"&&(k.tier==="elite"||k.tier==="tier1")?"⭐":"  ";console.log(`${T} ${B}| ${j} | ${_} | ${C} | ${E} | ${M}`)}),console.log(`
`+"=".repeat(60)),console.log("ROSTER BY POSITION"),console.log("=".repeat(60)),["QB","RB","WR","TE","DST","K"].forEach(x=>{const N=l.filter(k=>k.player.position===x);N.length>0&&(console.log(`
${x} (${N.length}):`),N.forEach(k=>{const T=k.player.tier==="elite"?"⭐ELITE":k.player.tier==="tier1"?"🔥TIER1":k.player.tier==="tier2"?"TIER2":k.player.tier==="tier3"?"TIER3":k.player.tier||"unknown";console.log(`  • ${k.player.name.padEnd(28)} - $${k.price.toString().padStart(3)} - ${T}`)}))}),console.log(`
`+"=".repeat(60)),console.log("SUGGESTED STARTING LINEUP"),console.log("=".repeat(60));const m=l.filter(x=>x.player.position==="QB").slice(0,1),f=l.filter(x=>x.player.position==="RB").slice(0,2),h=l.filter(x=>x.player.position==="WR").slice(0,2),p=l.filter(x=>x.player.position==="TE").slice(0,1),v=l.filter(x=>["RB","WR","TE"].includes(x.player.position)&&!f.includes(x)&&!h.includes(x)&&!p.includes(x)).slice(0,1),w=l.filter(x=>x.player.position==="DST").slice(0,1),S=l.filter(x=>x.player.position==="K").slice(0,1);console.log(`
QB:  `+(m[0]?`${m[0].player.name} ($${m[0].price})`:"MISSING")),console.log("RB1: "+(f[0]?`${f[0].player.name} ($${f[0].price})`:"MISSING")),console.log("RB2: "+(f[1]?`${f[1].player.name} ($${f[1].price})`:"MISSING")),console.log("WR1: "+(h[0]?`${h[0].player.name} ($${h[0].price})`:"MISSING")),console.log("WR2: "+(h[1]?`${h[1].player.name} ($${h[1].price})`:"MISSING")),console.log("TE:  "+(p[0]?`${p[0].player.name} ($${p[0].price})`:"MISSING")),console.log("FLX: "+(v[0]?`${v[0].player.name} (${v[0].player.position}) ($${v[0].price})`:"MISSING")),console.log("DST: "+(w[0]?`${w[0].player.name} ($${w[0].price})`:"MISSING")),console.log("K:   "+(S[0]?`${S[0].player.name} ($${S[0].price})`:"MISSING"));const y=[...m,...f,...h,...p,...v,...w,...S].reduce((x,N)=>x+((N==null?void 0:N.player.projectedPoints)||0),0);console.log(`
Projected Starting Lineup Points: ${y.toFixed(0)}`);const g=(o.QB||0)>=1&&(o.RB||0)>=2&&(o.WR||0)>=2&&(o.TE||0)>=1&&(o.DST||0)>=1&&(o.K||0)>=1;console.log(`
`+"=".repeat(60)),console.log("FINAL ASSESSMENT"),console.log("=".repeat(60)),console.log(`
✓ Meets minimum position requirements: ${g?"✅ YES":"❌ NO"}`),console.log(`✓ Budget efficiency (>95% spent): ${r.totalSpent>=190?"✅ YES":"❌ NO"}`),console.log(`✓ RB-heavy strategy (50-60% on RBs): ${r.rbSpendPercent>=50&&r.rbSpendPercent<=60?"✅ YES":r.rbSpendPercent>=45&&r.rbSpendPercent<=65?"⚠️ CLOSE":"❌ NO"}`),console.log(`✓ Elite talent acquired (2+ elite RBs): ${r.eliteRBCount>=2?"✅ YES":"❌ NO"}`),console.log(`✓ Proper depth (5-6 RBs, 6-7 WRs): ${o.RB>=5&&o.RB<=6&&o.WR>=6&&o.WR<=7?"✅ YES":"⚠️ PARTIAL"}`)}console.log(`
`+"=".repeat(80)),console.log("SIMULATION COMPLETE"),console.log("=".repeat(80))}typeof window<"u"&&(window.runDetailedSimulations=kl);const Hv=()=>{const[t,e]=D.useState([]),[n,s]=D.useState(!1);D.useEffect(()=>{window.testSimulations=Np,window.runDetailedSimulations=kl,console.log("Test functions available:"),console.log("• testSimulations() - Run 3 simulations with analysis"),console.log("• runDetailedSimulations() - Run 2 simulations with full rosters")},[]);const a=async()=>{s(!0);try{await kl();const r=await wp(2);e(r)}catch(r){console.error("Simulation failed:",r)}s(!1)};return i.jsxs("div",{className:"p-4 bg-gray-900 text-white rounded-lg",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Draft Simulation Tester"}),i.jsx("button",{onClick:a,disabled:n,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg disabled:opacity-50",children:n?"Running Simulations...":"Run 2 Detailed Simulations (Check Console)"}),i.jsxs("div",{className:"mt-4 text-sm text-gray-400",children:[i.jsx("p",{children:"📝 Press F12 to open the console and see detailed roster output"}),i.jsx("p",{children:"📊 Full 16-player rosters will be displayed with position breakdown"})]}),t.length>0&&i.jsxs("div",{className:"mt-6 space-y-6",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Strategy Guidelines Comparison"}),i.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[i.jsx("h4",{className:"font-bold mb-2",children:"Target from strat.md:"}),i.jsxs("ul",{className:"text-sm space-y-1",children:[i.jsx("li",{children:"✓ 50-60% budget on 2-3 elite RBs (70-80% on top 3-4 players)"}),i.jsx("li",{children:"✓ 1 Tier 1 elite RB ($45-52)"}),i.jsx("li",{children:"✓ 1 Tier 2 high-end RB ($35-43)"}),i.jsx("li",{children:"✓ Total: 5-6 RBs, 6-7 WRs"}),i.jsx("li",{children:"✓ Spend 95%+ of budget ($190+)"})]})]}),t.map((r,o)=>i.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[i.jsxs("h4",{className:"text-lg font-bold mb-3",children:["Simulation ",o+1]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Budget Spent:"}),i.jsxs("span",{className:`ml-2 ${r.analysis.budgetEfficient?"text-green-400":"text-red-400"}`,children:["$",r.analysis.totalSpent,"/200"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"RB Spend:"}),i.jsxs("span",{className:`ml-2 ${r.analysis.rbHeavy?"text-green-400":"text-red-400"}`,children:["$",r.analysis.rbSpend," (",r.analysis.rbSpendPercent.toFixed(1),"%)"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Elite RBs:"}),i.jsx("span",{className:`ml-2 ${r.analysis.eliteRBCount>=2?"text-green-400":"text-yellow-400"}`,children:r.analysis.eliteRBCount})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"League Rank:"}),i.jsxs("span",{className:`ml-2 ${r.analysis.leagueRank<=3?"text-green-400":"text-yellow-400"}`,children:["#",r.analysis.leagueRank,"/12"]})]})]}),i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx("span",{className:"text-gray-400",children:"Position Counts:"}),i.jsxs("div",{className:"ml-4",children:["QB: ",r.analysis.positionCounts.QB||0," | RB: ",r.analysis.positionCounts.RB||0," | WR: ",r.analysis.positionCounts.WR||0," | TE: ",r.analysis.positionCounts.TE||0," | DST: ",r.analysis.positionCounts.DST||0," | K: ",r.analysis.positionCounts.K||0]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("span",{className:r.analysis.meetsRequirements?"text-green-400":"text-red-400",children:[r.analysis.meetsRequirements?"✓":"✗"," Meets Requirements"]}),i.jsxs("span",{className:r.analysis.budgetEfficient?"text-green-400":"text-red-400",children:[r.analysis.budgetEfficient?"✓":"✗"," Budget Efficient"]}),i.jsxs("span",{className:r.analysis.rbHeavy?"text-green-400":"text-red-400",children:[r.analysis.rbHeavy?"✓":"✗"," RB Heavy (50%+)"]})]})]}),i.jsxs("details",{className:"mt-3",children:[i.jsx("summary",{className:"cursor-pointer text-blue-400 hover:text-blue-300",children:"View Full Roster"}),i.jsx("div",{className:"mt-2 text-xs space-y-1",children:r.userTeam.roster.sort((l,c)=>{const u=r.draftHistory.find(m=>m.player.id===l.id),d=r.draftHistory.find(m=>m.player.id===c.id);return((d==null?void 0:d.price)||0)-((u==null?void 0:u.price)||0)}).map(l=>{const c=r.draftHistory.find(u=>u.player.id===l.id);return i.jsxs("div",{children:[l.name," (",l.position,"/",l.tier,") - $",(c==null?void 0:c.price)||0]},l.id)})})]})]},o))]})]})};function Uv(){const[t,e]=D.useState(!0),[n,s]=D.useState(null),[a,r]=D.useState([]),[o,l]=D.useState([]),[c,u]=D.useState(null),[d,m]=D.useState(!1),[f,h]=D.useState(!1),[p,v]=D.useState(!1),[w,S]=D.useState(!1),[y,g]=D.useState(""),[x,N]=D.useState(!1),[k,T]=D.useState([]),[j,_]=D.useState(-1),[C,E]=D.useState({checked:!1,passed:!1,message:"Checking..."}),{isDraftActive:M,initializeDraft:W,updatePlayerValuations:B,draftHistory:H,myTeamId:J,teams:U,selectedPlayer:I,setSelectedPlayer:A}=pt();D.useEffect(()=>{O(),window.__playerValuations=a},[]),D.useEffect(()=>{window.__playerValuations=a},[a]),D.useEffect(()=>{if(console.log("[Valuation Update Trigger]",{baseValuationsCount:o.length,isDynamicMode:w,draftHistoryLength:H.length,loading:t,teamsLength:U.length}),!o.length||t){console.log("[Valuation Update] Skipping - no base valuations or loading");return}if(kn.setDynamicMode(w),w){console.log("[Dynamic Mode Active] Building context...",{teamsLength:U.length,draftHistoryLength:H.length});const R=new Set(H.map(ee=>{var te;return(te=ee.player)==null?void 0:te.id}).filter(Boolean)),b=U.length||12,$=b*200,L=H.reduce((ee,te)=>ee+(te.price||0),0),q=$-L,Y={},K={QB:b*1,RB:b*3,WR:b*3,TE:b*1,DST:b*1,K:b*1};H.forEach(ee=>{var te;(te=ee.player)!=null&&te.position&&(Y[ee.player.position]=(Y[ee.player.position]||0)+1,K[ee.player.position]=Math.max(0,(K[ee.player.position]||0)-1))});const X=new Map;if(U.length>0)U.forEach(ee=>{const te=H.filter(ce=>ce.team===ee.id).reduce((ce,re)=>ce+(re.price||0),0);X.set(ee.id,200-te)});else for(let ee=0;ee<b;ee++)X.set(`team_${ee}`,200);const de=H.slice(-5).map(ee=>{var ce,re;const te=o.find(Ae=>{var me;return Ae.playerId===((me=ee.player)==null?void 0:me.id)});return{playerId:((ce=ee.player)==null?void 0:ce.id)||"",actualPrice:ee.price||0,expectedPrice:(te==null?void 0:te.auctionValue)||ee.price||0,position:((re=ee.player)==null?void 0:re.position)||""}}),Z={totalBudget:$,moneySpent:L,moneyRemaining:q,playersPickedCount:H.length,playersRemainingCount:b*16-H.length,positionsFilled:Y,positionsNeeded:K,recentPicks:de,teamBudgets:X};console.log("[Before getDynamicValuations]",{contextMoneyRemaining:Z.moneyRemaining,contextPlayersRemaining:Z.playersRemainingCount,draftedIdsSize:R.size,isDynamicMode:kn.isDynamic()});const oe=kn.getDynamicValuations(Z,R);if(oe.length>0&&o.length>0){const ee=oe.find(ce=>ce.playerName==="Bijan Robinson")||oe[0],te=o.find(ce=>ce.playerId===ee.playerId);console.log("[Dynamic Values Update]",{player:ee.playerName,baseValue:(te==null?void 0:te.value)||(te==null?void 0:te.auctionValue),dynamicValue:ee.value||ee.auctionValue,samplePlayerObject:ee,inflation:Z.moneyRemaining>0?(Z.moneyRemaining/(oe.length*10)).toFixed(2):0,draftedCount:R.size})}else console.log("[Dynamic Values Update] No values to compare",{dynamicValsLength:oe.length,baseValuationsLength:o.length});r(oe),B(oe)}else r(o),B(o)},[w,H,o,U,t,B]),D.useEffect(()=>{if(!M&&!t)try{W({teams:12,budget:200,scoring:"PPR",rosterPositions:[{position:"QB",required:1},{position:"RB",required:2},{position:"WR",required:2},{position:"TE",required:1},{position:"FLEX",required:1},{position:"DST",required:1},{position:"K",required:1},{position:"BE",required:7}]})}catch(R){console.error("Failed to initialize draft:",R)}},[M,t]);const O=async()=>{try{e(!0);const R=await Ec.getData(),{valuations:b,summary:$}=yi.processPlayers(R.projections,R.adpData,void 0,R.playerAdvanced),L=b.map(Y=>{const K=Ac.calculatePPRScore(Y);return{...Y,pprMetrics:K}});r(L),l(L),u($),B(L),kn.setBaseValuations(b);const q=Dc.verifyDataIntegrity(R.projections,b);E({checked:!0,passed:q.passed,message:q.passed?"✓":"⚠"}),ge.success("Calibrated valuations loaded successfully!")}catch(R){console.error("[AppCalibrated] Error loading data:",R),s(R instanceof Error?R.message:"Failed to load data"),ge.error("Failed to load data")}finally{e(!1)}},V=async()=>{await O()};return t?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-400 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Loading"})]})}):n?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-red-900 to-gray-900 flex items-center justify-center",children:i.jsxs("div",{className:"bg-red-900/50 border border-red-500 rounded-lg p-6 max-w-md",children:[i.jsx(Ln,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Error Loading Data"}),i.jsx("p",{className:"text-red-200 mb-4",children:n}),i.jsxs("button",{onClick:O,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 mx-auto",children:[i.jsx(Uf,{className:"w-4 h-4"}),"Retry"]})]})}):i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900",children:[i.jsx(tp,{position:"top-right"}),i.jsx("div",{className:"bg-gradient-to-r from-purple-900/50 to-pink-900/50 border-b border-purple-600/30 py-2",children:i.jsxs("div",{className:"flex items-center justify-center gap-3 text-purple-300 text-sm font-medium animate-pulse",children:[i.jsx("span",{children:"🧪"}),i.jsx("span",{children:"EXPERIMENTAL BUILD"}),i.jsx("span",{children:"🚀"})]})}),i.jsx("header",{className:"bg-black/50 backdrop-blur-lg border-b border-purple-500/30 z-50 flex-shrink-0",children:i.jsx("div",{className:"px-6 lg:px-8 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"FFTool"}),i.jsxs("div",{className:"relative w-64",children:[i.jsx("input",{type:"text",value:y,onChange:R=>{const b=R.target.value;if(g(b),_(-1),b.trim()){const $=a.filter(L=>{var q,Y;return((q=L.playerName)==null?void 0:q.toLowerCase().includes(b.toLowerCase()))||((Y=L.team)==null?void 0:Y.toLowerCase().includes(b.toLowerCase()))}).slice(0,10);T($),N($.length>0)}else N(!1),T([])},onKeyDown:R=>{if(x)if(R.key==="ArrowDown")R.preventDefault(),_(b=>b<k.length-1?b+1:b);else if(R.key==="ArrowUp")R.preventDefault(),_(b=>b>0?b-1:-1);else if(R.key==="Enter"&&j>=0){R.preventDefault();const b=k[j];A(b),g(""),N(!1),T([]),_(-1)}else R.key==="Escape"&&(N(!1),_(-1))},onFocus:()=>{y.trim()&&k.length>0&&N(!0)},onBlur:()=>{setTimeout(()=>N(!1),200)},placeholder:"Search players...",className:"w-full px-3 py-1.5 pr-8 text-sm bg-gray-800 border border-gray-700 rounded-lg text-gray-200 placeholder-gray-400 focus:outline-none focus:border-blue-400"}),y&&i.jsx("button",{onClick:()=>{g(""),N(!1),T([]),_(-1)},className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white z-10",children:i.jsx(un,{className:"w-3 h-3"})}),x&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-gray-700 rounded-lg shadow-xl max-h-80 overflow-y-auto z-50",children:k.map((R,b)=>{const $=()=>({QB:"text-red-400",RB:"text-green-400",WR:"text-blue-400",TE:"text-orange-400",DST:"text-purple-400",K:"text-yellow-400"})[R.position]||"text-gray-400";return i.jsxs("div",{onClick:()=>{A(R),g(""),N(!1),T([]),_(-1)},className:`px-3 py-2 cursor-pointer transition-colors flex items-center justify-between ${b===j?"bg-gray-700":"hover:bg-gray-700/50"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:`text-xs font-bold ${$()}`,children:R.position}),i.jsx("span",{className:"text-sm font-medium text-white",children:R.playerName}),i.jsx("span",{className:"text-xs text-gray-400",children:R.team})]}),i.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[i.jsxs("span",{className:"text-green-400 font-semibold",children:["$",R.auctionValue]}),i.jsxs("span",{className:"text-gray-500",children:["Rank #",R.rank||"-"]})]})]},R.playerId)})})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("button",{onClick:()=>S(!w),className:`px-3 py-1 rounded-lg text-sm flex items-center gap-2 transition-colors ${w?"bg-purple-600 hover:bg-purple-700 text-white":"bg-gray-700 hover:bg-gray-600 text-white"}`,title:w?"Dynamic valuations active":"Using static valuations",children:[i.jsx(ps,{className:"w-4 h-4"}),w?"Dynamic":"Static",w&&H.length>0&&i.jsxs("span",{className:"text-xs bg-purple-800 px-1 rounded",children:[H.length," picks"]})]}),i.jsxs("button",{onClick:()=>h(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-lg text-sm flex items-center gap-2",title:"Adjust valuation settings",children:[i.jsx(_c,{className:"w-4 h-4"}),"Settings"]}),i.jsxs("button",{onClick:()=>v(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded-lg text-sm flex items-center gap-2",title:"Run draft simulations",children:[i.jsx(ps,{className:"w-4 h-4"}),"Test Simulations"]}),i.jsxs("button",{onClick:()=>m(!0),className:"bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded-lg text-sm flex items-center gap-2",title:"Learn how values are calculated",children:[i.jsx(Ya,{className:"w-4 h-4"}),"Methodology"]}),C.checked&&i.jsx("div",{className:`px-3 py-1 rounded-lg border ${C.passed?"bg-green-900/50 border-green-500":"bg-red-900/50 border-red-500"}`,title:C.passed?"Data integrity verified - All teams present":"Data integrity check failed - Some teams missing",children:i.jsx("span",{className:`text-sm font-medium ${C.passed?"text-green-400":"text-red-400"}`,children:C.message})})]})]})})}),i.jsx("main",{className:"px-2 sm:px-4 md:px-6 lg:px-8 py-4 md:py-6 max-w-full overflow-x-hidden",children:c&&i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx(qv,{player:I,allPlayers:a,onClose:()=>A(null)}),i.jsxs("div",{className:"grid grid-cols-12 gap-2 lg:gap-4",children:[i.jsxs("div",{className:"col-span-12 xl:col-span-2 lg:col-span-3 md:col-span-4 space-y-4",children:[i.jsx(mp,{teamId:J}),i.jsx(hp,{remainingBudget:200-H.reduce((R,b)=>b.team===J?R+(b.price||0):R,0),spotsLeft:16-H.filter(R=>R.team===J).length,myRoster:H.filter(R=>R.team===J).map(R=>R.player),valuations:a,draftHistory:H})]}),i.jsx("div",{className:"col-span-12 xl:col-span-8 lg:col-span-9 md:col-span-8",children:i.jsx("div",{className:"w-full overflow-hidden",children:i.jsx(Fv,{players:a,searchQuery:y,onSearchChange:g,onPlayerSelect:R=>{console.log("Player selected:",R),A(R)}})})}),i.jsxs("div",{className:"col-span-12 xl:col-span-2 lg:col-span-12 space-y-4",children:[i.jsx(vp,{valuations:a}),i.jsx(pp,{valuations:a,draftHistory:H,onPriceUpdate:(R,b)=>{yi.updateMarketPrice(R,b)}}),i.jsx(fp,{}),i.jsx(xp,{})]})]})]})}),i.jsx(gp,{isOpen:d,onClose:()=>m(!1)}),i.jsx(yp,{isOpen:f,onClose:()=>h(!1),onApply:V}),p&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-gray-900 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto relative",children:[i.jsx("button",{onClick:()=>v(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:i.jsx(un,{className:"w-6 h-6"})}),i.jsx(Hv,{})]})})]})}function Qv(){const[t,e]=D.useState(!0);return i.jsxs("div",{className:"min-h-screen bg-gray-950",children:[i.jsx("div",{className:"fixed top-4 right-4 z-50",children:i.jsx("button",{onClick:()=>e(!t),className:`
            flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-300
            ${t?"bg-purple-600 text-white hover:bg-purple-700 shadow-lg shadow-purple-600/20":"bg-gray-800 text-gray-300 hover:bg-gray-700 border border-gray-700"}
          `,children:t?i.jsxs(i.Fragment,{children:[i.jsx(Tg,{className:"w-4 h-4"}),i.jsx("span",{children:"Experimental"})]}):i.jsxs(i.Fragment,{children:[i.jsx(Vg,{className:"w-4 h-4"}),i.jsx("span",{children:"Stable"})]})})}),t&&i.jsx("div",{className:"fixed top-4 left-4 z-50",children:i.jsx("div",{className:"bg-purple-600/10 border border-purple-600/30 text-purple-400 px-3 py-1 rounded-full text-sm font-medium",children:"🧪 Experimental Mode"})}),i.jsx("div",{className:"transition-opacity duration-300",children:t?i.jsx(Uv,{}):i.jsx($v,{})})]})}async function jp(){P.info("=".repeat(60)),P.info("QUICK DATA PARSING TEST - KEY FILES"),P.info("=".repeat(60));const t=[{path:"/canonical_data/adp/adp0_2025.csv",name:"ADP Data",expectedColumns:["Overall Rank","Full Name","Position","ADP"],sampleCheck:c=>c["Full Name"]&&c.ADP},{path:"/canonical_data/projections/projections_2025.csv",name:"Projections 2025",expectedColumns:["playerName","position","fantasyPoints"],sampleCheck:c=>c.playerName&&c.fantasyPoints},{path:"/canonical_data/advanced_data/2024-2025/passing_summary.csv",name:"Passing Summary",expectedColumns:["player","team_name","yards"],sampleCheck:c=>c.player&&c.yards},{path:"/canonical_data/advanced_data/team_data/team_points_per_game.txt",name:"Team Points Per Game",delimiter:"	",expectedColumns:["Rank","Team","2024"],sampleCheck:c=>c.Team&&c[2024]},{path:"/canonical_data/historical_stats/fantasy-stats-passing_2024.csv",name:"Historical Passing Stats",expectedColumns:["player","team","fantasyPts"],sampleCheck:c=>c.player&&c.fantasyPts}];let e=!0;for(const c of t)try{P.info(`
📄 Testing: ${c.name}`),P.info("-".repeat(40));const d=await(await fetch(c.path)).text(),f={schema:{name:c.name.toLowerCase().replace(/\s+/g,"_"),columns:[],uniqueKeys:[],allowExtraColumns:!0,encoding:"UTF-8",delimiter:c.delimiter||",",quoteChar:'"',escapeChar:"\\",hasHeader:!0,skipRows:0,naValues:["","N/A","--","null","NA"],thousandsSeparator:",",decimalSeparator:".",duplicatePolicy:"last",validationMode:"warning"},bomHandling:"remove",trimWhitespace:!0,skipEmptyLines:!0,maxErrors:10},h=xt.parseWithSchema(d,f);if(h.success&&h.data.length>0){P.info(`✅ SUCCESS: Parsed ${h.data.length} rows`);const p=h.data[0],v=Object.keys(p);P.info(`  Columns found: ${v.slice(0,5).join(", ")}${v.length>5?"...":""}`),c.sampleCheck&&c.sampleCheck(p)?P.info("  ✓ Sample data validated"):P.warn("  ⚠ Sample check failed");const w=Object.entries(p).slice(0,3).map(([S,y])=>`${S}: ${y}`).join(" | ");P.info(`  Sample: ${w}`)}else P.error(`❌ FAILED: ${h.errors.slice(0,2).map(p=>p.message).join("; ")}`),e=!1}catch(u){P.error(`❌ ERROR: ${u instanceof Error?u.message:String(u)}`),e=!1}P.info(`
`+"=".repeat(60)),e?P.info("✅ ALL KEY FILES PARSED SUCCESSFULLY"):P.error("❌ SOME FILES FAILED TO PARSE"),P.info("=".repeat(60)),P.info(`
🔍 TESTING SPECIFIC FEATURES:`);const s=xt.parseWithSchema(`\uFEFFname,value
test,123`,{schema:{name:"bom_test",columns:[{name:"name",type:Jt.STRING,required:!0},{name:"value",type:Jt.INTEGER,required:!0}],uniqueKeys:[["name"]],allowExtraColumns:!1,encoding:"UTF-8",delimiter:",",quoteChar:'"',escapeChar:"\\",hasHeader:!0,skipRows:0,naValues:[],thousandsSeparator:",",decimalSeparator:".",duplicatePolicy:"fail",validationMode:"strict"},bomHandling:"remove",trimWhitespace:!0,skipEmptyLines:!0,maxErrors:10});P.info(`  BOM Handling: ${s.success?"✅ PASS":"❌ FAIL"}`);const r=xt.parseWithSchema(`name,value,percent,currency
test,"1,234.56","45.5%","$199"`,{schema:{name:"number_test",columns:[{name:"name",type:Jt.STRING,required:!0},{name:"value",type:Jt.FLOAT,required:!0},{name:"percent",type:Jt.PERCENTAGE,required:!0},{name:"currency",type:Jt.CURRENCY,required:!0}],uniqueKeys:[],allowExtraColumns:!1,encoding:"UTF-8",delimiter:",",quoteChar:'"',escapeChar:"\\",hasHeader:!0,skipRows:0,naValues:[],thousandsSeparator:",",decimalSeparator:".",duplicatePolicy:"fail",validationMode:"strict"},bomHandling:"remove",trimWhitespace:!0,skipEmptyLines:!0,maxErrors:10});if(r.success&&r.data.length>0){const c=r.data[0];P.info("  Number Parsing: ✅ PASS"),P.info(`    - Float: ${c.value} (expected: 1234.56)`),P.info(`    - Percent: ${c.percent} (expected: 0.455)`),P.info(`    - Currency: ${c.currency} (expected: 199)`)}else P.error("  Number Parsing: ❌ FAIL");const l=xt.parseWithSchema(`name,value
John,100
John,200
Jane,300`,{schema:{name:"dup_test",columns:[{name:"name",type:Jt.STRING,required:!0},{name:"value",type:Jt.INTEGER,required:!0}],uniqueKeys:[["name"]],allowExtraColumns:!1,encoding:"UTF-8",delimiter:",",quoteChar:'"',escapeChar:"\\",hasHeader:!0,skipRows:0,naValues:[],thousandsSeparator:",",decimalSeparator:".",duplicatePolicy:"last",validationMode:"strict"},bomHandling:"remove",trimWhitespace:!0,skipEmptyLines:!0,maxErrors:10});if(P.info(`  Duplicate Handling: ${l.data.length===2?"✅ PASS":"❌ FAIL"}`),l.success){const c=l.data.find(u=>u.name==="John");P.info(`    - John's value: ${c==null?void 0:c.value} (expected: 200 with 'last' policy)`)}P.info(`
✨ Test complete! All CSV parsing features verified.`)}typeof window<"u"&&(window.quickDataTest=jp,P.info("Quick data test loaded. Run window.quickDataTest() to test parsing."));async function bp(){P.info("=".repeat(60)),P.info("STRICT CSV PARSING TEST - WITH SCHEMA ENFORCEMENT"),P.info("=".repeat(60));try{P.info(`
📊 TEST 1: ADP Data with Strict Schema`),P.info("-".repeat(40));const e=await(await fetch("/canonical_data/adp/adp0_2025.csv")).text(),n={schema:ga.ADP_DATA,bomHandling:"remove",trimWhitespace:!0,skipEmptyLines:!0,maxErrors:10,quarantinePath:"/tmp/quarantine/adp_errors.csv"},s=xt.parseWithSchema(e,n);P.info("✅ ADP Parse Result:"),P.info(`  - Success: ${s.success}`),P.info(`  - Total rows parsed: ${s.data.length}`),P.info(`  - Errors: ${s.errors.length}`),P.info(`  - Warnings: ${s.warnings.length}`),s.errors.length>0&&(P.error("ADP Parsing Errors (first 5):"),s.errors.slice(0,5).forEach(N=>{P.error(`  Row ${N.row}: ${N.message}`)}));const a=s.lineage;P.info(`
📈 Data Lineage:`),P.info(`  Original rows: ${a.rowCountOriginal}`),P.info(`  After headers: ${a.rowCountAfterHeaders}`),P.info(`  After empty removal: ${a.rowCountAfterEmpty}`),P.info(`  After validation: ${a.rowCountAfterValidation}`),P.info(`  After deduplication: ${a.rowCountAfterDuplicates}`),P.info(`  Final count: ${a.rowCountFinal}`),P.info(`  Coercions: ${a.coercions.length}`),P.info(`  Quarantined: ${a.quarantinedRows.length}`),a.coercions.length>0&&(P.info(`
🔄 Sample Coercions (first 5):`),a.coercions.slice(0,5).forEach(N=>{P.info(`  Row ${N.row}, Column "${N.column}": "${N.originalValue}" → ${N.coercedValue} (${N.reason})`)})),P.info(`
📊 TEST 2: Projections Data`),P.info("-".repeat(40));const o=await(await fetch("/canonical_data/projections/projections_2025.csv")).text(),l={schema:ga.PROJECTIONS,bomHandling:"remove",trimWhitespace:!0,skipEmptyLines:!0,maxErrors:10},c=xt.parseWithSchema(o,l);P.info("✅ Projections Parse Result:"),P.info(`  - Success: ${c.success}`),P.info(`  - Total rows parsed: ${c.data.length}`),P.info(`  - Errors: ${c.errors.length}`),P.info(`  - Warnings: ${c.warnings.length}`),P.info(`
📊 TEST 3: Team Metrics (Tab-Delimited)`),P.info("-".repeat(40));const d=await(await fetch("/canonical_data/advanced_data/team_data/team_points_per_game.txt")).text(),m={schema:ga.TEAM_METRICS,bomHandling:"remove",trimWhitespace:!0,skipEmptyLines:!0,maxErrors:10},f=xt.parseWithSchema(d,m);P.info("✅ Team Metrics Parse Result:"),P.info(`  - Success: ${f.success}`),P.info(`  - Total rows parsed: ${f.data.length}`),P.info(`  - Errors: ${f.errors.length}`),P.info(`  - Warnings: ${f.warnings.length}`),P.info(`
🔗 TEST 4: Referential Integrity Check`),P.info("-".repeat(40));const h=xt.checkReferentialIntegrity(Wx);P.info("✅ Referential Integrity Result:"),P.info(`  - Valid: ${h.valid}`),P.info(`  - Violations: ${h.violations.length}`),h.violations.length>0&&(P.warn("Referential Integrity Violations:"),h.violations.forEach(N=>{P.warn(`  ${N.rule.sourceTable}.${N.rule.sourceColumn} → ${N.rule.targetTable}.${N.rule.targetColumn}`),P.warn(`    Missing values (${N.count} total): ${N.missingValues.slice(0,5).join(", ")}${N.count>5?"...":""}`)})),P.info(`
🔍 TEST 5: Duplicate Handling Test`),P.info("-".repeat(40));const p=`"Full Name","Position","Team Abbreviation","ADP"
"Justin Jefferson","WR","MIN","4.5"
"Justin Jefferson","WR","MIN","4.8"
"CeeDee Lamb","WR","DAL","6.2"`,v={schema:{...ga.ADP_DATA,duplicatePolicy:"last",columns:[{name:"Full Name",type:"string",required:!0},{name:"Position",type:"enum",required:!0,allowedValues:["WR","RB","QB","TE"]},{name:"Team Abbreviation",type:"string",required:!0},{name:"ADP",type:"float",required:!0}]},bomHandling:"remove",trimWhitespace:!0,skipEmptyLines:!0,maxErrors:10},w=xt.parseWithSchema(p,v);P.info("✅ Duplicate Handling Result:"),P.info("  - Original rows: 3"),P.info(`  - After deduplication: ${w.data.length}`),P.info(`  - Duplicates removed: ${w.lineage.duplicatesRemoved}`),P.info("  - Final data:"),w.data.forEach(N=>{P.info(`    ${N["Full Name"]} (${N.Position}) - ADP: ${N.ADP}`)}),P.info(`
❌ TEST 6: Strict Validation Failure`),P.info("-".repeat(40));const S=`"Full Name","Position","Team Abbreviation","ADP"
"Invalid Player","XYZ","ZZZ","999"
"Valid Player","WR","MIN","4.5"`,y={schema:{...ga.ADP_DATA,validationMode:"strict",columns:[{name:"Full Name",type:"string",required:!0},{name:"Position",type:"enum",required:!0,allowedValues:["WR","RB","QB","TE"]},{name:"Team Abbreviation",type:"string",required:!0,pattern:/^[A-Z]{2,3}$/},{name:"ADP",type:"float",required:!0,min:1,max:300}]},bomHandling:"remove",trimWhitespace:!0,skipEmptyLines:!0,maxErrors:10},g=xt.parseWithSchema(S,y);P.info("✅ Strict Validation Result:"),P.info(`  - Success: ${g.success}`),P.info(`  - Valid rows: ${g.data.length}`),P.info(`  - Quarantined rows: ${g.lineage.quarantinedRows.length}`),P.info(`  - Errors: ${g.errors.length}`),g.errors.length>0&&(P.error("Validation Errors:"),g.errors.forEach(N=>{P.error(`  Row ${N.row}, Column "${N.column}": ${N.message}`)})),P.info(`
📋 FINAL LINEAGE REPORT`),P.info("-".repeat(40));const x=xt.exportLineageReport();P.info(x),P.info(`
`+"=".repeat(60)),P.info("✅ ALL STRICT PARSING TESTS COMPLETE"),P.info("=".repeat(60)),P.info(`
Key Features Demonstrated:`),P.info("  ✓ Explicit dtype enforcement per column"),P.info("  ✓ NA value handling with configurable patterns"),P.info("  ✓ Thousands/decimal separator support"),P.info("  ✓ BOM detection and removal"),P.info("  ✓ Strict schema enforcement (fail on unexpected)"),P.info("  ✓ Duplicate handling with configurable policy"),P.info("  ✓ Referential integrity checking across CSVs"),P.info("  ✓ Comprehensive row count logging at each stage"),P.info("  ✓ Coercion tracking and quarantine support")}catch(t){P.error("Test failed:",t)}}typeof window<"u"&&(window.testStrictCSVParsing=bp,P.info("Strict CSV parsing test loaded. Run window.testStrictCSVParsing() to execute."));async function Pp(){var p,v;P.info("=".repeat(80)),P.info("🚀 FULL DATA VALIDATION - ALL CSV FILES"),P.info("=".repeat(80));const t=[],e=[{path:"/canonical_data/adp/adp0_2025.csv",name:"ADP Rankings"},{path:"/canonical_data/adp/adp_tier_data_2025.csv",name:"ADP Tiers"},{path:"/canonical_data/adp/cbs_trade_values_week0_2025.csv",name:"CBS Trade Values"},{path:"/canonical_data/adp/fpros_trade_values_dynasty_week0_2025.csv",name:"Dynasty Trade Values"},{path:"/canonical_data/adp/fpros_trade_values_redraft_week0_2025.csv",name:"Redraft Trade Values"},{path:"/canonical_data/adp/pff_redraft_rankings_week0_2025.csv",name:"PFF Rankings"},{path:"/canonical_data/projections/projections_2025.csv",name:"Season Projections"},{path:"/canonical_data/projections/projections_vorp_2025.csv",name:"VORP Projections"},{path:"/canonical_data/projections/weekly_projections_w1_2025.csv",name:"Week 1 Projections"},{path:"/canonical_data/historical_stats/fantasy-stats-kicking_2024.csv",name:"Kicking Stats 2024"},{path:"/canonical_data/historical_stats/fantasy-stats-passing_2024.csv",name:"Passing Stats 2024"},{path:"/canonical_data/historical_stats/fantasy-stats-receiving_2024.csv",name:"Receiving Stats 2024"},{path:"/canonical_data/historical_stats/fantasy-stats-rushing_2024.csv",name:"Rushing Stats 2024"},{path:"/canonical_data/advanced_data/2024-2025/passing_accuracy.csv",name:"Passing Accuracy"},{path:"/canonical_data/advanced_data/2024-2025/passing_air_yards.csv",name:"Passing Air Yards"},{path:"/canonical_data/advanced_data/2024-2025/passing_danger_plays.csv",name:"Passing Danger Plays"},{path:"/canonical_data/advanced_data/2024-2025/passing_deep_ball.csv",name:"Passing Deep Ball"},{path:"/canonical_data/advanced_data/2024-2025/passing_play_action.csv",name:"Play Action"},{path:"/canonical_data/advanced_data/2024-2025/passing_pressure.csv",name:"Passing Pressure"},{path:"/canonical_data/advanced_data/2024-2025/passing_red_zone.csv",name:"Red Zone Passing"},{path:"/canonical_data/advanced_data/2024-2025/passing_summary.csv",name:"Passing Summary"},{path:"/canonical_data/advanced_data/2024-2025/passing_time_to_throw.csv",name:"Time to Throw"},{path:"/canonical_data/advanced_data/2024-2025/rushing_expected_yards.csv",name:"Expected Rushing Yards"},{path:"/canonical_data/advanced_data/2024-2025/rushing_gap.csv",name:"Gap Rushing"},{path:"/canonical_data/advanced_data/2024-2025/rushing_quarterback.csv",name:"QB Rushing"},{path:"/canonical_data/advanced_data/2024-2025/rushing_summary.csv",name:"Rushing Summary"},{path:"/canonical_data/advanced_data/2024-2025/receiving_deep_ball.csv",name:"Deep Ball Receiving"},{path:"/canonical_data/advanced_data/2024-2025/receiving_red_zone.csv",name:"Red Zone Receiving"},{path:"/canonical_data/advanced_data/2024-2025/receiving_summary.csv",name:"Receiving Summary"},{path:"/canonical_data/advanced_data/2024-2025/receiving_usage.csv",name:"Receiving Usage"},{path:"/canonical_data/advanced_data/team_data/defensive_elo.txt",name:"Defensive ELO",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/offensive_elo.txt",name:"Offensive ELO",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/passing_defense_rankings.txt",name:"Pass Defense",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/passing_offense_rankings.txt",name:"Pass Offense",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/rushing_defense_rankings.txt",name:"Rush Defense",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/rushing_offense_rankings.txt",name:"Rush Offense",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_defensive_dvoa.txt",name:"Defensive DVOA",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_offensive_dvoa.txt",name:"Offensive DVOA",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_pace_data.txt",name:"Team Pace",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_passing_yards_allowed.txt",name:"Pass Yards Allowed",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_points_allowed.txt",name:"Points Allowed",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_points_per_game.txt",name:"Points Per Game",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_red_zone_efficiency.txt",name:"Red Zone Efficiency",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_rushing_yards_allowed.txt",name:"Rush Yards Allowed",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_sacks_allowed.txt",name:"Sacks Allowed",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_takeaways_per_game.txt",name:"Takeaways",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_third_down_conversion.txt",name:"Third Down",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_time_of_possession.txt",name:"Time of Possession",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_total_defense.txt",name:"Total Defense",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_total_offense.txt",name:"Total Offense",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_turnover_differential.txt",name:"Turnover Differential",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_yards_per_play.txt",name:"Yards Per Play",delimiter:"	"}];let n=0,s=0,a=0;for(const w of e)try{P.info(`
📄 Validating: ${w.name}`);const S=await fetch(w.path);if(!S.ok){t.push({file:w.name,success:!1,rowsParsed:0,errors:1,warnings:0,samples:[],message:`HTTP ${S.status}`}),s++;continue}const y=await S.text(),x={schema:{name:w.name.toLowerCase().replace(/\s+/g,"_"),columns:[],uniqueKeys:[],allowExtraColumns:!0,encoding:"UTF-8",delimiter:w.delimiter||",",quoteChar:'"',escapeChar:"\\",hasHeader:!0,skipRows:0,naValues:["","N/A","--","null","NA","n/a"],thousandsSeparator:",",decimalSeparator:".",duplicatePolicy:"last",validationMode:"warning"},bomHandling:"remove",trimWhitespace:!0,skipEmptyLines:!0,maxErrors:10},N=xt.parseWithSchema(y,x);N.success&&N.data.length>0?(P.info(`  ✅ Success: ${N.data.length} rows parsed`),t.push({file:w.name,success:!0,rowsParsed:N.data.length,errors:N.errors.length,warnings:N.warnings.length,samples:N.data.slice(0,3)}),n++,a+=N.data.length):(P.error(`  ❌ Failed: ${((p=N.errors[0])==null?void 0:p.message)||"Unknown error"}`),t.push({file:w.name,success:!1,rowsParsed:0,errors:N.errors.length,warnings:N.warnings.length,samples:[],message:(v=N.errors[0])==null?void 0:v.message}),s++)}catch(S){P.error(`  ❌ Error: ${S instanceof Error?S.message:String(S)}`),t.push({file:w.name,success:!1,rowsParsed:0,errors:1,warnings:0,samples:[],message:S instanceof Error?S.message:String(S)}),s++}P.info(`
`+"=".repeat(80)),P.info("📊 VALIDATION SUMMARY"),P.info("=".repeat(80)),P.info(`
✅ Successful: ${n}/${e.length} files`),P.info(`❌ Failed: ${s}/${e.length} files`),P.info(`📈 Total Rows Parsed: ${a.toLocaleString()}`);const r=t.filter(w=>!w.success);r.length>0&&(P.error(`
❌ FAILED FILES:`),r.forEach(w=>{P.error(`  - ${w.file}: ${w.message||"Parse error"}`)})),P.info(`
✅ SUCCESSFULLY PARSED FILES:`),t.filter(w=>w.success).forEach(w=>{if(P.info(`  - ${w.file}: ${w.rowsParsed} rows`),w.samples.length>0){const S=w.samples[0],g=Object.keys(S).slice(0,3).map(x=>`${x}="${S[x]}"`).join(", ");P.info(`    Sample: ${g}`)}}),P.info(`
🔍 DATA INTEGRITY CHECKS:`);const l=t.find(w=>w.file==="ADP Rankings"),c=t.find(w=>w.file==="Season Projections");l!=null&&l.success&&(c!=null&&c.success)?P.info("  ✅ Core data files (ADP + Projections) parsed successfully"):P.error("  ❌ Missing core data files");const u=t.filter(w=>w.file.includes("Team")||w.file.includes("Defense")||w.file.includes("Offense")),d=u.filter(w=>w.success).length;P.info(`  📊 Team Data: ${d}/${u.length} files parsed`);const m=t.filter(w=>w.file.includes("2024")),f=m.filter(w=>w.success).length;if(P.info(`  📅 Historical Data: ${f}/${m.length} files parsed`),P.info(`
`+"=".repeat(80)),s===0)P.info("🎉 ALL DATA VALIDATED SUCCESSFULLY!"),P.info("✅ 100% of CSV files are being parsed correctly");else{const w=(n/e.length*100).toFixed(1);P.warn(`⚠️ VALIDATION INCOMPLETE: ${w}% success rate`),P.warn(`   ${s} files need attention`)}P.info("=".repeat(80));const h={summary:{totalFiles:e.length,successful:n,failed:s,totalRowsParsed:a,successRate:(n/e.length*100).toFixed(1)+"%"},results:t,timestamp:new Date().toISOString()};typeof window<"u"&&(window.validationReport=h,P.info(`
📋 Full report available at: window.validationReport`))}typeof window<"u"&&(window.runFullValidation=Pp,P.info("Full validation loaded. Run window.runFullValidation() to validate all CSV files."));async function Gv(){P.info(`🚀 Starting comprehensive data validation...
`);try{P.info("Step 1: Quick parsing test of key files"),await jp(),P.info(`
Step 2: Testing strict parsing features`),await bp(),P.info(`
Step 3: Full validation of all CSV files`),await Pp(),P.info(`
✅ All validation tests complete!`),P.info("Check window.validationReport for detailed results")}catch(t){throw P.error("Validation failed:",t),t}}typeof window<"u"&&(window.validateAllData=Gv,P.info("Data validation suite loaded. Run window.validateAllData() to validate all CSV parsing."));function rd(t,e=","){const n=t.split(/\r?\n/).filter(r=>r.trim()!=="");if(n.length===0)return[];n[0].charCodeAt(0)===65279&&(n[0]=n[0].substring(1));const s=id(n[0],e),a=[];for(let r=1;r<n.length;r++){const o=id(n[r],e),l={};s.forEach((c,u)=>{l[c]=o[u]!==void 0?o[u]:""}),a.push(l)}return a}function id(t,e){const n=[];let s="",a=!1;for(let r=0;r<t.length;r++){const o=t[r],l=t[r+1];o==='"'?a&&l==='"'?(s+='"',r++):a=!a:o===e&&!a?(n.push(s.trim()),s=""):s+=o}return n.push(s.trim()),n}async function Rp(){const t={summary:{files_checked:0,total_errors:0},files:[],recommendations:[]},e=[{path:"/canonical_data/adp/adp0_2025.csv",delimiter:","},{path:"/canonical_data/adp/adp_tier_data_2025.csv",delimiter:","},{path:"/canonical_data/adp/cbs_trade_values_week0_2025.csv",delimiter:","},{path:"/canonical_data/adp/fpros_trade_values_dynasty_week0_2025.csv",delimiter:","},{path:"/canonical_data/adp/fpros_trade_values_redraft_week0_2025.csv",delimiter:","},{path:"/canonical_data/adp/pff_redraft_rankings_week0_2025.csv",delimiter:","},{path:"/canonical_data/projections/projections_2025.csv",delimiter:","},{path:"/canonical_data/projections/projections_vorp_2025.csv",delimiter:","},{path:"/canonical_data/projections/weekly_projections_w1_2025.csv",delimiter:","},{path:"/canonical_data/historical_stats/fantasy-stats-kicking_2024.csv",delimiter:","},{path:"/canonical_data/historical_stats/fantasy-stats-passing_2024.csv",delimiter:","},{path:"/canonical_data/historical_stats/fantasy-stats-receiving_2024.csv",delimiter:","},{path:"/canonical_data/historical_stats/fantasy-stats-rushing_2024.csv",delimiter:","},{path:"/canonical_data/advanced_data/2024-2025/passing_accuracy.csv",delimiter:","},{path:"/canonical_data/advanced_data/2024-2025/passing_air_yards.csv",delimiter:","},{path:"/canonical_data/advanced_data/2024-2025/passing_danger_plays.csv",delimiter:","},{path:"/canonical_data/advanced_data/2024-2025/passing_deep_ball.csv",delimiter:","},{path:"/canonical_data/advanced_data/2024-2025/passing_play_action.csv",delimiter:","},{path:"/canonical_data/advanced_data/2024-2025/passing_pressure.csv",delimiter:","},{path:"/canonical_data/advanced_data/2024-2025/passing_red_zone.csv",delimiter:","},{path:"/canonical_data/advanced_data/2024-2025/passing_summary.csv",delimiter:","},{path:"/canonical_data/advanced_data/2024-2025/passing_time_to_throw.csv",delimiter:","},{path:"/canonical_data/advanced_data/2024-2025/rushing_expected_yards.csv",delimiter:","},{path:"/canonical_data/advanced_data/2024-2025/rushing_gap.csv",delimiter:","},{path:"/canonical_data/advanced_data/2024-2025/rushing_quarterback.csv",delimiter:","},{path:"/canonical_data/advanced_data/2024-2025/rushing_summary.csv",delimiter:","},{path:"/canonical_data/advanced_data/2024-2025/receiving_deep_ball.csv",delimiter:","},{path:"/canonical_data/advanced_data/2024-2025/receiving_red_zone.csv",delimiter:","},{path:"/canonical_data/advanced_data/2024-2025/receiving_summary.csv",delimiter:","},{path:"/canonical_data/advanced_data/2024-2025/receiving_usage.csv",delimiter:","},{path:"/canonical_data/advanced_data/team_data/defensive_elo.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/offensive_elo.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/passing_defense_rankings.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/passing_offense_rankings.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/rushing_defense_rankings.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/rushing_offense_rankings.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_defensive_dvoa.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_offensive_dvoa.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_pace_data.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_passing_yards_allowed.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_points_allowed.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_points_per_game.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_red_zone_efficiency.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_rushing_yards_allowed.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_sacks_allowed.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_takeaways_per_game.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_third_down_conversion.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_time_of_possession.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_total_defense.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_total_offense.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_turnover_differential.txt",delimiter:"	"},{path:"/canonical_data/advanced_data/team_data/team_yards_per_play.txt",delimiter:"	"}],n=new Map,s="/fftool/";try{const r=await fetch(`${s}canonical_data/adp/adp0_2025.csv`);if(r.ok){const o=await r.text(),l=rd(o,","),c=new Set,u=new Set;l.forEach(d=>{d["Full Name"]&&c.add(d["Full Name"]),d.Position&&u.add(d.Position)}),n.set("playerNames",c),n.set("positions",u)}}catch{}for(const r of e){const o=r.path.split("/").pop()||"",l={file_name:o,errors:[]};try{const c=await fetch(`${s}${r.path.startsWith("/")?r.path.slice(1):r.path}`);if(!c.ok){l.errors.push({type:"missing_required",evidence:{file:o,row_number:0,columns:[],details:`File not found or inaccessible (HTTP ${c.status})`}}),t.files.push(l),t.summary.total_errors++;continue}const u=await c.text(),d=rd(u,r.delimiter);if(t.summary.files_checked++,d.length===0)l.errors.push({type:"missing_required",evidence:{file:o,row_number:0,columns:[],details:"File is empty or has no valid rows"}});else{const f=Object.keys(d[0]).length,h=new Map;d.forEach((p,v)=>{const w=v+2,S=Object.keys(p).length;if(S!==f&&l.errors.push({type:"row_length_mismatch",evidence:{file:o,row_number:w,columns:Object.keys(p),details:`Row has ${S} columns, expected ${f}`}}),Object.entries(p).forEach(([y,g])=>{const x=String(g).trim();if((x===""||x==="null"||x==="undefined")&&["Full Name","playerName","player","Team","team","Position","position"].includes(y)&&l.errors.push({type:"missing_required",evidence:{file:o,row_number:w,columns:[y],details:`Required field '${y}' is empty or null`}}),[/rank/i,/adp/i,/value/i,/points/i,/yards/i,/touchdowns/i,/completions/i,/attempts/i,/receptions/i,/targets/i,/games/i,/sacks/i,/interceptions/i,/fumbles/i,/^20\d{2}$/,/elo/i,/dvoa/i,/pace/i,/efficiency/i,/differential/i].some(j=>j.test(y))&&x!==""&&x!=="-"&&x!=="--"){const j=x.replace(/[$,%]/g,"").replace(/,/g,"");if(!/^-?\d+(\.\d+)?$/.test(j)&&j!=="N/A"&&j!=="NA"&&l.errors.push({type:"invalid_type",evidence:{file:o,row_number:w,columns:[y],details:`Column '${y}' has non-numeric value: '${x}'`}}),/^Overall Rank$/i.test(y)||/^Rank$/i.test(y)){const _=parseInt(j);!isNaN(_)&&_<1&&l.errors.push({type:"invalid_domain",evidence:{file:o,row_number:w,columns:[y],details:`Rank value ${_} must be positive`}})}if(/ADP/i.test(y)){const _=parseFloat(j);!isNaN(_)&&(_<0||_>500)&&l.errors.push({type:"invalid_domain",evidence:{file:o,row_number:w,columns:[y],details:`ADP value ${_} outside valid range [0, 500]`}})}if(/fantasy/i.test(y)&&/points/i.test(y)){const _=parseFloat(j);!isNaN(_)&&_<-10&&l.errors.push({type:"invalid_domain",evidence:{file:o,row_number:w,columns:[y],details:`Fantasy points ${_} unrealistically low`}})}}if((/^Position$/i.test(y)||/^position$/i.test(y))&&x&&!["QB","RB","WR","TE","K","DST","DEF","D/ST"].includes(x.toUpperCase())&&l.errors.push({type:"invalid_domain",evidence:{file:o,row_number:w,columns:[y],details:`Invalid position value: '${x}'`}}),["Overall Rank","Full Name","playerName","player","Team"].includes(y)){h.has(y)||h.set(y,new Set);const j=h.get(y);j.has(x)&&l.errors.push({type:"duplicate_pk",evidence:{file:o,row_number:w,columns:[y],details:`Duplicate value '${x}' in potential primary key column '${y}'`}}),j.add(x)}}),o==="projections_2025.csv"||o==="projections_vorp_2025.csv"){const y=p.playerName;y&&n.has("playerNames")&&(n.get("playerNames").has(y)||l.errors.push({type:"broken_fk",evidence:{file:o,row_number:w,columns:["playerName"],details:`Player '${y}' not found in ADP reference data`}}))}})}}catch(c){l.errors.push({type:"missing_required",evidence:{file:o,row_number:0,columns:[],details:`Parse error: ${c instanceof Error?c.message:String(c)}`}})}l.errors.length>0&&(t.files.push(l),t.summary.total_errors+=l.errors.length)}const a=new Map;return t.files.forEach(r=>{r.errors.forEach(o=>{a.set(o.type,(a.get(o.type)||0)+1)})}),a.get("invalid_type")>0&&t.recommendations.push("Implement strict type validation with zero tolerance for non-conforming values"),a.get("missing_required")>0&&t.recommendations.push("Add NOT NULL constraints for all required fields"),a.get("duplicate_pk")>0&&t.recommendations.push("Enforce unique constraints on primary key columns"),a.get("broken_fk")>0&&t.recommendations.push("Implement foreign key constraints to maintain referential integrity"),a.get("row_length_mismatch")>0&&t.recommendations.push("Validate CSV structure before parsing to ensure column consistency"),a.get("invalid_domain")>0&&t.recommendations.push("Add domain validation rules for business constraints"),t}typeof window<"u"&&(window.auditCSV=async()=>{console.log("Running zero-tolerance CSV audit...");const t=await Rp();return console.log(JSON.stringify(t,null,2)),t},P.info("Zero-tolerance CSV audit loaded. Run window.auditCSV() for complete audit."));async function Kv(){const t=await Rp();return console.log("AUDIT REPORT:"),console.log(JSON.stringify(t,null,2)),typeof window<"u"&&(window.lastAuditReport=t),t}typeof window<"u"&&setTimeout(()=>{Kv().then(t=>{console.log(`Audit complete: ${t.summary.files_checked} files checked, ${t.summary.total_errors} errors found`)})},1e3);const Yv=new bg({defaultOptions:{queries:{staleTime:1e3*60*5,refetchOnWindowFocus:!1}}});jo.createRoot(document.getElementById("root")).render(i.jsx(vi.StrictMode,{children:i.jsx(Rg,{client:Yv,children:i.jsx(Qv,{})})}));
//# sourceMappingURL=index-YEHmZGPl.js.map
